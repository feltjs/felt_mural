import{n as Ze,e as g,s as P,t as oe,c as v,a as B,d as E,f as S,b as _e,m as Ne,o as i,y as be,i as te,g as a,I as X,h as qe,j as ze,r as lt,a8 as gt,J as Xe,aa as Qe,A as Re,ad as Lt,G as ye,E as Ye,ae as we,ab as nt,K as vt,L as bt,af as Ve,ag as st}from"../chunks/scheduler.a4956b2f.js";import{S as $e,i as xe,g as yt,e as wt,a as Ee,t as Le,c as Me,b as Ce,m as je,d as Ae,h as ke}from"../chunks/index.23824295.js";import{S as Tt,T as It,r as ve,C as Nt}from"../chunks/Scaled.74b37ae2.js";import{a as Mt}from"../chunks/tome.cd90b044.js";import{g as Ct}from"../chunks/globals.7f7f1b26.js";import{e as He,u as it,o as kt,d as jt}from"../chunks/each.cd1e893b.js";import{w as at}from"../chunks/index.c6fd790a.js";import{D as Fe,a as At,b as Ut,t as tt,S as Dt,u as Pt,p as ut,c as St,d as Bt,M as Ot,e as rt}from"../chunks/Mural_Item.9c509085.js";function Vt(l){let e;return{c(){e=oe("👁")},l(t){e=_e(t,"👁")},m(t,n){te(t,e,n)},d(t){t&&E(e)}}}function Ft(l){let e;return{c(){e=oe("•")},l(t){e=_e(t,"•")},m(t,n){te(t,e,n)},d(t){t&&E(e)}}}function ot(l){let e;return{c(){e=oe(`no
				`)},l(t){e=_e(t,`no
				`)},m(t,n){te(t,e,n)},d(t){t&&E(e)}}}function zt(l){let e,t=tt(l[6]).length+"",n,u,s,_,r,f="points";return{c(){e=g("span"),n=oe(t),u=P(),s=g("br"),_=P(),r=g("small"),r.textContent=f,this.h()},l(o){e=v(o,"SPAN",{class:!0});var m=B(e);n=_e(m,t),u=S(m),s=v(m,"BR",{}),_=S(m),r=v(m,"SMALL",{"data-svelte-h":!0}),Ne(r)!=="svelte-les35l"&&(r.textContent=f),m.forEach(E),this.h()},h(){i(e,"class","content svelte-ge28fj")},m(o,m){te(o,e,m),a(e,n),a(e,u),a(e,s),a(e,_),a(e,r)},p(o,m){m&64&&t!==(t=tt(o[6]).length+"")&&qe(n,t)},d(o){o&&E(e)}}}function Rt(l){let e,t,n="x",u,s,_,r,f,o,m,p,d,h,C="y",O,k,z,R,T,I,V,Q,A,q,b="radius",y,N,K,Y,W,U,G,x,le;return{c(){e=g("label"),t=g("small"),t.textContent=n,u=P(),s=g("input"),r=P(),f=g("input"),p=P(),d=g("label"),h=g("small"),h.textContent=C,O=P(),k=g("input"),R=P(),T=g("input"),Q=P(),A=g("label"),q=g("small"),q.textContent=b,y=P(),N=g("input"),Y=P(),W=g("input"),this.h()},l(M){e=v(M,"LABEL",{title:!0,class:!0});var D=B(e);t=v(D,"SMALL",{class:!0,"data-svelte-h":!0}),Ne(t)!=="svelte-9crtu1"&&(t.textContent=n),u=S(D),s=v(D,"INPUT",{class:!0,type:!0,min:!0,max:!0}),r=S(D),f=v(D,"INPUT",{class:!0,type:!0}),D.forEach(E),p=S(M),d=v(M,"LABEL",{title:!0,class:!0});var w=B(d);h=v(w,"SMALL",{class:!0,"data-svelte-h":!0}),Ne(h)!=="svelte-1aa9kl6"&&(h.textContent=C),O=S(w),k=v(w,"INPUT",{class:!0,type:!0,min:!0,max:!0}),R=S(w),T=v(w,"INPUT",{class:!0,type:!0}),w.forEach(E),Q=S(M),A=v(M,"LABEL",{title:!0,class:!0});var ie=B(A);q=v(ie,"SMALL",{class:!0,"data-svelte-h":!0}),Ne(q)!=="svelte-182540t"&&(q.textContent=b),y=S(ie),N=v(ie,"INPUT",{class:!0,type:!0,min:!0,max:!0}),Y=S(ie),W=v(ie,"INPUT",{class:!0,type:!0}),ie.forEach(E),this.h()},h(){i(t,"class","title"),i(s,"class","item_input svelte-ge28fj"),i(s,"type","range"),s.value=_=l[6].cx,i(s,"min",0),i(s,"max",l[2]),i(f,"class","item_input svelte-ge28fj"),i(f,"type","number"),f.value=o=l[6].cx,i(e,"title",m="modify the "+l[6].type+"'s x position"),i(e,"class","svelte-ge28fj"),i(h,"class","title"),i(k,"class","item_input svelte-ge28fj"),i(k,"type","range"),k.value=z=l[6].cy,i(k,"min",0),i(k,"max",l[3]),i(T,"class","item_input svelte-ge28fj"),i(T,"type","number"),T.value=I=l[6].cy,i(d,"title",V="modify the "+l[6].type+"'s y position"),i(d,"class","svelte-ge28fj"),i(q,"class","title"),i(N,"class","item_input svelte-ge28fj"),i(N,"type","range"),N.value=K=l[6].r,i(N,"min",1),i(N,"max",200),i(W,"class","item_input svelte-ge28fj"),i(W,"type","number"),W.value=U=l[6].r,i(A,"title",G="modify the "+l[6].type+"'s radius"),i(A,"class","svelte-ge28fj")},m(M,D){te(M,e,D),a(e,t),a(e,u),a(e,s),a(e,r),a(e,f),te(M,p,D),te(M,d,D),a(d,h),a(d,O),a(d,k),a(d,R),a(d,T),te(M,Q,D),te(M,A,D),a(A,q),a(A,y),a(A,N),a(A,Y),a(A,W),x||(le=[X(s,"input",l[22]),X(f,"input",l[23]),X(k,"input",l[24]),X(T,"input",l[25]),X(N,"input",l[26]),X(W,"input",l[27])],x=!0)},p(M,D){D&64&&_!==(_=M[6].cx)&&(s.value=_),D&4&&i(s,"max",M[2]),D&64&&o!==(o=M[6].cx)&&f.value!==o&&(f.value=o),D&64&&m!==(m="modify the "+M[6].type+"'s x position")&&i(e,"title",m),D&64&&z!==(z=M[6].cy)&&(k.value=z),D&8&&i(k,"max",M[3]),D&64&&I!==(I=M[6].cy)&&T.value!==I&&(T.value=I),D&64&&V!==(V="modify the "+M[6].type+"'s y position")&&i(d,"title",V),D&64&&K!==(K=M[6].r)&&(N.value=K),D&64&&U!==(U=M[6].r)&&W.value!==U&&(W.value=U),D&64&&G!==(G="modify the "+M[6].type+"'s radius")&&i(A,"title",G)},d(M){M&&(E(e),E(p),E(d),E(Q),E(A)),x=!1,lt(le)}}}function Ht(l){let e,t,n,u,s,_=l[6].type+"",r,f,o,m,p="opacity",d,h,C,O,k,z,R,T,I,V,Q,A,q,b,y,N,K,Y,W,U,G,x="stroke color",le,M,D,w,ie,Z,ce,ae="stroke width",Te,ue,fe,c,H,de,Ue,De,pe,We="🗙",ge,L;function J(j,F){return j[10]?Ft:Vt}let ne=J(l),re=ne(l),ee=(!l[5]||l[9]==="none")&&ot();function me(j,F){if(j[6].type==="circle")return Rt;if(j[6].type==="polyline")return zt}let he=me(l),$=he&&he(l);return{c(){e=g("li"),t=g("button"),re.c(),n=P(),u=g("div"),s=g("div"),r=oe(_),f=P(),o=g("label"),m=g("small"),m.textContent=p,d=P(),h=g("input"),O=P(),k=g("input"),R=P(),T=g("label"),I=g("small"),ee&&ee.c(),V=oe("fill"),Q=P(),A=g("input"),b=P(),y=g("input"),W=P(),U=g("label"),G=g("small"),G.textContent=x,le=P(),M=g("input"),ie=P(),Z=g("label"),ce=g("small"),ce.textContent=ae,Te=P(),ue=g("input"),c=P(),H=g("input"),Ue=P(),$&&$.c(),De=P(),pe=g("button"),pe.textContent=We,this.h()},l(j){e=v(j,"LI",{class:!0,"aria-hidden":!0});var F=B(e);t=v(F,"BUTTON",{class:!0});var Pe=B(t);re.l(Pe),Pe.forEach(E),n=S(F),u=v(F,"DIV",{class:!0});var se=B(u);s=v(se,"DIV",{class:!0});var Se=B(s);r=_e(Se,_),Se.forEach(E),f=S(se),o=v(se,"LABEL",{class:!0});var Ie=B(o);m=v(Ie,"SMALL",{class:!0,"data-svelte-h":!0}),Ne(m)!=="svelte-12nhgd4"&&(m.textContent=p),d=S(Ie),h=v(Ie,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),O=S(Ie),k=v(Ie,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),Ie.forEach(E),R=S(se),T=v(se,"LABEL",{title:!0,class:!0});var Be=B(T);I=v(Be,"SMALL",{class:!0});var et=B(I);ee&&ee.l(et),V=_e(et,"fill"),et.forEach(E),Q=S(Be),A=v(Be,"INPUT",{type:!0,title:!0,class:!0}),b=S(Be),y=v(Be,"INPUT",{class:!0,type:!0}),Be.forEach(E),W=S(se),U=v(se,"LABEL",{title:!0,class:!0});var Je=B(U);G=v(Je,"SMALL",{class:!0,"data-svelte-h":!0}),Ne(G)!=="svelte-4jtig2"&&(G.textContent=x),le=S(Je),M=v(Je,"INPUT",{class:!0,type:!0}),Je.forEach(E),ie=S(se),Z=v(se,"LABEL",{class:!0});var Oe=B(Z);ce=v(Oe,"SMALL",{class:!0,"data-svelte-h":!0}),Ne(ce)!=="svelte-txngkb"&&(ce.textContent=ae),Te=S(Oe),ue=v(Oe,"INPUT",{class:!0,type:!0}),c=S(Oe),H=v(Oe,"INPUT",{class:!0,type:!0}),Oe.forEach(E),Ue=S(se),$&&$.l(se),se.forEach(E),De=S(F),pe=v(F,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(pe)!=="svelte-1b5liiu"&&(pe.textContent=We),F.forEach(E),this.h()},h(){i(t,"class","icon_button plain"),be(t,"selected",l[10]),i(s,"class","type svelte-ge28fj"),i(m,"class","title"),i(h,"class","item_input svelte-ge28fj"),i(h,"type","range"),i(h,"min",0),i(h,"max",1),i(h,"step",.01),h.value=l[8],i(h,"title",C="modify the "+l[6].type+"'s opacity"),i(k,"class","item_input svelte-ge28fj"),i(k,"type","number"),i(k,"min",0),i(k,"max",1),i(k,"step",.01),k.value=l[8],i(k,"title",z="modify the "+l[6].type+"'s opacity"),i(o,"class","svelte-ge28fj"),i(I,"class","title"),i(A,"type","checkbox"),A.checked=l[5],i(A,"title",q="the "+l[6].type+"'s fill is "+(l[6].enable_fill?"enabled":"disabled")),i(A,"class","svelte-ge28fj"),i(y,"class","item_input svelte-ge28fj"),i(y,"type","color"),y.disabled=N=!l[5],y.value=K=l[9]==="none"?"#000000":l[9],i(T,"title",Y="modify the "+l[6].type+"'s fill color"),i(T,"class","svelte-ge28fj"),i(G,"class","title"),i(M,"class","item_input svelte-ge28fj"),i(M,"type","color"),M.value=D=l[6].stroke??"#000000",i(U,"title",w="modify the "+l[6].type+"'s stroke color"),i(U,"class","svelte-ge28fj"),i(ce,"class","title"),i(ue,"class","item_input svelte-ge28fj"),i(ue,"type","range"),ue.value=fe=l[6].stroke_width??Fe,i(H,"class","item_input svelte-ge28fj"),i(H,"type","number"),H.value=de=l[6].stroke_width??Fe,i(Z,"class","svelte-ge28fj"),i(u,"class","controls svelte-ge28fj"),i(pe,"class","icon_button plain"),i(e,"class","mural_item_list_item selectable svelte-ge28fj"),i(e,"aria-hidden",""),be(e,"hidden",l[10]),be(e,"selected",l[11])},m(j,F){te(j,e,F),a(e,t),re.m(t,null),a(e,n),a(e,u),a(u,s),a(s,r),a(u,f),a(u,o),a(o,m),a(o,d),a(o,h),a(o,O),a(o,k),a(u,R),a(u,T),a(T,I),ee&&ee.m(I,null),a(I,V),a(T,Q),a(T,A),a(T,b),a(T,y),a(u,W),a(u,U),a(U,G),a(U,le),a(U,M),a(u,ie),a(u,Z),a(Z,ce),a(Z,Te),a(Z,ue),a(Z,c),a(Z,H),a(u,Ue),$&&$.m(u,null),a(e,De),a(e,pe),ge||(L=[X(t,"click",l[14]),X(h,"input",l[15]),X(k,"input",l[16]),X(A,"input",l[17]),X(y,"input",l[18]),X(M,"input",l[19]),X(ue,"input",l[20]),X(H,"input",l[21]),X(pe,"click",l[28]),X(e,"click",l[29])],ge=!0)},p(j,[F]){ne!==(ne=J(j))&&(re.d(1),re=ne(j),re&&(re.c(),re.m(t,null))),F&1024&&be(t,"selected",j[10]),F&64&&_!==(_=j[6].type+"")&&qe(r,_),F&256&&(h.value=j[8]),F&64&&C!==(C="modify the "+j[6].type+"'s opacity")&&i(h,"title",C),F&256&&k.value!==j[8]&&(k.value=j[8]),F&64&&z!==(z="modify the "+j[6].type+"'s opacity")&&i(k,"title",z),!j[5]||j[9]==="none"?ee||(ee=ot(),ee.c(),ee.m(I,V)):ee&&(ee.d(1),ee=null),F&32&&(A.checked=j[5]),F&64&&q!==(q="the "+j[6].type+"'s fill is "+(j[6].enable_fill?"enabled":"disabled"))&&i(A,"title",q),F&32&&N!==(N=!j[5])&&(y.disabled=N),F&512&&K!==(K=j[9]==="none"?"#000000":j[9])&&(y.value=K),F&64&&Y!==(Y="modify the "+j[6].type+"'s fill color")&&i(T,"title",Y),F&64&&D!==(D=j[6].stroke??"#000000")&&(M.value=D),F&64&&w!==(w="modify the "+j[6].type+"'s stroke color")&&i(U,"title",w),F&64&&fe!==(fe=j[6].stroke_width??Fe)&&(ue.value=fe),F&64&&de!==(de=j[6].stroke_width??Fe)&&H.value!==de&&(H.value=de),he===(he=me(j))&&$?$.p(j,F):($&&$.d(1),$=he&&he(j),$&&($.c(),$.m(u,null))),F&1024&&be(e,"hidden",j[10]),F&2048&&be(e,"selected",j[11])},i:ze,o:ze,d(j){j&&E(e),re.d(),ee&&ee.d(),$&&$.d(),ge=!1,lt(L)}}}function Yt(l,e,t){let n,u,s,_,r,f,o,m,p=ze,d=()=>(p(),p=Xe(k,w=>t(6,m=w)),k),h,C=ze,O=()=>(C(),C=Xe(z,w=>t(7,h=w)),z);l.$$.on_destroy.push(()=>p()),l.$$.on_destroy.push(()=>C());let{item:k}=e;d();let{item_selection:z}=e;O();let{width:R}=e,{height:T}=e;const I=gt(),V=()=>I("action",{type:"update_item",id:m.id,data:{hidden:!m.hidden}}),Q=w=>I("action",{type:"update_item",id:m.id,data:{opacity:Number(w.currentTarget.value)}}),A=w=>I("action",{type:"update_item",id:m.id,data:{opacity:Number(w.currentTarget.value)}}),q=w=>I("action",{type:"update_item",id:m.id,data:{enable_fill:w.currentTarget.checked,fill:s??(w.currentTarget.checked?Ut:void 0)}}),b=w=>I("action",{type:"update_item",id:m.id,data:{fill:w.currentTarget.value}}),y=w=>I("action",{type:"update_item",id:m.id,data:{stroke:w.currentTarget.value}}),N=w=>I("action",{type:"update_item",id:m.id,data:{stroke_width:Number(w.currentTarget.value)}}),K=w=>I("action",{type:"update_item",id:m.id,data:{stroke_width:Number(w.currentTarget.value)}}),Y=w=>I("action",{type:"update_item",id:m.id,data:{cx:Number(w.currentTarget.value)}}),W=w=>I("action",{type:"update_item",id:m.id,data:{cx:Number(w.currentTarget.value)}}),U=w=>I("action",{type:"update_item",id:m.id,data:{cy:Number(w.currentTarget.value)}}),G=w=>I("action",{type:"update_item",id:m.id,data:{cy:Number(w.currentTarget.value)}}),x=w=>I("action",{type:"update_item",id:m.id,data:{r:Number(w.currentTarget.value)}}),le=w=>I("action",{type:"update_item",id:m.id,data:{r:Number(w.currentTarget.value)}}),M=()=>I("action",{type:"remove_item",id:m.id}),D=()=>Qe(z,h=k,h);return l.$$set=w=>{"item"in w&&d(t(0,k=w.item)),"item_selection"in w&&O(t(1,z=w.item_selection)),"width"in w&&t(2,R=w.width),"height"in w&&t(3,T=w.height)},l.$$.update=()=>{l.$$.dirty&129&&t(11,n=h===k),l.$$.dirty&64&&t(5,{enable_fill:u,fill:s,hidden:_,opacity:r}=m,u,(t(4,s),t(6,m)),(t(10,_),t(6,m)),(t(13,r),t(6,m))),l.$$.dirty&48&&t(9,f=u?s??At:"none"),l.$$.dirty&8192&&t(8,o=r??1)},[k,z,R,T,s,u,m,h,o,f,_,n,I,r,V,Q,A,q,b,y,N,K,Y,W,U,G,x,le,M,D]}class Gt extends $e{constructor(e){super(),xe(this,e,Yt,Ht,Ze,{item:0,item_selection:1,width:2,height:3})}}function _t(l,e,t){const n=l.slice();return n[6]=e[t],n}function ft(l,e){let t,n,u;return n=new Gt({props:{item:e[6],item_selection:e[0],width:e[1],height:e[2]}}),n.$on("action",e[5]),{key:l,first:null,c(){t=Re(),Me(n.$$.fragment),this.h()},l(s){t=Re(),Ce(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,_){te(s,t,_),je(n,s,_),u=!0},p(s,_){e=s;const r={};_&8&&(r.item=e[6]),_&1&&(r.item_selection=e[0]),_&2&&(r.width=e[1]),_&4&&(r.height=e[2]),n.$set(r)},i(s){u||(Ee(n.$$.fragment,s),u=!0)},o(s){Le(n.$$.fragment,s),u=!1},d(s){s&&E(t),Ae(n,s)}}}function Kt(l){let e,t=[],n=new Map,u,s=He(l[3]);const _=r=>r[6];for(let r=0;r<s.length;r+=1){let f=_t(l,s,r),o=_(f);n.set(o,t[r]=ft(o,f))}return{c(){e=g("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=v(r,"UL",{class:!0});var f=B(e);for(let o=0;o<t.length;o+=1)t[o].l(f);f.forEach(E),this.h()},h(){i(e,"class","width_md svelte-1gkqiw5")},m(r,f){te(r,e,f);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);u=!0},p(r,[f]){f&15&&(s=He(r[3]),yt(),t=it(t,f,_,1,r,s,n,e,kt,ft,null,_t),wt())},i(r){if(!u){for(let f=0;f<s.length;f+=1)Ee(t[f]);u=!0}},o(r){for(let f=0;f<t.length;f+=1)Le(t[f]);u=!1},d(r){r&&E(e);for(let f=0;f<t.length;f+=1)t[f].d()}}}function qt(l,e,t){let n,{items:u}=e,{item_selection:s}=e,{width:_}=e,{height:r}=e;function f(o){Lt.call(this,l,o)}return l.$$set=o=>{"items"in o&&t(4,u=o.items),"item_selection"in o&&t(0,s=o.item_selection),"width"in o&&t(1,_=o.width),"height"in o&&t(2,r=o.height)},l.$$.update=()=>{l.$$.dirty&16&&t(3,n=u.slice().reverse())},[s,_,r,n,u,f]}class Wt extends $e{constructor(e){super(),xe(this,e,qt,Kt,Ze,{items:4,item_selection:0,width:1,height:2})}}const{Map:Et}=Ct;function ct(l,e,t){const n=l.slice();return n[38]=e[t],n}function dt(l,e,t){const n=l.slice();return n[41]=e[t],n}function mt(l,e){let t,n,u;return n=new Ot({props:{item:e[41]}}),{key:l,first:null,c(){t=Re(),Me(n.$$.fragment),this.h()},l(s){t=Re(),Ce(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,_){te(s,t,_),je(n,s,_),u=!0},p(s,_){e=s;const r={};_[0]&8&&(r.item=e[41]),n.$set(r)},i(s){u||(Ee(n.$$.fragment,s),u=!0)},o(s){Le(n.$$.fragment,s),u=!1},d(s){s&&E(t),Ae(n,s)}}}function ht(l){let e,t,n,u,s;return{c(){e=vt("line"),this.h()},l(_){e=bt(_,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(e).forEach(E),this.h()},h(){i(e,"x1",t=l[13].at(-2)),i(e,"y1",n=l[13].at(-1)),i(e,"x2",l[1]),i(e,"y2",l[2]),i(e,"stroke",u=l[11].stroke??rt),i(e,"stroke-width",s=l[11].stroke_width??Fe)},m(_,r){te(_,e,r)},p(_,r){r[0]&8192&&t!==(t=_[13].at(-2))&&i(e,"x1",t),r[0]&8192&&n!==(n=_[13].at(-1))&&i(e,"y1",n),r[0]&2&&i(e,"x2",_[1]),r[0]&4&&i(e,"y2",_[2]),r[0]&2048&&u!==(u=_[11].stroke??rt)&&i(e,"stroke",u),r[0]&2048&&s!==(s=_[11].stroke_width??Fe)&&i(e,"stroke-width",s)},d(_){_&&E(e)}}}function Jt(l){var o,m;let e,t=[],n=new Et,u,s,_=He(l[3]);const r=p=>p[41];for(let p=0;p<_.length;p+=1){let d=dt(l,_,p),h=r(d);n.set(h,t[p]=mt(h,d))}let f=l[4]&&!l[0]&&l[6]==="polyline"&&((o=l[11])==null?void 0:o.type)==="polyline"&&((m=l[13])==null?void 0:m.length)&&ht(l);return{c(){e=vt("svg");for(let p=0;p<t.length;p+=1)t[p].c();u=Re(),f&&f.c(),this.h()},l(p){e=bt(p,"svg",{class:!0});var d=B(e);for(let h=0;h<t.length;h+=1)t[h].l(d);u=Re(),f&&f.l(d),d.forEach(E),this.h()},h(){i(e,"class","svelte-tev7zh")},m(p,d){te(p,e,d);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);a(e,u),f&&f.m(e,null),s=!0},p(p,d){var h,C;d[0]&8&&(_=He(p[3]),yt(),t=it(t,d,r,1,p,_,n,e,kt,mt,u,dt),wt()),p[4]&&!p[0]&&p[6]==="polyline"&&((h=p[11])==null?void 0:h.type)==="polyline"&&((C=p[13])!=null&&C.length)?f?f.p(p,d):(f=ht(p),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(p){if(!s){for(let d=0;d<_.length;d+=1)Ee(t[d]);s=!0}},o(p){for(let d=0;d<t.length;d+=1)Le(t[d]);s=!1},d(p){p&&E(e);for(let d=0;d<t.length;d+=1)t[d].d();f&&f.d()}}}function Qt(l){let e,t,n,u,s,_;function r(d){l[24](d)}function f(d){l[25](d)}function o(d){l[26](d)}function m(d){l[27](d)}let p={scale:l[5],cancel_on_leave:!1,$$slots:{default:[Jt]},$$scope:{ctx:l}};return l[4]!==void 0&&(p.pointing=l[4]),l[0]!==void 0&&(p.pointer_down=l[0]),l[1]!==void 0&&(p.pointer_x=l[1]),l[2]!==void 0&&(p.pointer_y=l[2]),e=new Dt({props:p}),ye.push(()=>ke(e,"pointing",r)),ye.push(()=>ke(e,"pointer_down",f)),ye.push(()=>ke(e,"pointer_x",o)),ye.push(()=>ke(e,"pointer_y",m)),{c(){Me(e.$$.fragment)},l(d){Ce(e.$$.fragment,d)},m(d,h){je(e,d,h),_=!0},p(d,h){const C={};h[0]&32&&(C.scale=d[5]),h[0]&10335|h[1]&8192&&(C.$$scope={dirty:h,ctx:d}),!t&&h[0]&16&&(t=!0,C.pointing=d[4],we(()=>t=!1)),!n&&h[0]&1&&(n=!0,C.pointer_down=d[0],we(()=>n=!1)),!u&&h[0]&2&&(u=!0,C.pointer_x=d[1],we(()=>u=!1)),!s&&h[0]&4&&(s=!0,C.pointer_y=d[2],we(()=>s=!1)),e.$set(C)},i(d){_||(Ee(e.$$.fragment,d),_=!0)},o(d){Le(e.$$.fragment,d),_=!1},d(d){Ae(e,d)}}}function pt(l,e){let t,n=e[38]+"",u,s,_,r;function f(){return e[29](e[38])}return{key:l,first:null,c(){t=g("button"),u=oe(n),s=P(),this.h()},l(o){t=v(o,"BUTTON",{});var m=B(t);u=_e(m,n),s=S(m),m.forEach(E),this.h()},h(){be(t,"selected",e[15]&&e[6]===e[38]),this.first=t},m(o,m){te(o,t,m),a(t,u),a(t,s),_||(r=X(t,"click",f),_=!0)},p(o,m){e=o,m[0]&512&&n!==(n=e[38]+"")&&qe(u,n),m[0]&33344&&be(t,"selected",e[15]&&e[6]===e[38])},d(o){o&&E(t),_=!1,r()}}}function Xt(l){let e,t,n,u,s,_,r,f=[],o=new Et,m,p,d,h,C,O,k=`${l[7]}px`,z=`${l[8]}px`,R,T,I;function V(b){l[28](b)}let Q={width:l[7],height:l[8],$$slots:{default:[Qt]},$$scope:{ctx:l}};l[5]!==void 0&&(Q.scale=l[5]),n=new Tt({props:Q}),ye.push(()=>ke(n,"scale",V));let A=He(l[9]);const q=b=>b[38];for(let b=0;b<A.length;b+=1){let y=ct(l,A,b),N=q(y);o.set(N,f[b]=pt(N,y))}return O=new Wt({props:{items:l[3],item_selection:l[10],width:l[7],height:l[8]}}),O.$on("action",l[31]),{c(){e=g("div"),t=g("div"),Me(n.$$.fragment),s=P(),_=g("div"),r=g("div");for(let b=0;b<f.length;b+=1)f[b].c();m=P(),p=g("button"),d=oe("clear all"),C=P(),Me(O.$$.fragment),this.h()},l(b){e=v(b,"DIV",{class:!0});var y=B(e);t=v(y,"DIV",{class:!0});var N=B(t);Ce(n.$$.fragment,N),N.forEach(E),s=S(y),_=v(y,"DIV",{class:!0});var K=B(_);r=v(K,"DIV",{class:!0});var Y=B(r);for(let U=0;U<f.length;U+=1)f[U].l(Y);Y.forEach(E),m=S(K),p=v(K,"BUTTON",{});var W=B(p);d=_e(W,"clear all"),W.forEach(E),K.forEach(E),C=S(y),Ce(O.$$.fragment,y),y.forEach(E),this.h()},h(){i(t,"class","content svelte-tev7zh"),i(r,"class","row"),p.disabled=h=!l[3].length,i(_,"class","controls svelte-tev7zh"),i(e,"class","mural svelte-tev7zh"),be(e,"active",l[0]),Ye(e,"--width",k),Ye(e,"--height",z)},m(b,y){te(b,e,y),a(e,t),je(n,t,null),a(e,s),a(e,_),a(_,r);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(r,null);a(_,m),a(_,p),a(p,d),a(e,C),je(O,e,null),R=!0,T||(I=X(p,"click",l[30]),T=!0)},p(b,y){const N={};y[0]&128&&(N.width=b[7]),y[0]&256&&(N.height=b[8]),y[0]&10367|y[1]&8192&&(N.$$scope={dirty:y,ctx:b}),!u&&y[0]&32&&(u=!0,N.scale=b[5],we(()=>u=!1)),n.$set(N),y[0]&37440&&(A=He(b[9]),f=it(f,y,q,1,b,A,o,r,jt,pt,null,ct)),(!R||y[0]&8&&h!==(h=!b[3].length))&&(p.disabled=h);const K={};y[0]&8&&(K.items=b[3]),y[0]&1024&&(K.item_selection=b[10]),y[0]&128&&(K.width=b[7]),y[0]&256&&(K.height=b[8]),O.$set(K),(!R||y[0]&1)&&be(e,"active",b[0]),y[0]&128&&k!==(k=`${b[7]}px`)&&Ye(e,"--width",k),y[0]&256&&z!==(z=`${b[8]}px`)&&Ye(e,"--height",z)},i(b){R||(Ee(n.$$.fragment,b),Ee(O.$$.fragment,b),R=!0)},o(b){Le(n.$$.fragment,b),Le(O.$$.fragment,b),R=!1},d(b){b&&E(e),Ae(n);for(let y=0;y<f.length;y+=1)f[y].d();Ae(O),T=!1,I()}}}function Zt(l,e,t){let n,u,s,_,r=ze,f=()=>(r(),r=Xe(u,c=>t(11,_=c)),u),o,m=ze,p=()=>(m(),m=Xe(G,c=>t(12,o=c)),G);l.$$.on_destroy.push(()=>r()),l.$$.on_destroy.push(()=>m());const d=gt();let{items:h=[]}=e,{width:C}=e,{height:O}=e,{pointing:k=void 0}=e,{pointer_down:z=void 0}=e,{pointer_x:R=void 0}=e,{pointer_y:T=void 0}=e,{scale:I=void 0}=e;const V=()=>{const c=U==="pen"||U==="polyline"?St():U==="circle"?Bt(R,T):null;return c||null};let{add_item:Q=(c,H)=>c.concat(H)}=e,{update_item:A=(c,H)=>Pt(c,H)}=e,{select_item_to_draw:q=c=>o||c.at(-1)}=e,{remove_item:b=(c,H)=>c.filter(de=>de!==H)}=e,{remove_all_items:y=c=>[]}=e;const N=new Map,K=c=>{switch(c.type){case"add_item":{const H=at(c.item);N.set(c.item.id,H),t(3,h=Q(h,H,c.item.id));break}case"update_item":{const H=N.get(c.id);if(!H)return;A(H,c.data);break}case"remove_item":{const H=N.get(c.id);if(!H)return;N.delete(c.id),t(3,h=b(h,H,c.id));break}case"remove_all_items":{N.clear(),t(3,h=y(h));break}}},Y=c=>{d("action",c),K(c)};let{brushes:W=["pen","polyline","circle"]}=e,{selected_brush:U=W[0]}=e,{item_selection:G=at(null)}=e;p();let x=!1;const le=()=>{if(x||(t(23,x=!0),o))return;const c=V();c&&(Y({type:"add_item",item:c}),U==="polyline"&&Qe(G,o=h.find(H=>nt(H).id===c.id)||null,o))},M=()=>{x&&t(23,x=!1)},D=(c,H)=>{const de=q(h);if(!de)return;const{id:Ue,type:De}=nt(de);De==="polyline"&&Y({type:"update_item",id:Ue,data:{append_points:[ut.x(c),ut.y(H)]}})};function w(c){k=c,t(4,k)}function ie(c){z=c,t(0,z)}function Z(c){R=c,t(1,R)}function ce(c){T=c,t(2,T)}function ae(c){I=c,t(5,I)}const Te=c=>{Qe(G,o=null,o),t(6,U=c)},ue=()=>{Qe(G,o=null,o),Y({type:"remove_all_items"})},fe=c=>Y(c.detail);return l.$$set=c=>{"items"in c&&t(3,h=c.items),"width"in c&&t(7,C=c.width),"height"in c&&t(8,O=c.height),"pointing"in c&&t(4,k=c.pointing),"pointer_down"in c&&t(0,z=c.pointer_down),"pointer_x"in c&&t(1,R=c.pointer_x),"pointer_y"in c&&t(2,T=c.pointer_y),"scale"in c&&t(5,I=c.scale),"add_item"in c&&t(17,Q=c.add_item),"update_item"in c&&t(18,A=c.update_item),"select_item_to_draw"in c&&t(19,q=c.select_item_to_draw),"remove_item"in c&&t(20,b=c.remove_item),"remove_all_items"in c&&t(21,y=c.remove_all_items),"brushes"in c&&t(9,W=c.brushes),"selected_brush"in c&&t(6,U=c.selected_brush),"item_selection"in c&&p(t(10,G=c.item_selection))},l.$$.update=()=>{l.$$.dirty[0]&1&&(z?le():z===!1&&M()),l.$$.dirty[0]&8388614&&x&&R!==void 0&&T!==void 0&&D(R,T),l.$$.dirty[0]&4096&&t(15,n=o===null),l.$$.dirty[0]&4096&&f(t(14,u=o)),l.$$.dirty[0]&2048&&t(13,s=(_==null?void 0:_.type)==="polyline"?tt(_):void 0)},[z,R,T,h,k,I,U,C,O,W,G,_,o,s,u,n,Y,Q,A,q,b,y,K,x,w,ie,Z,ce,ae,Te,ue,fe]}class $t extends $e{constructor(e){super(),xe(this,e,Zt,Xt,Ze,{items:3,width:7,height:8,pointing:4,pointer_down:0,pointer_x:1,pointer_y:2,scale:5,add_item:17,update_item:18,select_item_to_draw:19,remove_item:20,remove_all_items:21,handle_action:22,brushes:9,selected_brush:6,item_selection:10},null,[-1,-1])}get handle_action(){return this.$$.ctx[22]}}function xt(l){let e,t,n,u,s,_,r,f,o,m,p,d,h,C,O,k,z="<code>--mural_bg</code>",R,T,I,V,Q,A,q,b=ve(l[0],1)+"",y,N,K,Y,W,U,G,x,le,M=ve(l[1],1)+"",D,w,ie,Z,ce,ae,Te,ue,fe,c,H;function de(L){l[10](L)}function Ue(L){l[11](L)}function De(L){l[12](L)}function pe(L){l[13](L)}function We(L){l[14](L)}let ge={width:l[0],height:l[1]};return l[7]!==void 0&&(ge.items=l[7]),l[3]!==void 0&&(ge.scale=l[3]),l[4]!==void 0&&(ge.pointer_down=l[4]),l[5]!==void 0&&(ge.pointer_x=l[5]),l[6]!==void 0&&(ge.pointer_y=l[6]),t=new $t({props:ge}),ye.push(()=>ke(t,"items",de)),ye.push(()=>ke(t,"scale",Ue)),ye.push(()=>ke(t,"pointer_down",De)),ye.push(()=>ke(t,"pointer_x",pe)),ye.push(()=>ke(t,"pointer_y",We)),m=new Nt({props:{content:`<Mural
	width="${l[0]}px"
	height="${l[1]}px"
	scale={${l[3]&&ve(l[3],3)}}
	pointer_x={${l[5]&&ve(l[5],1)}}
	pointer_y={${l[6]&&ve(l[6],1)}}
	pointer_down={${l[4]}}
>
	<Mural_Item_List
		items={[ ... ]}
	/>
</Mural>`}}),{c(){e=g("div"),Me(t.$$.fragment),f=P(),o=g("section"),Me(m.$$.fragment),p=P(),d=g("section"),h=g("form"),C=g("fieldset"),O=g("label"),k=g("div"),k.innerHTML=z,R=P(),T=g("input"),I=P(),V=g("label"),Q=g("div"),A=oe("width "),q=g("code"),y=oe(b),N=oe("px"),K=P(),Y=g("input"),W=P(),U=g("label"),G=g("div"),x=oe("height "),le=g("code"),D=oe(M),w=oe("px"),ie=P(),Z=g("input"),ce=P(),ae=g("button"),Te=oe("reset settings"),this.h()},l(L){e=v(L,"DIV",{class:!0});var J=B(e);Ce(t.$$.fragment,J),f=S(J),o=v(J,"SECTION",{class:!0});var ne=B(o);Ce(m.$$.fragment,ne),ne.forEach(E),p=S(J),d=v(J,"SECTION",{class:!0});var re=B(d);h=v(re,"FORM",{});var ee=B(h);C=v(ee,"FIELDSET",{});var me=B(C);O=v(me,"LABEL",{});var he=B(O);k=v(he,"DIV",{class:!0,"data-svelte-h":!0}),Ne(k)!=="svelte-iv5je9"&&(k.innerHTML=z),R=S(he),T=v(he,"INPUT",{type:!0}),he.forEach(E),I=S(me),V=v(me,"LABEL",{});var $=B(V);Q=v($,"DIV",{class:!0});var j=B(Q);A=_e(j,"width "),q=v(j,"CODE",{});var F=B(q);y=_e(F,b),N=_e(F,"px"),F.forEach(E),j.forEach(E),K=S($),Y=v($,"INPUT",{type:!0,min:!0,max:!0}),$.forEach(E),W=S(me),U=v(me,"LABEL",{});var Pe=B(U);G=v(Pe,"DIV",{class:!0});var se=B(G);x=_e(se,"height "),le=v(se,"CODE",{});var Se=B(le);D=_e(Se,M),w=_e(Se,"px"),Se.forEach(E),se.forEach(E),ie=S(Pe),Z=v(Pe,"INPUT",{type:!0,min:!0,max:!0}),Pe.forEach(E),ce=S(me),ae=v(me,"BUTTON",{type:!0,class:!0});var Ie=B(ae);Te=_e(Ie,"reset settings"),Ie.forEach(E),me.forEach(E),ee.forEach(E),re.forEach(E),J.forEach(E),this.h()},h(){i(o,"class","svelte-17r4wzu"),i(k,"class","title"),i(T,"type","color"),i(Q,"class","title"),i(Y,"type","range"),i(Y,"min",0),i(Y,"max",Ge*2),i(G,"class","title"),i(Z,"type","range"),i(Z,"min",0),i(Z,"max",Ke),i(ae,"type","button"),ae.disabled=ue=l[4]===void 0&&l[5]===void 0&&l[6]===void 0&&l[0]===Ge&&l[1]===Ke&&l[2]===void 0,i(ae,"class","svelte-17r4wzu"),i(d,"class","markup svelte-17r4wzu"),i(e,"class","box width_full"),Ye(e,"--mural_bg",ll)},m(L,J){te(L,e,J),je(t,e,null),a(e,f),a(e,o),je(m,o,null),a(e,p),a(e,d),a(d,h),a(h,C),a(C,O),a(O,k),a(O,R),a(O,T),Ve(T,l[2]),a(C,I),a(C,V),a(V,Q),a(Q,A),a(Q,q),a(q,y),a(q,N),a(V,K),a(V,Y),Ve(Y,l[0]),a(C,W),a(C,U),a(U,G),a(G,x),a(G,le),a(le,D),a(le,w),a(U,ie),a(U,Z),Ve(Z,l[1]),a(C,ce),a(C,ae),a(ae,Te),fe=!0,c||(H=[X(T,"input",l[15]),X(Y,"change",l[16]),X(Y,"input",l[16]),X(Z,"change",l[17]),X(Z,"input",l[17]),X(ae,"click",l[9])],c=!0)},p(L,J){const ne={};J&1&&(ne.width=L[0]),J&2&&(ne.height=L[1]),!n&&J&128&&(n=!0,ne.items=L[7],we(()=>n=!1)),!u&&J&8&&(u=!0,ne.scale=L[3],we(()=>u=!1)),!s&&J&16&&(s=!0,ne.pointer_down=L[4],we(()=>s=!1)),!_&&J&32&&(_=!0,ne.pointer_x=L[5],we(()=>_=!1)),!r&&J&64&&(r=!0,ne.pointer_y=L[6],we(()=>r=!1)),t.$set(ne);const re={};J&123&&(re.content=`<Mural
	width="${L[0]}px"
	height="${L[1]}px"
	scale={${L[3]&&ve(L[3],3)}}
	pointer_x={${L[5]&&ve(L[5],1)}}
	pointer_y={${L[6]&&ve(L[6],1)}}
	pointer_down={${L[4]}}
>
	<Mural_Item_List
		items={[ ... ]}
	/>
</Mural>`),m.$set(re),J&4&&Ve(T,L[2]),(!fe||J&1)&&b!==(b=ve(L[0],1)+"")&&qe(y,b),J&1&&Ve(Y,L[0]),(!fe||J&2)&&M!==(M=ve(L[1],1)+"")&&qe(D,M),J&2&&Ve(Z,L[1]),(!fe||J&119&&ue!==(ue=L[4]===void 0&&L[5]===void 0&&L[6]===void 0&&L[0]===Ge&&L[1]===Ke&&L[2]===void 0))&&(ae.disabled=ue)},i(L){fe||(Ee(t.$$.fragment,L),Ee(m.$$.fragment,L),fe=!0)},o(L){Le(t.$$.fragment,L),Le(m.$$.fragment,L),fe=!1},d(L){L&&E(e),Ae(t),Ae(m),c=!1,lt(H)}}}function el(l){let e,t;return e=new It({props:{tome:l[8],$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){Me(e.$$.fragment)},l(n){Ce(e.$$.fragment,n)},m(n,u){je(e,n,u),t=!0},p(n,[u]){const s={};u&262399&&(s.$$scope={dirty:u,ctx:n}),e.$set(s)},i(n){t||(Ee(e.$$.fragment,n),t=!0)},o(n){Le(e.$$.fragment,n),t=!1},d(n){Ae(e,n)}}}const tl="Mural",Ge=750,Ke=512,ll="var(--bg)";function il(l,e,t){const n=Mt(tl);let u=Ge,s=Ke,_,r,f,o,m;const p=()=>{t(4,f=void 0),t(5,o=void 0),t(6,m=void 0),t(0,u=Ge),t(1,s=Ke),t(2,_=void 0)};let d=[];function h(V){d=V,t(7,d)}function C(V){r=V,t(3,r)}function O(V){f=V,t(4,f)}function k(V){o=V,t(5,o)}function z(V){m=V,t(6,m)}function R(){_=this.value,t(2,_)}function T(){u=st(this.value),t(0,u)}function I(){s=st(this.value),t(1,s)}return[u,s,_,r,f,o,m,d,n,p,h,C,O,k,z,R,T,I]}class cl extends $e{constructor(e){super(),xe(this,e,il,el,Ze,{})}}export{cl as component};
