import{n as Fe,e as k,s as V,t as ee,c as E,a as B,d as v,f as z,b as te,m as Ee,o as f,_ as ue,i as K,g as u,F as $,h as Te,j as Se,r as Ve,a7 as _t,G as Xe,a9 as Ue,C as De,z as Ae,ac as yt,E as oe,ad as fe,aa as $e,H as dt,I as mt,ae as Le,af as xe}from"../chunks/scheduler.a18b0e8d.js";import{S as ze,i as He,g as ht,e as pt,a as _e,t as de,c as be,b as ge,m as Ie,d as ye,h as ce}from"../chunks/index.a1abe0a0.js";import{r as ae,S as kt,T as Et,C as wt}from"../chunks/Scaled.f26c42db.js";import{a as Lt}from"../chunks/tome.5b802c2f.js";import{g as Dt}from"../chunks/globals.7f7f1b26.js";import{e as Me,u as Je,o as vt,d as Tt}from"../chunks/each.de273824.js";import{w as et}from"../chunks/index.957425c2.js";import{D as St,a as At,t as qe,b as Oe,S as Mt,u as Nt,p as tt,c as Ct,d as jt,M as Bt,e as lt}from"../chunks/MuralItem.9f1e58ca.js";function Yt(l){let t;return{c(){t=ee("👁")},l(e){t=te(e,"👁")},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function Pt(l){let t;return{c(){t=ee("•")},l(e){t=te(e,"•")},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function Ut(l){let t,e,i,d,n,_="stroke-width",a,s,o=qe(l[4]).length+"",m,h,c,p,T,P="points",Y,A,y,C,W,U,F,X,O,b,w,g,D,I,J,L,N=(!l[3]||l[7]==="none")&&it();return{c(){t=k("label"),e=k("input"),d=V(),n=k("small"),n.textContent=_,a=V(),s=k("span"),m=ee(o),h=V(),c=k("br"),p=V(),T=k("small"),T.textContent=P,Y=V(),A=k("div"),y=k("div"),C=k("input"),U=V(),F=k("label"),X=k("input"),w=V(),g=k("small"),N&&N.c(),D=ee("fill"),this.h()},l(S){t=E(S,"LABEL",{class:!0});var H=B(t);e=E(H,"INPUT",{class:!0,type:!0}),d=z(H),n=E(H,"SMALL",{"data-svelte-h":!0}),Ee(n)!=="svelte-1jo13fj"&&(n.textContent=_),H.forEach(v),a=z(S),s=E(S,"SPAN",{class:!0});var x=B(s);m=te(x,o),h=z(x),c=E(x,"BR",{}),p=z(x),T=E(x,"SMALL",{"data-svelte-h":!0}),Ee(T)!=="svelte-les35l"&&(T.textContent=P),x.forEach(v),Y=z(S),A=E(S,"DIV",{class:!0});var ie=B(A);y=E(ie,"DIV",{class:!0});var le=B(y);C=E(le,"INPUT",{type:!0,title:!0,class:!0}),le.forEach(v),U=z(ie),F=E(ie,"LABEL",{title:!0,class:!0});var ne=B(F);X=E(ne,"INPUT",{class:!0,type:!0}),w=z(ne),g=E(ne,"SMALL",{});var Z=B(g);N&&N.l(Z),D=te(Z,"fill"),Z.forEach(v),ne.forEach(v),ie.forEach(v),this.h()},h(){f(e,"class","item-input svelte-lx0erj"),f(e,"type","number"),e.value=i=l[4].strokeWidth??Oe,f(t,"class","svelte-lx0erj"),f(s,"class","content svelte-lx0erj"),f(C,"type","checkbox"),C.checked=l[3],f(C,"title",W="the "+l[4].type+"'s fill is "+(l[4].enableFill?"enabled":"disabled")),f(C,"class","svelte-lx0erj"),f(y,"class","togglable-checkbox-wrapper svelte-lx0erj"),f(X,"class","item-input svelte-lx0erj"),f(X,"type","color"),X.disabled=O=!l[3],X.value=b=l[7]==="none"?"#000000":l[7],f(F,"title",I="modify the "+l[4].type+"'s fill color"),f(F,"class","svelte-lx0erj"),f(A,"class","togglable svelte-lx0erj")},m(S,H){K(S,t,H),u(t,e),u(t,d),u(t,n),K(S,a,H),K(S,s,H),u(s,m),u(s,h),u(s,c),u(s,p),u(s,T),K(S,Y,H),K(S,A,H),u(A,y),u(y,C),u(A,U),u(A,F),u(F,X),u(F,w),u(F,g),N&&N.m(g,null),u(g,D),J||(L=[$(e,"input",l[19]),$(C,"input",l[20]),$(X,"input",l[21])],J=!0)},p(S,H){H&16&&i!==(i=S[4].strokeWidth??Oe)&&e.value!==i&&(e.value=i),H&16&&o!==(o=qe(S[4]).length+"")&&Te(m,o),H&8&&(C.checked=S[3]),H&16&&W!==(W="the "+S[4].type+"'s fill is "+(S[4].enableFill?"enabled":"disabled"))&&f(C,"title",W),H&8&&O!==(O=!S[3])&&(X.disabled=O),H&128&&b!==(b=S[7]==="none"?"#000000":S[7])&&(X.value=b),!S[3]||S[7]==="none"?N||(N=it(),N.c(),N.m(g,D)):N&&(N.d(1),N=null),H&16&&I!==(I="modify the "+S[4].type+"'s fill color")&&f(F,"title",I)},d(S){S&&(v(t),v(a),v(s),v(Y),v(A)),N&&N.d(),J=!1,Ve(L)}}}function Xt(l){let t,e,i,d,n,_="x",a,s,o,m,h,c,p,T="y",P,Y,A,y,C,W,U,F="radius",X,O,b,w,g,D,I,J,L,N,S,H,x,ie,le,ne,Z,he,G=(!l[3]||l[7]==="none")&&nt();return{c(){t=k("label"),e=k("input"),d=V(),n=k("small"),n.textContent=_,s=V(),o=k("label"),m=k("input"),c=V(),p=k("small"),p.textContent=T,Y=V(),A=k("label"),y=k("input"),W=V(),U=k("small"),U.textContent=F,O=V(),b=k("div"),w=V(),g=k("div"),D=k("div"),I=k("input"),L=V(),N=k("label"),S=k("input"),ie=V(),le=k("small"),G&&G.c(),ne=ee("fill"),this.h()},l(j){t=E(j,"LABEL",{title:!0,class:!0});var R=B(t);e=E(R,"INPUT",{class:!0,type:!0}),d=z(R),n=E(R,"SMALL",{"data-svelte-h":!0}),Ee(n)!=="svelte-il6oia"&&(n.textContent=_),R.forEach(v),s=z(j),o=E(j,"LABEL",{title:!0,class:!0});var se=B(o);m=E(se,"INPUT",{class:!0,type:!0}),c=z(se),p=E(se,"SMALL",{"data-svelte-h":!0}),Ee(p)!=="svelte-urgvm9"&&(p.textContent=T),se.forEach(v),Y=z(j),A=E(j,"LABEL",{title:!0,class:!0});var r=B(A);y=E(r,"INPUT",{class:!0,type:!0}),W=z(r),U=E(r,"SMALL",{"data-svelte-h":!0}),Ee(U)!=="svelte-1uimsee"&&(U.textContent=F),r.forEach(v),O=z(j),b=E(j,"DIV",{}),B(b).forEach(v),w=z(j),g=E(j,"DIV",{class:!0});var q=B(g);D=E(q,"DIV",{class:!0});var me=B(D);I=E(me,"INPUT",{type:!0,title:!0,class:!0}),me.forEach(v),L=z(q),N=E(q,"LABEL",{class:!0});var pe=B(N);S=E(pe,"INPUT",{class:!0,type:!0}),ie=z(pe),le=E(pe,"SMALL",{});var ke=B(le);G&&G.l(ke),ne=te(ke,"fill"),ke.forEach(v),pe.forEach(v),q.forEach(v),this.h()},h(){f(e,"class","item-input svelte-lx0erj"),f(e,"type","number"),e.value=i=l[4].cx,f(t,"title",a="modify the "+l[4].type+"'s x position"),f(t,"class","svelte-lx0erj"),f(m,"class","item-input svelte-lx0erj"),f(m,"type","number"),m.value=h=l[4].cy,f(o,"title",P="modify the "+l[4].type+"'s y position"),f(o,"class","svelte-lx0erj"),f(y,"class","item-input svelte-lx0erj"),f(y,"type","number"),y.value=C=l[4].r,f(A,"title",X="modify the "+l[4].type+"'s radius"),f(A,"class","svelte-lx0erj"),De(b,"flex","1"),f(I,"type","checkbox"),I.checked=l[3],f(I,"title",J="the "+l[4].type+"'s fill is "+(l[4].enableFill?"enabled":"disabled")),f(I,"class","svelte-lx0erj"),f(D,"class","togglable-checkbox-wrapper svelte-lx0erj"),f(S,"class","item-input svelte-lx0erj"),f(S,"type","color"),S.disabled=H=!l[3],S.value=x=l[7]==="none"?"#000000":l[7],f(N,"class","svelte-lx0erj"),f(g,"class","togglable svelte-lx0erj")},m(j,R){K(j,t,R),u(t,e),u(t,d),u(t,n),K(j,s,R),K(j,o,R),u(o,m),u(o,c),u(o,p),K(j,Y,R),K(j,A,R),u(A,y),u(A,W),u(A,U),K(j,O,R),K(j,b,R),K(j,w,R),K(j,g,R),u(g,D),u(D,I),u(g,L),u(g,N),u(N,S),u(N,ie),u(N,le),G&&G.m(le,null),u(le,ne),Z||(he=[$(e,"input",l[14]),$(m,"input",l[15]),$(y,"input",l[16]),$(I,"input",l[17]),$(S,"input",l[18])],Z=!0)},p(j,R){R&16&&i!==(i=j[4].cx)&&e.value!==i&&(e.value=i),R&16&&a!==(a="modify the "+j[4].type+"'s x position")&&f(t,"title",a),R&16&&h!==(h=j[4].cy)&&m.value!==h&&(m.value=h),R&16&&P!==(P="modify the "+j[4].type+"'s y position")&&f(o,"title",P),R&16&&C!==(C=j[4].r)&&y.value!==C&&(y.value=C),R&16&&X!==(X="modify the "+j[4].type+"'s radius")&&f(A,"title",X),R&8&&(I.checked=j[3]),R&16&&J!==(J="the "+j[4].type+"'s fill is "+(j[4].enableFill?"enabled":"disabled"))&&f(I,"title",J),R&8&&H!==(H=!j[3])&&(S.disabled=H),R&128&&x!==(x=j[7]==="none"?"#000000":j[7])&&(S.value=x),!j[3]||j[7]==="none"?G||(G=nt(),G.c(),G.m(le,ne)):G&&(G.d(1),G=null)},d(j){j&&(v(t),v(s),v(o),v(Y),v(A),v(O),v(b),v(w),v(g)),G&&G.d(),Z=!1,Ve(he)}}}function it(l){let t;return{c(){t=ee(`no
					`)},l(e){t=te(e,`no
					`)},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function nt(l){let t;return{c(){t=ee(`no
					`)},l(e){t=te(e,`no
					`)},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function Ot(l){let t,e,i,d,n=l[4].type+"",_,a,s,o,m,h,c,p,T=ae(l[6],2)+"",P,Y,A,y,C="🗙",W,U;function F(D,I){return D[8]?Pt:Yt}let X=F(l),O=X(l);function b(D,I){if(D[4].type==="circle")return Xt;if(D[4].type==="polyline")return Ut}let w=b(l),g=w&&w(l);return{c(){t=k("li"),e=k("button"),O.c(),i=V(),d=k("div"),_=ee(n),a=V(),s=k("label"),o=k("input"),h=V(),c=k("small"),p=ee("opacity: "),P=ee(T),Y=V(),g&&g.c(),A=V(),y=k("button"),y.textContent=C,this.h()},l(D){t=E(D,"LI",{class:!0,"aria-hidden":!0});var I=B(t);e=E(I,"BUTTON",{class:!0});var J=B(e);O.l(J),J.forEach(v),i=z(I),d=E(I,"DIV",{class:!0});var L=B(d);_=te(L,n),L.forEach(v),a=z(I),s=E(I,"LABEL",{class:!0});var N=B(s);o=E(N,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),h=z(N),c=E(N,"SMALL",{});var S=B(c);p=te(S,"opacity: "),P=te(S,T),S.forEach(v),N.forEach(v),Y=z(I),g&&g.l(I),A=z(I),y=E(I,"BUTTON",{class:!0,"data-svelte-h":!0}),Ee(y)!=="svelte-g330tp"&&(y.textContent=C),I.forEach(v),this.h()},h(){f(e,"class","icon_button plain"),ue(e,"selected",l[8]),f(d,"class","type svelte-lx0erj"),f(o,"class","item-input svelte-lx0erj"),f(o,"type","range"),f(o,"min",0),f(o,"max",1),f(o,"step",.01),o.value=l[6],f(o,"title",m="modify the "+l[4].type+"'s opacity"),f(s,"class","svelte-lx0erj"),f(y,"class","icon_button plain"),f(t,"class","mural-item-list-item selectable svelte-lx0erj"),f(t,"aria-hidden",""),ue(t,"hidden",l[8]),ue(t,"selected",l[9])},m(D,I){K(D,t,I),u(t,e),O.m(e,null),u(t,i),u(t,d),u(d,_),u(t,a),u(t,s),u(s,o),u(s,h),u(s,c),u(c,p),u(c,P),u(t,Y),g&&g.m(t,null),u(t,A),u(t,y),W||(U=[$(e,"click",l[12]),$(o,"input",l[13]),$(y,"click",l[22]),$(t,"click",l[23])],W=!0)},p(D,[I]){X!==(X=F(D))&&(O.d(1),O=X(D),O&&(O.c(),O.m(e,null))),I&256&&ue(e,"selected",D[8]),I&16&&n!==(n=D[4].type+"")&&Te(_,n),I&64&&(o.value=D[6]),I&16&&m!==(m="modify the "+D[4].type+"'s opacity")&&f(o,"title",m),I&64&&T!==(T=ae(D[6],2)+"")&&Te(P,T),w===(w=b(D))&&g?g.p(D,I):(g&&g.d(1),g=w&&w(D),g&&(g.c(),g.m(t,A))),I&256&&ue(t,"hidden",D[8]),I&512&&ue(t,"selected",D[9])},i:Se,o:Se,d(D){D&&v(t),O.d(),g&&g.d(),W=!1,Ve(U)}}}function Ft(l,t,e){let i,d,n,_,a,s,o,m,h=Se,c=()=>(h(),h=Xe(Y,L=>e(4,m=L)),Y),p,T=Se,P=()=>(T(),T=Xe(A,L=>e(5,p=L)),A);l.$$.on_destroy.push(()=>h()),l.$$.on_destroy.push(()=>T());let{item:Y}=t;c();let{itemSelection:A}=t;P();const y=_t(),C=()=>y("action",{type:"updateItem",id:m.id,data:{hidden:!m.hidden}}),W=L=>y("action",{type:"updateItem",id:m.id,data:{opacity:Number(L.currentTarget.value)}}),U=L=>y("action",{type:"updateItem",id:m.id,data:{cx:Number(L.currentTarget.value)}}),F=L=>y("action",{type:"updateItem",id:m.id,data:{cy:Number(L.currentTarget.value)}}),X=L=>y("action",{type:"updateItem",id:m.id,data:{r:Number(L.currentTarget.value)}}),O=L=>y("action",{type:"updateItem",id:m.id,data:{enableFill:L.currentTarget.checked}}),b=L=>y("action",{type:"updateItem",id:m.id,data:{fill:L.currentTarget.value}}),w=L=>y("action",{type:"updateItem",id:m.id,data:{strokeWidth:Number(L.currentTarget.value)}}),g=L=>y("action",{type:"updateItem",id:m.id,data:{enableFill:L.currentTarget.checked,fill:n??(L.currentTarget.checked?At:void 0)}}),D=L=>y("action",{type:"updateItem",id:m.id,data:{fill:L.currentTarget.value}}),I=()=>y("action",{type:"removeItem",id:m.id}),J=()=>Ue(A,p=Y,p);return l.$$set=L=>{"item"in L&&c(e(0,Y=L.item)),"itemSelection"in L&&P(e(1,A=L.itemSelection))},l.$$.update=()=>{l.$$.dirty&33&&e(9,i=p===Y),l.$$.dirty&16&&e(3,{enableFill:d,fill:n,hidden:_,opacity:a}=m,d,(e(2,n),e(4,m)),(e(8,_),e(4,m)),(e(11,a),e(4,m))),l.$$.dirty&12&&e(7,s=d?n??St:void 0),l.$$.dirty&2048&&e(6,o=a??1)},[Y,A,n,d,m,p,o,s,_,i,y,a,C,W,U,F,X,O,b,w,g,D,I,J]}class Vt extends ze{constructor(t){super(),He(this,t,Ft,Ot,Fe,{item:0,itemSelection:1})}}function st(l,t,e){const i=l.slice();return i[4]=t[e],i}function at(l,t){let e,i,d;return i=new Vt({props:{item:t[4],itemSelection:t[0]}}),i.$on("action",t[3]),{key:l,first:null,c(){e=Ae(),be(i.$$.fragment),this.h()},l(n){e=Ae(),ge(i.$$.fragment,n),this.h()},h(){this.first=e},m(n,_){K(n,e,_),Ie(i,n,_),d=!0},p(n,_){t=n;const a={};_&2&&(a.item=t[4]),_&1&&(a.itemSelection=t[0]),i.$set(a)},i(n){d||(_e(i.$$.fragment,n),d=!0)},o(n){de(i.$$.fragment,n),d=!1},d(n){n&&v(e),ye(i,n)}}}function zt(l){let t,e=[],i=new Map,d,n=Me(l[1]);const _=a=>a[4];for(let a=0;a<n.length;a+=1){let s=st(l,n,a),o=_(s);i.set(o,e[a]=at(o,s))}return{c(){t=k("ul");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=E(a,"UL",{class:!0});var s=B(t);for(let o=0;o<e.length;o+=1)e[o].l(s);s.forEach(v),this.h()},h(){f(t,"class","width_md svelte-r3vzvu")},m(a,s){K(a,t,s);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);d=!0},p(a,[s]){s&3&&(n=Me(a[1]),ht(),e=Je(e,s,_,1,a,n,i,t,vt,at,null,st),pt())},i(a){if(!d){for(let s=0;s<n.length;s+=1)_e(e[s]);d=!0}},o(a){for(let s=0;s<e.length;s+=1)de(e[s]);d=!1},d(a){a&&v(t);for(let s=0;s<e.length;s+=1)e[s].d()}}}function Ht(l,t,e){let i,{items:d}=t,{itemSelection:n}=t;function _(a){yt.call(this,l,a)}return l.$$set=a=>{"items"in a&&e(2,d=a.items),"itemSelection"in a&&e(0,n=a.itemSelection)},l.$$.update=()=>{l.$$.dirty&4&&e(1,i=d.slice().reverse())},[n,i,d,_]}class Rt extends ze{constructor(t){super(),He(this,t,Ht,zt,Fe,{items:2,itemSelection:0})}}const{Map:bt}=Dt;function rt(l,t,e){const i=l.slice();return i[38]=t[e],i}function ut(l,t,e){const i=l.slice();return i[41]=t[e],i}function ot(l,t){let e,i,d;return i=new Bt({props:{item:t[41]}}),{key:l,first:null,c(){e=Ae(),be(i.$$.fragment),this.h()},l(n){e=Ae(),ge(i.$$.fragment,n),this.h()},h(){this.first=e},m(n,_){K(n,e,_),Ie(i,n,_),d=!0},p(n,_){t=n;const a={};_[0]&8&&(a.item=t[41]),i.$set(a)},i(n){d||(_e(i.$$.fragment,n),d=!0)},o(n){de(i.$$.fragment,n),d=!1},d(n){n&&v(e),ye(i,n)}}}function ft(l){let t,e,i,d,n;return{c(){t=dt("line"),this.h()},l(_){t=mt(_,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(t).forEach(v),this.h()},h(){f(t,"x1",e=l[13].at(-2)),f(t,"y1",i=l[13].at(-1)),f(t,"x2",l[1]),f(t,"y2",l[2]),f(t,"stroke",d=l[11].stroke??lt),f(t,"stroke-width",n=l[11].strokeWidth??Oe)},m(_,a){K(_,t,a)},p(_,a){a[0]&8192&&e!==(e=_[13].at(-2))&&f(t,"x1",e),a[0]&8192&&i!==(i=_[13].at(-1))&&f(t,"y1",i),a[0]&2&&f(t,"x2",_[1]),a[0]&4&&f(t,"y2",_[2]),a[0]&2048&&d!==(d=_[11].stroke??lt)&&f(t,"stroke",d),a[0]&2048&&n!==(n=_[11].strokeWidth??Oe)&&f(t,"stroke-width",n)},d(_){_&&v(t)}}}function Wt(l){var o,m;let t,e=[],i=new bt,d,n,_=Me(l[3]);const a=h=>h[41];for(let h=0;h<_.length;h+=1){let c=ut(l,_,h),p=a(c);i.set(p,e[h]=ot(p,c))}let s=l[4]&&!l[0]&&l[6]==="polyline"&&((o=l[11])==null?void 0:o.type)==="polyline"&&((m=l[13])==null?void 0:m.length)&&ft(l);return{c(){t=dt("svg");for(let h=0;h<e.length;h+=1)e[h].c();d=Ae(),s&&s.c(),this.h()},l(h){t=mt(h,"svg",{class:!0});var c=B(t);for(let p=0;p<e.length;p+=1)e[p].l(c);d=Ae(),s&&s.l(c),c.forEach(v),this.h()},h(){f(t,"class","svelte-tev7zh")},m(h,c){K(h,t,c);for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(t,null);u(t,d),s&&s.m(t,null),n=!0},p(h,c){var p,T;c[0]&8&&(_=Me(h[3]),ht(),e=Je(e,c,a,1,h,_,i,t,vt,ot,d,ut),pt()),h[4]&&!h[0]&&h[6]==="polyline"&&((p=h[11])==null?void 0:p.type)==="polyline"&&((T=h[13])!=null&&T.length)?s?s.p(h,c):(s=ft(h),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},i(h){if(!n){for(let c=0;c<_.length;c+=1)_e(e[c]);n=!0}},o(h){for(let c=0;c<e.length;c+=1)de(e[c]);n=!1},d(h){h&&v(t);for(let c=0;c<e.length;c+=1)e[c].d();s&&s.d()}}}function Gt(l){let t,e,i,d,n,_;function a(c){l[24](c)}function s(c){l[25](c)}function o(c){l[26](c)}function m(c){l[27](c)}let h={scale:l[5],cancelOnLeave:!1,$$slots:{default:[Wt]},$$scope:{ctx:l}};return l[4]!==void 0&&(h.pointing=l[4]),l[0]!==void 0&&(h.pointerDown=l[0]),l[1]!==void 0&&(h.pointerX=l[1]),l[2]!==void 0&&(h.pointerY=l[2]),t=new Mt({props:h}),oe.push(()=>ce(t,"pointing",a)),oe.push(()=>ce(t,"pointerDown",s)),oe.push(()=>ce(t,"pointerX",o)),oe.push(()=>ce(t,"pointerY",m)),{c(){be(t.$$.fragment)},l(c){ge(t.$$.fragment,c)},m(c,p){Ie(t,c,p),_=!0},p(c,p){const T={};p[0]&32&&(T.scale=c[5]),p[0]&10335|p[1]&8192&&(T.$$scope={dirty:p,ctx:c}),!e&&p[0]&16&&(e=!0,T.pointing=c[4],fe(()=>e=!1)),!i&&p[0]&1&&(i=!0,T.pointerDown=c[0],fe(()=>i=!1)),!d&&p[0]&2&&(d=!0,T.pointerX=c[1],fe(()=>d=!1)),!n&&p[0]&4&&(n=!0,T.pointerY=c[2],fe(()=>n=!1)),t.$set(T)},i(c){_||(_e(t.$$.fragment,c),_=!0)},o(c){de(t.$$.fragment,c),_=!1},d(c){ye(t,c)}}}function ct(l,t){let e,i=t[38]+"",d,n,_,a;function s(){return t[29](t[38])}return{key:l,first:null,c(){e=k("button"),d=ee(i),n=V(),this.h()},l(o){e=E(o,"BUTTON",{});var m=B(e);d=te(m,i),n=z(m),m.forEach(v),this.h()},h(){ue(e,"selected",t[15]&&t[6]===t[38]),this.first=e},m(o,m){K(o,e,m),u(e,d),u(e,n),_||(a=$(e,"click",s),_=!0)},p(o,m){t=o,m[0]&512&&i!==(i=t[38]+"")&&Te(d,i),m[0]&33344&&ue(e,"selected",t[15]&&t[6]===t[38])},d(o){o&&v(e),_=!1,a()}}}function Kt(l){let t,e,i,d,n,_,a,s=[],o=new bt,m,h,c,p,T,P,Y=`${l[7]}px`,A=`${l[8]}px`,y,C,W;function U(b){l[28](b)}let F={width:l[7],height:l[8],$$slots:{default:[Gt]},$$scope:{ctx:l}};l[5]!==void 0&&(F.scale=l[5]),i=new kt({props:F}),oe.push(()=>ce(i,"scale",U));let X=Me(l[9]);const O=b=>b[38];for(let b=0;b<X.length;b+=1){let w=rt(l,X,b),g=O(w);o.set(g,s[b]=ct(g,w))}return P=new Rt({props:{items:l[3],itemSelection:l[10]}}),P.$on("action",l[31]),{c(){t=k("div"),e=k("div"),be(i.$$.fragment),n=V(),_=k("div"),a=k("div");for(let b=0;b<s.length;b+=1)s[b].c();m=V(),h=k("button"),c=ee("clear all"),T=V(),be(P.$$.fragment),this.h()},l(b){t=E(b,"DIV",{class:!0});var w=B(t);e=E(w,"DIV",{class:!0});var g=B(e);ge(i.$$.fragment,g),g.forEach(v),n=z(w),_=E(w,"DIV",{class:!0});var D=B(_);a=E(D,"DIV",{class:!0});var I=B(a);for(let L=0;L<s.length;L+=1)s[L].l(I);I.forEach(v),m=z(D),h=E(D,"BUTTON",{});var J=B(h);c=te(J,"clear all"),J.forEach(v),D.forEach(v),T=z(w),ge(P.$$.fragment,w),w.forEach(v),this.h()},h(){f(e,"class","content svelte-tev7zh"),f(a,"class","row"),h.disabled=p=!l[3].length,f(_,"class","controls svelte-tev7zh"),f(t,"class","mural svelte-tev7zh"),ue(t,"active",l[0]),De(t,"--width",Y),De(t,"--height",A)},m(b,w){K(b,t,w),u(t,e),Ie(i,e,null),u(t,n),u(t,_),u(_,a);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(a,null);u(_,m),u(_,h),u(h,c),u(t,T),Ie(P,t,null),y=!0,C||(W=$(h,"click",l[30]),C=!0)},p(b,w){const g={};w[0]&128&&(g.width=b[7]),w[0]&256&&(g.height=b[8]),w[0]&10367|w[1]&8192&&(g.$$scope={dirty:w,ctx:b}),!d&&w[0]&32&&(d=!0,g.scale=b[5],fe(()=>d=!1)),i.$set(g),w[0]&37440&&(X=Me(b[9]),s=Je(s,w,O,1,b,X,o,a,Tt,ct,null,rt)),(!y||w[0]&8&&p!==(p=!b[3].length))&&(h.disabled=p);const D={};w[0]&8&&(D.items=b[3]),w[0]&1024&&(D.itemSelection=b[10]),P.$set(D),(!y||w[0]&1)&&ue(t,"active",b[0]),w[0]&128&&Y!==(Y=`${b[7]}px`)&&De(t,"--width",Y),w[0]&256&&A!==(A=`${b[8]}px`)&&De(t,"--height",A)},i(b){y||(_e(i.$$.fragment,b),_e(P.$$.fragment,b),y=!0)},o(b){de(i.$$.fragment,b),de(P.$$.fragment,b),y=!1},d(b){b&&v(t),ye(i);for(let w=0;w<s.length;w+=1)s[w].d();ye(P),C=!1,W()}}}function qt(l,t,e){let i,d,n,_,a=Se,s=()=>(a(),a=Xe(d,r=>e(11,_=r)),d),o,m=Se,h=()=>(m(),m=Xe(N,r=>e(12,o=r)),N);l.$$.on_destroy.push(()=>a()),l.$$.on_destroy.push(()=>m());const c=_t();let{items:p=[]}=t,{width:T}=t,{height:P}=t,{pointing:Y=void 0}=t,{pointerDown:A=void 0}=t,{pointerX:y=void 0}=t,{pointerY:C=void 0}=t,{scale:W=void 0}=t;const U=()=>{const r=L==="pen"||L==="polyline"?Ct():L==="circle"?jt(y,C):null;return r||null};let{addItem:F=(r,q)=>r.concat(q)}=t,{updateItem:X=(r,q)=>Nt(r,q)}=t,{selectItemToDraw:O=r=>o||r.at(-1)}=t,{removeItem:b=(r,q)=>r.filter(me=>me!==q)}=t,{removeAllItems:w=r=>[]}=t;const g=new Map,D=r=>{switch(r.type){case"addItem":{const q=et(r.item);g.set(r.item.id,q),e(3,p=F(p,q,r.item.id));break}case"updateItem":{const q=g.get(r.id);if(!q)return;X(q,r.data);break}case"removeItem":{const q=g.get(r.id);if(!q)return;g.delete(r.id),e(3,p=b(p,q,r.id));break}case"removeAllItems":{g.clear(),e(3,p=w(p));break}}},I=r=>{c("action",r),D(r)};let{brushes:J=["pen","polyline","circle"]}=t,{selectedBrush:L=J[0]}=t,{itemSelection:N=et(null)}=t;h();let S=!1;const H=()=>{if(S||(e(23,S=!0),o))return;const r=U();r&&(I({type:"addItem",item:r}),L==="polyline"&&Ue(N,o=p.find(q=>$e(q).id===r.id)||null,o))},x=()=>{S&&e(23,S=!1)},ie=(r,q)=>{const me=O(p);if(!me)return;const{id:pe,type:ke}=$e(me);ke==="polyline"&&I({type:"updateItem",id:pe,data:{appendPoints:[tt.x(r),tt.y(q)]}})};function le(r){Y=r,e(4,Y)}function ne(r){A=r,e(0,A)}function Z(r){y=r,e(1,y)}function he(r){C=r,e(2,C)}function G(r){W=r,e(5,W)}const j=r=>{Ue(N,o=null,o),e(6,L=r)},R=()=>{Ue(N,o=null,o),I({type:"removeAllItems"})},se=r=>I(r.detail);return l.$$set=r=>{"items"in r&&e(3,p=r.items),"width"in r&&e(7,T=r.width),"height"in r&&e(8,P=r.height),"pointing"in r&&e(4,Y=r.pointing),"pointerDown"in r&&e(0,A=r.pointerDown),"pointerX"in r&&e(1,y=r.pointerX),"pointerY"in r&&e(2,C=r.pointerY),"scale"in r&&e(5,W=r.scale),"addItem"in r&&e(17,F=r.addItem),"updateItem"in r&&e(18,X=r.updateItem),"selectItemToDraw"in r&&e(19,O=r.selectItemToDraw),"removeItem"in r&&e(20,b=r.removeItem),"removeAllItems"in r&&e(21,w=r.removeAllItems),"brushes"in r&&e(9,J=r.brushes),"selectedBrush"in r&&e(6,L=r.selectedBrush),"itemSelection"in r&&h(e(10,N=r.itemSelection))},l.$$.update=()=>{l.$$.dirty[0]&1&&(A?H():A===!1&&x()),l.$$.dirty[0]&8388614&&S&&y!==void 0&&C!==void 0&&ie(y,C),l.$$.dirty[0]&4096&&e(15,i=o===null),l.$$.dirty[0]&4096&&s(e(14,d=o)),l.$$.dirty[0]&2048&&e(13,n=(_==null?void 0:_.type)==="polyline"?qe(_):void 0)},[A,y,C,p,Y,W,L,T,P,J,N,_,o,n,d,i,I,F,X,O,b,w,D,S,le,ne,Z,he,G,j,R,se]}class Jt extends ze{constructor(t){super(),He(this,t,qt,Kt,Fe,{items:3,width:7,height:8,pointing:4,pointerDown:0,pointerX:1,pointerY:2,scale:5,addItem:17,updateItem:18,selectItemToDraw:19,removeItem:20,removeAllItems:21,handleAction:22,brushes:9,selectedBrush:6,itemSelection:10},null,[-1,-1])}get handleAction(){return this.$$.ctx[22]}}function Qt(l){let t,e,i,d,n,_,a,s,o,m,h,c,p,T,P,Y,A="<code>--mural_bg</code>",y,C,W,U,F,X,O,b=ae(l[0],1)+"",w,g,D,I,J,L,N,S,H,x=ae(l[1],1)+"",ie,le,ne,Z,he,G,j,R,se,r,q;function me(M){l[10](M)}function pe(M){l[11](M)}function ke(M){l[12](M)}function gt(M){l[13](M)}function It(M){l[14](M)}let we={width:l[0],height:l[1]};return l[7]!==void 0&&(we.items=l[7]),l[3]!==void 0&&(we.scale=l[3]),l[4]!==void 0&&(we.pointerDown=l[4]),l[5]!==void 0&&(we.pointerX=l[5]),l[6]!==void 0&&(we.pointerY=l[6]),e=new Jt({props:we}),oe.push(()=>ce(e,"items",me)),oe.push(()=>ce(e,"scale",pe)),oe.push(()=>ce(e,"pointerDown",ke)),oe.push(()=>ce(e,"pointerX",gt)),oe.push(()=>ce(e,"pointerY",It)),m=new wt({props:{content:`<Mural
	width="${l[0]}px"
	height="${l[1]}px"
	scale={${l[3]&&ae(l[3],3)}}
	pointerX={${l[5]&&ae(l[5],1)}}
	pointerY={${l[6]&&ae(l[6],1)}}
	pointerDown={${l[4]}}
>
	<MuralItemList
		items={[ ... ]}
	/>
</Mural>`}}),{c(){t=k("div"),be(e.$$.fragment),s=V(),o=k("section"),be(m.$$.fragment),h=V(),c=k("section"),p=k("form"),T=k("fieldset"),P=k("label"),Y=k("div"),Y.innerHTML=A,y=V(),C=k("input"),W=V(),U=k("label"),F=k("div"),X=ee("width "),O=k("code"),w=ee(b),g=ee("px"),D=V(),I=k("input"),J=V(),L=k("label"),N=k("div"),S=ee("height "),H=k("code"),ie=ee(x),le=ee("px"),ne=V(),Z=k("input"),he=V(),G=k("button"),j=ee("reset settings"),this.h()},l(M){t=E(M,"DIV",{class:!0});var Q=B(t);ge(e.$$.fragment,Q),s=z(Q),o=E(Q,"SECTION",{class:!0});var re=B(o);ge(m.$$.fragment,re),re.forEach(v),h=z(Q),c=E(Q,"SECTION",{class:!0});var Ne=B(c);p=E(Ne,"FORM",{});var Qe=B(p);T=E(Qe,"FIELDSET",{});var ve=B(T);P=E(ve,"LABEL",{});var Be=B(P);Y=E(Be,"DIV",{class:!0,"data-svelte-h":!0}),Ee(Y)!=="svelte-iv5je9"&&(Y.innerHTML=A),y=z(Be),C=E(Be,"INPUT",{type:!0}),Be.forEach(v),W=z(ve),U=E(ve,"LABEL",{});var Ye=B(U);F=E(Ye,"DIV",{class:!0});var Re=B(F);X=te(Re,"width "),O=E(Re,"CODE",{});var We=B(O);w=te(We,b),g=te(We,"px"),We.forEach(v),Re.forEach(v),D=z(Ye),I=E(Ye,"INPUT",{type:!0,min:!0,max:!0}),Ye.forEach(v),J=z(ve),L=E(ve,"LABEL",{});var Pe=B(L);N=E(Pe,"DIV",{class:!0});var Ge=B(N);S=te(Ge,"height "),H=E(Ge,"CODE",{});var Ke=B(H);ie=te(Ke,x),le=te(Ke,"px"),Ke.forEach(v),Ge.forEach(v),ne=z(Pe),Z=E(Pe,"INPUT",{type:!0,min:!0,max:!0}),Pe.forEach(v),he=z(ve),G=E(ve,"BUTTON",{type:!0,class:!0});var Ze=B(G);j=te(Ze,"reset settings"),Ze.forEach(v),ve.forEach(v),Qe.forEach(v),Ne.forEach(v),Q.forEach(v),this.h()},h(){f(o,"class","svelte-17r4wzu"),f(Y,"class","title"),f(C,"type","color"),f(F,"class","title"),f(I,"type","range"),f(I,"min",0),f(I,"max",Ce*2),f(N,"class","title"),f(Z,"type","range"),f(Z,"min",0),f(Z,"max",je),f(G,"type","button"),G.disabled=R=l[4]===void 0&&l[5]===void 0&&l[6]===void 0&&l[0]===Ce&&l[1]===je&&l[2]===void 0,f(G,"class","svelte-17r4wzu"),f(c,"class","markup svelte-17r4wzu"),f(t,"class","box width_full"),De(t,"--mural_bg",xt)},m(M,Q){K(M,t,Q),Ie(e,t,null),u(t,s),u(t,o),Ie(m,o,null),u(t,h),u(t,c),u(c,p),u(p,T),u(T,P),u(P,Y),u(P,y),u(P,C),Le(C,l[2]),u(T,W),u(T,U),u(U,F),u(F,X),u(F,O),u(O,w),u(O,g),u(U,D),u(U,I),Le(I,l[0]),u(T,J),u(T,L),u(L,N),u(N,S),u(N,H),u(H,ie),u(H,le),u(L,ne),u(L,Z),Le(Z,l[1]),u(T,he),u(T,G),u(G,j),se=!0,r||(q=[$(C,"input",l[15]),$(I,"change",l[16]),$(I,"input",l[16]),$(Z,"change",l[17]),$(Z,"input",l[17]),$(G,"click",l[9])],r=!0)},p(M,Q){const re={};Q&1&&(re.width=M[0]),Q&2&&(re.height=M[1]),!i&&Q&128&&(i=!0,re.items=M[7],fe(()=>i=!1)),!d&&Q&8&&(d=!0,re.scale=M[3],fe(()=>d=!1)),!n&&Q&16&&(n=!0,re.pointerDown=M[4],fe(()=>n=!1)),!_&&Q&32&&(_=!0,re.pointerX=M[5],fe(()=>_=!1)),!a&&Q&64&&(a=!0,re.pointerY=M[6],fe(()=>a=!1)),e.$set(re);const Ne={};Q&123&&(Ne.content=`<Mural
	width="${M[0]}px"
	height="${M[1]}px"
	scale={${M[3]&&ae(M[3],3)}}
	pointerX={${M[5]&&ae(M[5],1)}}
	pointerY={${M[6]&&ae(M[6],1)}}
	pointerDown={${M[4]}}
>
	<MuralItemList
		items={[ ... ]}
	/>
</Mural>`),m.$set(Ne),Q&4&&Le(C,M[2]),(!se||Q&1)&&b!==(b=ae(M[0],1)+"")&&Te(w,b),Q&1&&Le(I,M[0]),(!se||Q&2)&&x!==(x=ae(M[1],1)+"")&&Te(ie,x),Q&2&&Le(Z,M[1]),(!se||Q&119&&R!==(R=M[4]===void 0&&M[5]===void 0&&M[6]===void 0&&M[0]===Ce&&M[1]===je&&M[2]===void 0))&&(G.disabled=R)},i(M){se||(_e(e.$$.fragment,M),_e(m.$$.fragment,M),se=!0)},o(M){de(e.$$.fragment,M),de(m.$$.fragment,M),se=!1},d(M){M&&v(t),ye(e),ye(m),r=!1,Ve(q)}}}function Zt(l){let t,e;return t=new Et({props:{tome:l[8],$$slots:{default:[Qt]},$$scope:{ctx:l}}}),{c(){be(t.$$.fragment)},l(i){ge(t.$$.fragment,i)},m(i,d){Ie(t,i,d),e=!0},p(i,[d]){const n={};d&262399&&(n.$$scope={dirty:d,ctx:i}),t.$set(n)},i(i){e||(_e(t.$$.fragment,i),e=!0)},o(i){de(t.$$.fragment,i),e=!1},d(i){ye(t,i)}}}const $t="Mural",Ce=750,je=512,xt="var(--bg)";function el(l,t,e){const i=Lt($t);let d=Ce,n=je,_,a,s,o,m;const h=()=>{e(4,s=void 0),e(5,o=void 0),e(6,m=void 0),e(0,d=Ce),e(1,n=je),e(2,_=void 0)};let c=[];function p(U){c=U,e(7,c)}function T(U){a=U,e(3,a)}function P(U){s=U,e(4,s)}function Y(U){o=U,e(5,o)}function A(U){m=U,e(6,m)}function y(){_=this.value,e(2,_)}function C(){d=xe(this.value),e(0,d)}function W(){n=xe(this.value),e(1,n)}return[d,n,_,a,s,o,m,c,i,h,p,T,P,Y,A,y,C,W]}class ol extends ze{constructor(t){super(),He(this,t,el,Zt,Fe,{})}}export{ol as component};
