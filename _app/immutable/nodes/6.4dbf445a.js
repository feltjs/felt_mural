import{n as xe,e as b,s as B,t as oe,c as y,a as V,d as k,f as O,b as re,m as Ie,o as n,y as ve,i as ae,g as _,I as Z,h as Je,j as He,r as it,a8 as wt,J as Ze,aa as Xe,A as Ye,ad as Ct,G as ge,E as Ke,ae as be,ab as at,K as Et,L as Lt,af as ze,ag as ut}from"../chunks/scheduler.a4956b2f.js";import{S as $e,i as et,g as Tt,e as It,a as ke,t as we,c as Ne,b as Me,m as Ce,d as Ue,h as ye}from"../chunks/index.23824295.js";import{G as Ut,a as _t,S as At,T as Dt,r as pe,C as Pt}from"../chunks/Scaled.4da97fb6.js";import{a as St}from"../chunks/tome.cd90b044.js";import{g as Bt}from"../chunks/globals.7f7f1b26.js";import{e as je,u as nt,o as Nt,d as Ot}from"../chunks/each.cd1e893b.js";import{w as ot}from"../chunks/index.c6fd790a.js";import{D as Ge,a as Vt,t as lt,b as Ft,S as Rt,u as zt,p as rt,c as Gt,d as Ht,M as Yt,e as ft}from"../chunks/Mural_Item.72cc58ee.js";function jt(l){let t;return{c(){t=oe("ðŸ‘")},l(e){t=re(e,"ðŸ‘")},m(e,u){ae(e,t,u)},d(e){e&&k(t)}}}function Kt(l){let t;return{c(){t=oe("â€¢")},l(e){t=re(e,"â€¢")},m(e,u){ae(e,t,u)},d(e){e&&k(t)}}}function dt(l){let t,e=lt(l[7]).length+"",u,d,a,f="points";return{c(){t=b("div"),u=oe(e),d=B(),a=b("small"),a.textContent=f},l(r){t=y(r,"DIV",{});var o=V(t);u=re(o,e),d=O(o),a=y(o,"SMALL",{"data-svelte-h":!0}),Ie(a)!=="svelte-les35l"&&(a.textContent=f),o.forEach(k)},m(r,o){ae(r,t,o),_(t,u),_(t,d),_(t,a)},p(r,o){o[0]&128&&e!==(e=lt(r[7]).length+"")&&Je(u,e)},d(r){r&&k(t)}}}function ct(l){let t;return{c(){t=oe(`no
				`)},l(e){t=re(e,`no
				`)},m(e,u){ae(e,t,u)},d(e){e&&k(t)}}}function mt(l){let t,e,u="x",d,a,f,r,o,c,E,m,s,g,D="y",L,P,j,T,A,K,C,I,G,q,v="radius",w,N,F,Y,x,z,Q,W,J,ie;return{c(){t=b("label"),e=b("small"),e.textContent=u,d=B(),a=b("input"),r=B(),o=b("input"),m=B(),s=b("label"),g=b("small"),g.textContent=D,L=B(),P=b("input"),T=B(),A=b("input"),I=B(),G=b("label"),q=b("small"),q.textContent=v,w=B(),N=b("input"),x=B(),z=b("input"),this.h()},l(S){t=y(S,"LABEL",{title:!0,class:!0});var M=V(t);e=y(M,"SMALL",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-9crtu1"&&(e.textContent=u),d=O(M),a=y(M,"INPUT",{class:!0,type:!0,min:!0,max:!0}),r=O(M),o=y(M,"INPUT",{class:!0,type:!0}),M.forEach(k),m=O(S),s=y(S,"LABEL",{title:!0,class:!0});var X=V(s);g=y(X,"SMALL",{class:!0,"data-svelte-h":!0}),Ie(g)!=="svelte-1aa9kl6"&&(g.textContent=D),L=O(X),P=y(X,"INPUT",{class:!0,type:!0,min:!0,max:!0}),T=O(X),A=y(X,"INPUT",{class:!0,type:!0}),X.forEach(k),I=O(S),G=y(S,"LABEL",{title:!0,class:!0});var p=V(G);q=y(p,"SMALL",{class:!0,"data-svelte-h":!0}),Ie(q)!=="svelte-182540t"&&(q.textContent=v),w=O(p),N=y(p,"INPUT",{class:!0,type:!0,min:!0,max:!0}),x=O(p),z=y(p,"INPUT",{class:!0,type:!0}),p.forEach(k),this.h()},h(){n(e,"class","title"),n(a,"class","item_input svelte-xtk9do"),n(a,"type","range"),a.value=f=l[7].cx,n(a,"min",0),n(a,"max",l[2]),n(o,"class","item_input svelte-xtk9do"),n(o,"type","number"),o.value=c=l[7].cx,n(t,"title",E="modify the "+l[7].type+"'s x position"),n(t,"class","svelte-xtk9do"),n(g,"class","title"),n(P,"class","item_input svelte-xtk9do"),n(P,"type","range"),P.value=j=l[7].cy,n(P,"min",0),n(P,"max",l[3]),n(A,"class","item_input svelte-xtk9do"),n(A,"type","number"),A.value=K=l[7].cy,n(s,"title",C="modify the "+l[7].type+"'s y position"),n(s,"class","svelte-xtk9do"),n(q,"class","title"),n(N,"class","item_input svelte-xtk9do"),n(N,"type","range"),N.value=F=l[7].radius,n(N,"min",1),n(N,"max",Y=l[4]*_t),n(z,"class","item_input svelte-xtk9do"),n(z,"type","number"),z.value=Q=l[7].radius,n(G,"title",W="modify the "+l[7].type+"'s radius"),n(G,"class","svelte-xtk9do")},m(S,M){ae(S,t,M),_(t,e),_(t,d),_(t,a),_(t,r),_(t,o),ae(S,m,M),ae(S,s,M),_(s,g),_(s,L),_(s,P),_(s,T),_(s,A),ae(S,I,M),ae(S,G,M),_(G,q),_(G,w),_(G,N),_(G,x),_(G,z),J||(ie=[Z(a,"input",l[24]),Z(o,"input",l[25]),Z(P,"input",l[26]),Z(A,"input",l[27]),Z(N,"input",l[28]),Z(z,"input",l[29])],J=!0)},p(S,M){M[0]&128&&f!==(f=S[7].cx)&&(a.value=f),M[0]&4&&n(a,"max",S[2]),M[0]&128&&c!==(c=S[7].cx)&&o.value!==c&&(o.value=c),M[0]&128&&E!==(E="modify the "+S[7].type+"'s x position")&&n(t,"title",E),M[0]&128&&j!==(j=S[7].cy)&&(P.value=j),M[0]&8&&n(P,"max",S[3]),M[0]&128&&K!==(K=S[7].cy)&&A.value!==K&&(A.value=K),M[0]&128&&C!==(C="modify the "+S[7].type+"'s y position")&&n(s,"title",C),M[0]&128&&F!==(F=S[7].radius)&&(N.value=F),M[0]&16&&Y!==(Y=S[4]*_t)&&n(N,"max",Y),M[0]&128&&Q!==(Q=S[7].radius)&&z.value!==Q&&(z.value=Q),M[0]&128&&W!==(W="modify the "+S[7].type+"'s radius")&&n(G,"title",W)},d(S){S&&(k(t),k(m),k(s),k(I),k(G)),J=!1,it(ie)}}}function qt(l){let t,e,u,d,a,f,r=l[7].type+"",o,c,E,m,s,g="opacity",D,L,P,j,T,A,K,C,I,G,q,v,w,N,F,Y,x,z,Q,W,J,ie="stroke color",S,M,X,p,fe,$,ce,Ee="stroke width",me,ne,Le,Ae,de,Te,De,Pe,i,h="ðŸ—™",H,ue;function he(U,R){return U[12]?Kt:jt}let Se=he(l),se=Se(l),ee=l[7].type==="polyline"&&dt(l),te=(!l[6]||l[11]==="none")&&ct(),le=l[7].type==="circle"&&mt(l);return{c(){t=b("li"),e=b("button"),se.c(),u=B(),d=b("div"),a=b("div"),f=b("div"),o=oe(r),c=B(),ee&&ee.c(),E=B(),m=b("label"),s=b("small"),s.textContent=g,D=B(),L=b("input"),j=B(),T=b("input"),K=B(),C=b("label"),I=b("small"),te&&te.c(),G=oe("fill"),q=B(),v=b("input"),N=B(),F=b("input"),Q=B(),W=b("label"),J=b("small"),J.textContent=ie,S=B(),M=b("input"),fe=B(),$=b("label"),ce=b("small"),ce.textContent=Ee,me=B(),ne=b("input"),Ae=B(),de=b("input"),De=B(),le&&le.c(),Pe=B(),i=b("button"),i.textContent=h,this.h()},l(U){t=y(U,"LI",{class:!0,"aria-hidden":!0});var R=V(t);e=y(R,"BUTTON",{class:!0});var Oe=V(e);se.l(Oe),Oe.forEach(k),u=O(R),d=y(R,"DIV",{class:!0});var _e=V(d);a=y(_e,"DIV",{class:!0});var Be=V(a);f=y(Be,"DIV",{class:!0});var st=V(f);o=re(st,r),st.forEach(k),c=O(Be),ee&&ee.l(Be),Be.forEach(k),E=O(_e),m=y(_e,"LABEL",{class:!0});var Ve=V(m);s=y(Ve,"SMALL",{class:!0,"data-svelte-h":!0}),Ie(s)!=="svelte-12nhgd4"&&(s.textContent=g),D=O(Ve),L=y(Ve,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),j=O(Ve),T=y(Ve,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),Ve.forEach(k),K=O(_e),C=y(_e,"LABEL",{title:!0,class:!0});var Fe=V(C);I=y(Fe,"SMALL",{class:!0});var tt=V(I);te&&te.l(tt),G=re(tt,"fill"),tt.forEach(k),q=O(Fe),v=y(Fe,"INPUT",{type:!0,title:!0,class:!0}),N=O(Fe),F=y(Fe,"INPUT",{class:!0,type:!0}),Fe.forEach(k),Q=O(_e),W=y(_e,"LABEL",{title:!0,class:!0});var Qe=V(W);J=y(Qe,"SMALL",{class:!0,"data-svelte-h":!0}),Ie(J)!=="svelte-4jtig2"&&(J.textContent=ie),S=O(Qe),M=y(Qe,"INPUT",{class:!0,type:!0}),Qe.forEach(k),fe=O(_e),$=y(_e,"LABEL",{class:!0});var Re=V($);ce=y(Re,"SMALL",{class:!0,"data-svelte-h":!0}),Ie(ce)!=="svelte-txngkb"&&(ce.textContent=Ee),me=O(Re),ne=y(Re,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),Ae=O(Re),de=y(Re,"INPUT",{class:!0,type:!0,step:!0}),Re.forEach(k),De=O(_e),le&&le.l(_e),_e.forEach(k),Pe=O(R),i=y(R,"BUTTON",{class:!0,"data-svelte-h":!0}),Ie(i)!=="svelte-1b5liiu"&&(i.textContent=h),R.forEach(k),this.h()},h(){n(e,"class","icon_button plain deselectable"),ve(e,"selected",l[12]),n(f,"class","spaced"),n(a,"class","type svelte-xtk9do"),n(s,"class","title"),n(L,"class","item_input svelte-xtk9do"),n(L,"type","range"),n(L,"min",0),n(L,"max",1),n(L,"step",.01),L.value=l[10],n(L,"title",P="modify the "+l[7].type+"'s opacity"),n(T,"class","item_input svelte-xtk9do"),n(T,"type","number"),n(T,"min",0),n(T,"max",1),n(T,"step",.01),T.value=l[10],n(T,"title",A="modify the "+l[7].type+"'s opacity"),n(m,"class","svelte-xtk9do"),n(I,"class","title"),n(v,"type","checkbox"),v.checked=l[6],n(v,"title",w="the "+l[7].type+"'s fill is "+(l[7].enable_fill?"enabled":"disabled")),n(v,"class","svelte-xtk9do"),n(F,"class","item_input svelte-xtk9do"),n(F,"type","color"),F.disabled=Y=!l[6],F.value=x=l[11]==="none"?"#000000":l[11],n(C,"title",z="modify the "+l[7].type+"'s fill color"),n(C,"class","svelte-xtk9do"),n(J,"class","title"),n(M,"class","item_input svelte-xtk9do"),n(M,"type","color"),M.value=X=l[7].stroke??"#000000",n(W,"title",p="modify the "+l[7].type+"'s stroke color"),n(W,"class","svelte-xtk9do"),n(ce,"class","title"),n(ne,"class","item_input svelte-xtk9do"),n(ne,"type","range"),ne.value=Le=l[7].stroke_width??Ge,n(ne,"min",0),n(ne,"max",l[9]),n(ne,"step",1),n(de,"class","item_input svelte-xtk9do"),n(de,"type","number"),de.value=Te=l[7].stroke_width??Ge,n(de,"step",1),n($,"class","svelte-xtk9do"),n(d,"class","controls svelte-xtk9do"),n(i,"class","icon_button plain"),n(t,"class","mural_item_list_item selectable svelte-xtk9do"),n(t,"aria-hidden",""),ve(t,"hidden",l[12]),ve(t,"selected",l[13])},m(U,R){ae(U,t,R),_(t,e),se.m(e,null),_(t,u),_(t,d),_(d,a),_(a,f),_(f,o),_(a,c),ee&&ee.m(a,null),_(d,E),_(d,m),_(m,s),_(m,D),_(m,L),_(m,j),_(m,T),_(d,K),_(d,C),_(C,I),te&&te.m(I,null),_(I,G),_(C,q),_(C,v),_(C,N),_(C,F),_(d,Q),_(d,W),_(W,J),_(W,S),_(W,M),_(d,fe),_(d,$),_($,ce),_($,me),_($,ne),_($,Ae),_($,de),_(d,De),le&&le.m(d,null),_(t,Pe),_(t,i),H||(ue=[Z(e,"click",l[16]),Z(L,"input",l[17]),Z(T,"input",l[18]),Z(v,"input",l[19]),Z(F,"input",l[20]),Z(M,"input",l[21]),Z(ne,"input",l[22]),Z(de,"input",l[23]),Z(i,"click",l[30]),Z(t,"click",l[31])],H=!0)},p(U,R){Se!==(Se=he(U))&&(se.d(1),se=Se(U),se&&(se.c(),se.m(e,null))),R[0]&4096&&ve(e,"selected",U[12]),R[0]&128&&r!==(r=U[7].type+"")&&Je(o,r),U[7].type==="polyline"?ee?ee.p(U,R):(ee=dt(U),ee.c(),ee.m(a,null)):ee&&(ee.d(1),ee=null),R[0]&1024&&(L.value=U[10]),R[0]&128&&P!==(P="modify the "+U[7].type+"'s opacity")&&n(L,"title",P),R[0]&1024&&T.value!==U[10]&&(T.value=U[10]),R[0]&128&&A!==(A="modify the "+U[7].type+"'s opacity")&&n(T,"title",A),!U[6]||U[11]==="none"?te||(te=ct(),te.c(),te.m(I,G)):te&&(te.d(1),te=null),R[0]&64&&(v.checked=U[6]),R[0]&128&&w!==(w="the "+U[7].type+"'s fill is "+(U[7].enable_fill?"enabled":"disabled"))&&n(v,"title",w),R[0]&64&&Y!==(Y=!U[6])&&(F.disabled=Y),R[0]&2048&&x!==(x=U[11]==="none"?"#000000":U[11])&&(F.value=x),R[0]&128&&z!==(z="modify the "+U[7].type+"'s fill color")&&n(C,"title",z),R[0]&128&&X!==(X=U[7].stroke??"#000000")&&(M.value=X),R[0]&128&&p!==(p="modify the "+U[7].type+"'s stroke color")&&n(W,"title",p),R[0]&128&&Le!==(Le=U[7].stroke_width??Ge)&&(ne.value=Le),R[0]&512&&n(ne,"max",U[9]),R[0]&128&&Te!==(Te=U[7].stroke_width??Ge)&&de.value!==Te&&(de.value=Te),U[7].type==="circle"?le?le.p(U,R):(le=mt(U),le.c(),le.m(d,null)):le&&(le.d(1),le=null),R[0]&4096&&ve(t,"hidden",U[12]),R[0]&8192&&ve(t,"selected",U[13])},i:He,o:He,d(U){U&&k(t),se.d(),ee&&ee.d(),te&&te.d(),le&&le.d(),H=!1,it(ue)}}}function Wt(l,t,e){let u,d,a,f,r,o,c,E,m,s,g=He,D=()=>(g(),g=Ze(T,p=>e(7,s=p)),T),L,P=He,j=()=>(P(),P=Ze(A,p=>e(8,L=p)),A);l.$$.on_destroy.push(()=>g()),l.$$.on_destroy.push(()=>P());let{item:T}=t;D();let{item_selection:A}=t;j();let{width:K}=t,{height:C}=t;const I=wt(),G=()=>I("action",{type:"update_item",id:s.id,data:{hidden:!s.hidden}}),q=p=>I("action",{type:"update_item",id:s.id,data:{opacity:Number(p.currentTarget.value)}}),v=p=>I("action",{type:"update_item",id:s.id,data:{opacity:Number(p.currentTarget.value)}}),w=p=>I("action",{type:"update_item",id:s.id,data:{enable_fill:p.currentTarget.checked,fill:a??(p.currentTarget.checked?Ft:void 0)}}),N=p=>I("action",{type:"update_item",id:s.id,data:{fill:p.currentTarget.value}}),F=p=>I("action",{type:"update_item",id:s.id,data:{stroke:p.currentTarget.value}}),Y=p=>I("action",{type:"update_item",id:s.id,data:{stroke_width:Number(p.currentTarget.value)}}),x=p=>I("action",{type:"update_item",id:s.id,data:{stroke_width:Number(p.currentTarget.value)}}),z=p=>I("action",{type:"update_item",id:s.id,data:{cx:Number(p.currentTarget.value)}}),Q=p=>I("action",{type:"update_item",id:s.id,data:{cx:Number(p.currentTarget.value)}}),W=p=>I("action",{type:"update_item",id:s.id,data:{cy:Number(p.currentTarget.value)}}),J=p=>I("action",{type:"update_item",id:s.id,data:{cy:Number(p.currentTarget.value)}}),ie=p=>I("action",{type:"update_item",id:s.id,data:{radius:Number(p.currentTarget.value)}}),S=p=>I("action",{type:"update_item",id:s.id,data:{radius:Number(p.currentTarget.value)}}),M=()=>I("action",{type:"remove_item",id:s.id}),X=()=>Xe(A,L=T,L);return l.$$set=p=>{"item"in p&&D(e(0,T=p.item)),"item_selection"in p&&j(e(1,A=p.item_selection)),"width"in p&&e(2,K=p.width),"height"in p&&e(3,C=p.height)},l.$$.update=()=>{l.$$.dirty[0]&257&&e(13,u=L===T),l.$$.dirty[0]&128&&e(6,{enable_fill:d,fill:a,hidden:f,opacity:r}=s,d,(e(5,a),e(7,s)),(e(12,f),e(7,s)),(e(15,r),e(7,s))),l.$$.dirty[0]&96&&e(11,o=d?a??Vt:"none"),l.$$.dirty[0]&32768&&e(10,c=r??1),l.$$.dirty[0]&12&&e(4,E=Math.min(K,C)),l.$$.dirty[0]&16&&e(9,m=E*Ut)},[T,A,K,C,E,a,d,s,L,m,c,o,f,u,I,r,G,q,v,w,N,F,Y,x,z,Q,W,J,ie,S,M,X]}class Jt extends $e{constructor(t){super(),et(this,t,Wt,qt,xe,{item:0,item_selection:1,width:2,height:3},null,[-1,-1])}}function ht(l,t,e){const u=l.slice();return u[6]=t[e],u}function pt(l,t){let e,u,d;return u=new Jt({props:{item:t[6],item_selection:t[0],width:t[1],height:t[2]}}),u.$on("action",t[5]),{key:l,first:null,c(){e=Ye(),Ne(u.$$.fragment),this.h()},l(a){e=Ye(),Me(u.$$.fragment,a),this.h()},h(){this.first=e},m(a,f){ae(a,e,f),Ce(u,a,f),d=!0},p(a,f){t=a;const r={};f&8&&(r.item=t[6]),f&1&&(r.item_selection=t[0]),f&2&&(r.width=t[1]),f&4&&(r.height=t[2]),u.$set(r)},i(a){d||(ke(u.$$.fragment,a),d=!0)},o(a){we(u.$$.fragment,a),d=!1},d(a){a&&k(e),Ue(u,a)}}}function Qt(l){let t,e=[],u=new Map,d,a=je(l[3]);const f=r=>r[6];for(let r=0;r<a.length;r+=1){let o=ht(l,a,r),c=f(o);u.set(c,e[r]=pt(c,o))}return{c(){t=b("ul");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=y(r,"UL",{class:!0});var o=V(t);for(let c=0;c<e.length;c+=1)e[c].l(o);o.forEach(k),this.h()},h(){n(t,"class","width_md svelte-1gkqiw5")},m(r,o){ae(r,t,o);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);d=!0},p(r,[o]){o&15&&(a=je(r[3]),Tt(),e=nt(e,o,f,1,r,a,u,t,Nt,pt,null,ht),It())},i(r){if(!d){for(let o=0;o<a.length;o+=1)ke(e[o]);d=!0}},o(r){for(let o=0;o<e.length;o+=1)we(e[o]);d=!1},d(r){r&&k(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function Xt(l,t,e){let u,{items:d}=t,{item_selection:a}=t,{width:f}=t,{height:r}=t;function o(c){Ct.call(this,l,c)}return l.$$set=c=>{"items"in c&&e(4,d=c.items),"item_selection"in c&&e(0,a=c.item_selection),"width"in c&&e(1,f=c.width),"height"in c&&e(2,r=c.height)},l.$$.update=()=>{l.$$.dirty&16&&e(3,u=d.slice().reverse())},[a,f,r,u,d,o]}class Zt extends $e{constructor(t){super(),et(this,t,Xt,Qt,xe,{items:4,item_selection:0,width:1,height:2})}}const{Map:Mt}=Bt;function vt(l,t,e){const u=l.slice();return u[45]=t[e],u}function gt(l,t,e){const u=l.slice();return u[48]=t[e],u}function bt(l,t){let e,u,d;return u=new Yt({props:{item:t[48]}}),{key:l,first:null,c(){e=Ye(),Ne(u.$$.fragment),this.h()},l(a){e=Ye(),Me(u.$$.fragment,a),this.h()},h(){this.first=e},m(a,f){ae(a,e,f),Ce(u,a,f),d=!0},p(a,f){t=a;const r={};f[0]&8&&(r.item=t[48]),u.$set(r)},i(a){d||(ke(u.$$.fragment,a),d=!0)},o(a){we(u.$$.fragment,a),d=!1},d(a){a&&k(e),Ue(u,a)}}}function yt(l){let t,e,u,d,a;return{c(){t=Et("line"),this.h()},l(f){t=Lt(f,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),V(t).forEach(k),this.h()},h(){n(t,"x1",e=l[13].at(-2)),n(t,"y1",u=l[13].at(-1)),n(t,"x2",l[1]),n(t,"y2",l[2]),n(t,"stroke",d=l[11].stroke??ft),n(t,"stroke-width",a=l[11].stroke_width??Ge)},m(f,r){ae(f,t,r)},p(f,r){r[0]&8192&&e!==(e=f[13].at(-2))&&n(t,"x1",e),r[0]&8192&&u!==(u=f[13].at(-1))&&n(t,"y1",u),r[0]&2&&n(t,"x2",f[1]),r[0]&4&&n(t,"y2",f[2]),r[0]&2048&&d!==(d=f[11].stroke??ft)&&n(t,"stroke",d),r[0]&2048&&a!==(a=f[11].stroke_width??Ge)&&n(t,"stroke-width",a)},d(f){f&&k(t)}}}function xt(l){var c,E;let t,e=[],u=new Mt,d,a,f=je(l[3]);const r=m=>m[48];for(let m=0;m<f.length;m+=1){let s=gt(l,f,m),g=r(s);u.set(g,e[m]=bt(g,s))}let o=l[4]&&!l[0]&&l[6]==="polyline"&&((c=l[11])==null?void 0:c.type)==="polyline"&&((E=l[13])==null?void 0:E.length)&&yt(l);return{c(){t=Et("svg");for(let m=0;m<e.length;m+=1)e[m].c();d=Ye(),o&&o.c(),this.h()},l(m){t=Lt(m,"svg",{class:!0});var s=V(t);for(let g=0;g<e.length;g+=1)e[g].l(s);d=Ye(),o&&o.l(s),s.forEach(k),this.h()},h(){n(t,"class","svelte-tev7zh")},m(m,s){ae(m,t,s);for(let g=0;g<e.length;g+=1)e[g]&&e[g].m(t,null);_(t,d),o&&o.m(t,null),a=!0},p(m,s){var g,D;s[0]&8&&(f=je(m[3]),Tt(),e=nt(e,s,r,1,m,f,u,t,Nt,bt,d,gt),It()),m[4]&&!m[0]&&m[6]==="polyline"&&((g=m[11])==null?void 0:g.type)==="polyline"&&((D=m[13])!=null&&D.length)?o?o.p(m,s):(o=yt(m),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i(m){if(!a){for(let s=0;s<f.length;s+=1)ke(e[s]);a=!0}},o(m){for(let s=0;s<e.length;s+=1)we(e[s]);a=!1},d(m){m&&k(t);for(let s=0;s<e.length;s+=1)e[s].d();o&&o.d()}}}function $t(l){let t,e,u,d,a,f;function r(s){l[30](s)}function o(s){l[31](s)}function c(s){l[32](s)}function E(s){l[33](s)}let m={scale:l[5],cancel_on_leave:!1,$$slots:{default:[xt]},$$scope:{ctx:l}};return l[4]!==void 0&&(m.pointing=l[4]),l[0]!==void 0&&(m.pointer_down=l[0]),l[1]!==void 0&&(m.pointer_x=l[1]),l[2]!==void 0&&(m.pointer_y=l[2]),t=new Rt({props:m}),ge.push(()=>ye(t,"pointing",r)),ge.push(()=>ye(t,"pointer_down",o)),ge.push(()=>ye(t,"pointer_x",c)),ge.push(()=>ye(t,"pointer_y",E)),{c(){Ne(t.$$.fragment)},l(s){Me(t.$$.fragment,s)},m(s,g){Ce(t,s,g),f=!0},p(s,g){const D={};g[0]&32&&(D.scale=s[5]),g[0]&10335|g[1]&1048576&&(D.$$scope={dirty:g,ctx:s}),!e&&g[0]&16&&(e=!0,D.pointing=s[4],be(()=>e=!1)),!u&&g[0]&1&&(u=!0,D.pointer_down=s[0],be(()=>u=!1)),!d&&g[0]&2&&(d=!0,D.pointer_x=s[1],be(()=>d=!1)),!a&&g[0]&4&&(a=!0,D.pointer_y=s[2],be(()=>a=!1)),t.$set(D)},i(s){f||(ke(t.$$.fragment,s),f=!0)},o(s){we(t.$$.fragment,s),f=!1},d(s){Ue(t,s)}}}function kt(l,t){let e,u=t[45]+"",d,a,f,r;function o(){return t[35](t[45])}return{key:l,first:null,c(){e=b("button"),d=oe(u),a=B(),this.h()},l(c){e=y(c,"BUTTON",{});var E=V(e);d=re(E,u),a=O(E),E.forEach(k),this.h()},h(){ve(e,"selected",t[15]&&t[6]===t[45]),this.first=e},m(c,E){ae(c,e,E),_(e,d),_(e,a),f||(r=Z(e,"click",o),f=!0)},p(c,E){t=c,E[0]&512&&u!==(u=t[45]+"")&&Je(d,u),E[0]&33344&&ve(e,"selected",t[15]&&t[6]===t[45])},d(c){c&&k(e),f=!1,r()}}}function el(l){let t,e,u,d,a,f,r,o=[],c=new Mt,E,m,s,g,D,L,P=`${l[7]}px`,j=`${l[8]}px`,T,A,K;function C(v){l[34](v)}let I={width:l[7],height:l[8],$$slots:{default:[$t]},$$scope:{ctx:l}};l[5]!==void 0&&(I.scale=l[5]),u=new At({props:I}),ge.push(()=>ye(u,"scale",C));let G=je(l[9]);const q=v=>v[45];for(let v=0;v<G.length;v+=1){let w=vt(l,G,v),N=q(w);c.set(N,o[v]=kt(N,w))}return L=new Zt({props:{items:l[3],item_selection:l[10],width:l[7],height:l[8]}}),L.$on("action",l[37]),{c(){t=b("div"),e=b("div"),Ne(u.$$.fragment),a=B(),f=b("div"),r=b("div");for(let v=0;v<o.length;v+=1)o[v].c();E=B(),m=b("button"),s=oe("clear all"),D=B(),Ne(L.$$.fragment),this.h()},l(v){t=y(v,"DIV",{class:!0});var w=V(t);e=y(w,"DIV",{class:!0});var N=V(e);Me(u.$$.fragment,N),N.forEach(k),a=O(w),f=y(w,"DIV",{class:!0});var F=V(f);r=y(F,"DIV",{class:!0});var Y=V(r);for(let z=0;z<o.length;z+=1)o[z].l(Y);Y.forEach(k),E=O(F),m=y(F,"BUTTON",{});var x=V(m);s=re(x,"clear all"),x.forEach(k),F.forEach(k),D=O(w),Me(L.$$.fragment,w),w.forEach(k),this.h()},h(){n(e,"class","content svelte-tev7zh"),n(r,"class","row"),m.disabled=g=!l[3].length,n(f,"class","controls svelte-tev7zh"),n(t,"class","mural svelte-tev7zh"),ve(t,"active",l[0]),Ke(t,"--width",P),Ke(t,"--height",j)},m(v,w){ae(v,t,w),_(t,e),Ce(u,e,null),_(t,a),_(t,f),_(f,r);for(let N=0;N<o.length;N+=1)o[N]&&o[N].m(r,null);_(f,E),_(f,m),_(m,s),_(t,D),Ce(L,t,null),T=!0,A||(K=Z(m,"click",l[36]),A=!0)},p(v,w){const N={};w[0]&128&&(N.width=v[7]),w[0]&256&&(N.height=v[8]),w[0]&10367|w[1]&1048576&&(N.$$scope={dirty:w,ctx:v}),!d&&w[0]&32&&(d=!0,N.scale=v[5],be(()=>d=!1)),u.$set(N),w[0]&37440&&(G=je(v[9]),o=nt(o,w,q,1,v,G,c,r,Ot,kt,null,vt)),(!T||w[0]&8&&g!==(g=!v[3].length))&&(m.disabled=g);const F={};w[0]&8&&(F.items=v[3]),w[0]&1024&&(F.item_selection=v[10]),w[0]&128&&(F.width=v[7]),w[0]&256&&(F.height=v[8]),L.$set(F),(!T||w[0]&1)&&ve(t,"active",v[0]),w[0]&128&&P!==(P=`${v[7]}px`)&&Ke(t,"--width",P),w[0]&256&&j!==(j=`${v[8]}px`)&&Ke(t,"--height",j)},i(v){T||(ke(u.$$.fragment,v),ke(L.$$.fragment,v),T=!0)},o(v){we(u.$$.fragment,v),we(L.$$.fragment,v),T=!1},d(v){v&&k(t),Ue(u);for(let w=0;w<o.length;w+=1)o[w].d();Ue(L),A=!1,K()}}}function tl(l,t,e){let u,d,a,f,r=He,o=()=>(r(),r=Ze(d,i=>e(11,f=i)),d),c,E=He,m=()=>(E(),E=Ze(p,i=>e(12,c=i)),p);l.$$.on_destroy.push(()=>r()),l.$$.on_destroy.push(()=>E());const s=wt();let{items:g=[]}=t,{width:D}=t,{height:L}=t,{pointing:P=void 0}=t,{pointer_down:j=void 0}=t,{pointer_x:T=void 0}=t,{pointer_y:A=void 0}=t,{scale:K=void 0}=t;const C=()=>{const i=X==="pen"||X==="polyline"?Gt(z,Q,W,J,x):X==="circle"?Ht(T,A,ie,z,Q,W,J,x):null;return i?(S(i),i):null};let{add_item:I=(i,h)=>i.concat(h)}=t,{update_item:G=(i,h)=>zt(i,h)}=t,{select_item_to_draw:q=i=>c||i.at(-1)}=t,{remove_item:v=(i,h)=>i.filter(H=>H!==h)}=t,{remove_all_items:w=i=>[]}=t;const N=new Map,F=i=>{switch(i.type){case"add_item":{const h=ot(i.item);N.set(i.item.id,h),e(3,g=I(g,h,i.item.id));break}case"update_item":{const h=N.get(i.id);if(!h)return;G(h,i.data);break}case"remove_item":{const h=N.get(i.id);if(!h)return;N.delete(i.id),e(3,g=v(g,h,i.id));break}case"remove_all_items":{N.clear(),e(3,g=w(g));break}}},Y=i=>{s("action",i),F(i)};let{selected_opacity:x=void 0}=t,{selected_fill:z=void 0}=t,{selected_enable_fill:Q=void 0}=t,{selected_stroke:W=void 0}=t,{selected_stroke_width:J=void 0}=t,{selected_radius:ie=void 0}=t;const S=i=>{e(17,x=i.opacity),e(18,z=i.fill),e(19,Q=i.enable_fill),e(20,W=i.stroke),e(21,J=i.stroke_width),i.type==="circle"&&e(22,ie=i.radius)};let{brushes:M=["pen","polyline","circle"]}=t,{selected_brush:X=M[0]}=t,{item_selection:p=ot(null)}=t;m();let fe=!1;const $=()=>{if(fe||(e(29,fe=!0),c))return;const i=C();i&&(Y({type:"add_item",item:i}),X==="polyline"&&Xe(p,c=g.find(h=>at(h).id===i.id)||null,c))},ce=()=>{fe&&e(29,fe=!1)},Ee=(i,h)=>{const H=q(g);if(!H)return;const{id:ue,type:he}=at(H);he==="polyline"&&Y({type:"update_item",id:ue,data:{append_points:[rt.x(i),rt.y(h)]}})};function me(i){P=i,e(4,P)}function ne(i){j=i,e(0,j)}function Le(i){T=i,e(1,T)}function Ae(i){A=i,e(2,A)}function de(i){K=i,e(5,K)}const Te=i=>{Xe(p,c=null,c),e(6,X=i)},De=()=>{Xe(p,c=null,c),Y({type:"remove_all_items"})},Pe=i=>Y(i.detail);return l.$$set=i=>{"items"in i&&e(3,g=i.items),"width"in i&&e(7,D=i.width),"height"in i&&e(8,L=i.height),"pointing"in i&&e(4,P=i.pointing),"pointer_down"in i&&e(0,j=i.pointer_down),"pointer_x"in i&&e(1,T=i.pointer_x),"pointer_y"in i&&e(2,A=i.pointer_y),"scale"in i&&e(5,K=i.scale),"add_item"in i&&e(23,I=i.add_item),"update_item"in i&&e(24,G=i.update_item),"select_item_to_draw"in i&&e(25,q=i.select_item_to_draw),"remove_item"in i&&e(26,v=i.remove_item),"remove_all_items"in i&&e(27,w=i.remove_all_items),"selected_opacity"in i&&e(17,x=i.selected_opacity),"selected_fill"in i&&e(18,z=i.selected_fill),"selected_enable_fill"in i&&e(19,Q=i.selected_enable_fill),"selected_stroke"in i&&e(20,W=i.selected_stroke),"selected_stroke_width"in i&&e(21,J=i.selected_stroke_width),"selected_radius"in i&&e(22,ie=i.selected_radius),"brushes"in i&&e(9,M=i.brushes),"selected_brush"in i&&e(6,X=i.selected_brush),"item_selection"in i&&m(e(10,p=i.item_selection))},l.$$.update=()=>{l.$$.dirty[0]&1&&(j?$():j===!1&&ce()),l.$$.dirty[0]&536870918&&fe&&T!==void 0&&A!==void 0&&Ee(T,A),l.$$.dirty[0]&4096&&e(15,u=c===null),l.$$.dirty[0]&4096&&o(e(14,d=c)),l.$$.dirty[0]&2048&&e(13,a=(f==null?void 0:f.type)==="polyline"?lt(f):void 0),l.$$.dirty[0]&2048&&f&&S(f)},[j,T,A,g,P,K,X,D,L,M,p,f,c,a,d,u,Y,x,z,Q,W,J,ie,I,G,q,v,w,F,fe,me,ne,Le,Ae,de,Te,De,Pe]}class ll extends $e{constructor(t){super(),et(this,t,tl,el,xe,{items:3,width:7,height:8,pointing:4,pointer_down:0,pointer_x:1,pointer_y:2,scale:5,add_item:23,update_item:24,select_item_to_draw:25,remove_item:26,remove_all_items:27,handle_action:28,selected_opacity:17,selected_fill:18,selected_enable_fill:19,selected_stroke:20,selected_stroke_width:21,selected_radius:22,brushes:9,selected_brush:6,item_selection:10},null,[-1,-1])}get handle_action(){return this.$$.ctx[28]}}function il(l){let t,e,u,d,a,f,r,o,c,E,m,s,g,D,L,P,j="<code>--mural_bg</code>",T,A,K,C,I,G,q,v=pe(l[0],1)+"",w,N,F,Y,x,z,Q,W,J,ie=pe(l[1],1)+"",S,M,X,p,fe,$,ce,Ee,me,ne,Le;function Ae(h){l[10](h)}function de(h){l[11](h)}function Te(h){l[12](h)}function De(h){l[13](h)}function Pe(h){l[14](h)}let i={width:l[0],height:l[1]};return l[7]!==void 0&&(i.items=l[7]),l[3]!==void 0&&(i.scale=l[3]),l[4]!==void 0&&(i.pointer_down=l[4]),l[5]!==void 0&&(i.pointer_x=l[5]),l[6]!==void 0&&(i.pointer_y=l[6]),e=new ll({props:i}),ge.push(()=>ye(e,"items",Ae)),ge.push(()=>ye(e,"scale",de)),ge.push(()=>ye(e,"pointer_down",Te)),ge.push(()=>ye(e,"pointer_x",De)),ge.push(()=>ye(e,"pointer_y",Pe)),E=new Pt({props:{content:`<Mural
	width="${l[0]}px"
	height="${l[1]}px"
	scale={${l[3]&&pe(l[3],3)}}
	pointer_x={${l[5]&&pe(l[5],1)}}
	pointer_y={${l[6]&&pe(l[6],1)}}
	pointer_down={${l[4]}}
>
	<Mural_Item_List
		items={[ ... ]}
	/>
</Mural>`}}),{c(){t=b("div"),Ne(e.$$.fragment),o=B(),c=b("section"),Ne(E.$$.fragment),m=B(),s=b("section"),g=b("form"),D=b("fieldset"),L=b("label"),P=b("div"),P.innerHTML=j,T=B(),A=b("input"),K=B(),C=b("label"),I=b("div"),G=oe("width "),q=b("code"),w=oe(v),N=oe("px"),F=B(),Y=b("input"),x=B(),z=b("label"),Q=b("div"),W=oe("height "),J=b("code"),S=oe(ie),M=oe("px"),X=B(),p=b("input"),fe=B(),$=b("button"),ce=oe("reset settings"),this.h()},l(h){t=y(h,"DIV",{class:!0});var H=V(t);Me(e.$$.fragment,H),o=O(H),c=y(H,"SECTION",{class:!0});var ue=V(c);Me(E.$$.fragment,ue),ue.forEach(k),m=O(H),s=y(H,"SECTION",{class:!0});var he=V(s);g=y(he,"FORM",{});var Se=V(g);D=y(Se,"FIELDSET",{});var se=V(D);L=y(se,"LABEL",{});var ee=V(L);P=y(ee,"DIV",{class:!0,"data-svelte-h":!0}),Ie(P)!=="svelte-iv5je9"&&(P.innerHTML=j),T=O(ee),A=y(ee,"INPUT",{type:!0}),ee.forEach(k),K=O(se),C=y(se,"LABEL",{});var te=V(C);I=y(te,"DIV",{class:!0});var le=V(I);G=re(le,"width "),q=y(le,"CODE",{});var U=V(q);w=re(U,v),N=re(U,"px"),U.forEach(k),le.forEach(k),F=O(te),Y=y(te,"INPUT",{type:!0,min:!0,max:!0}),te.forEach(k),x=O(se),z=y(se,"LABEL",{});var R=V(z);Q=y(R,"DIV",{class:!0});var Oe=V(Q);W=re(Oe,"height "),J=y(Oe,"CODE",{});var _e=V(J);S=re(_e,ie),M=re(_e,"px"),_e.forEach(k),Oe.forEach(k),X=O(R),p=y(R,"INPUT",{type:!0,min:!0,max:!0}),R.forEach(k),fe=O(se),$=y(se,"BUTTON",{type:!0,class:!0});var Be=V($);ce=re(Be,"reset settings"),Be.forEach(k),se.forEach(k),Se.forEach(k),he.forEach(k),H.forEach(k),this.h()},h(){n(c,"class","svelte-17r4wzu"),n(P,"class","title"),n(A,"type","color"),n(I,"class","title"),n(Y,"type","range"),n(Y,"min",0),n(Y,"max",qe*2),n(Q,"class","title"),n(p,"type","range"),n(p,"min",0),n(p,"max",We),n($,"type","button"),$.disabled=Ee=l[4]===void 0&&l[5]===void 0&&l[6]===void 0&&l[0]===qe&&l[1]===We&&l[2]===void 0,n($,"class","svelte-17r4wzu"),n(s,"class","markup svelte-17r4wzu"),n(t,"class","box width_full"),Ke(t,"--mural_bg",al)},m(h,H){ae(h,t,H),Ce(e,t,null),_(t,o),_(t,c),Ce(E,c,null),_(t,m),_(t,s),_(s,g),_(g,D),_(D,L),_(L,P),_(L,T),_(L,A),ze(A,l[2]),_(D,K),_(D,C),_(C,I),_(I,G),_(I,q),_(q,w),_(q,N),_(C,F),_(C,Y),ze(Y,l[0]),_(D,x),_(D,z),_(z,Q),_(Q,W),_(Q,J),_(J,S),_(J,M),_(z,X),_(z,p),ze(p,l[1]),_(D,fe),_(D,$),_($,ce),me=!0,ne||(Le=[Z(A,"input",l[15]),Z(Y,"change",l[16]),Z(Y,"input",l[16]),Z(p,"change",l[17]),Z(p,"input",l[17]),Z($,"click",l[9])],ne=!0)},p(h,H){const ue={};H&1&&(ue.width=h[0]),H&2&&(ue.height=h[1]),!u&&H&128&&(u=!0,ue.items=h[7],be(()=>u=!1)),!d&&H&8&&(d=!0,ue.scale=h[3],be(()=>d=!1)),!a&&H&16&&(a=!0,ue.pointer_down=h[4],be(()=>a=!1)),!f&&H&32&&(f=!0,ue.pointer_x=h[5],be(()=>f=!1)),!r&&H&64&&(r=!0,ue.pointer_y=h[6],be(()=>r=!1)),e.$set(ue);const he={};H&123&&(he.content=`<Mural
	width="${h[0]}px"
	height="${h[1]}px"
	scale={${h[3]&&pe(h[3],3)}}
	pointer_x={${h[5]&&pe(h[5],1)}}
	pointer_y={${h[6]&&pe(h[6],1)}}
	pointer_down={${h[4]}}
>
	<Mural_Item_List
		items={[ ... ]}
	/>
</Mural>`),E.$set(he),H&4&&ze(A,h[2]),(!me||H&1)&&v!==(v=pe(h[0],1)+"")&&Je(w,v),H&1&&ze(Y,h[0]),(!me||H&2)&&ie!==(ie=pe(h[1],1)+"")&&Je(S,ie),H&2&&ze(p,h[1]),(!me||H&119&&Ee!==(Ee=h[4]===void 0&&h[5]===void 0&&h[6]===void 0&&h[0]===qe&&h[1]===We&&h[2]===void 0))&&($.disabled=Ee)},i(h){me||(ke(e.$$.fragment,h),ke(E.$$.fragment,h),me=!0)},o(h){we(e.$$.fragment,h),we(E.$$.fragment,h),me=!1},d(h){h&&k(t),Ue(e),Ue(E),ne=!1,it(Le)}}}function nl(l){let t,e;return t=new Dt({props:{tome:l[8],$$slots:{default:[il]},$$scope:{ctx:l}}}),{c(){Ne(t.$$.fragment)},l(u){Me(t.$$.fragment,u)},m(u,d){Ce(t,u,d),e=!0},p(u,[d]){const a={};d&262399&&(a.$$scope={dirty:d,ctx:u}),t.$set(a)},i(u){e||(ke(t.$$.fragment,u),e=!0)},o(u){we(t.$$.fragment,u),e=!1},d(u){Ue(t,u)}}}const sl="Mural",qe=750,We=512,al="var(--bg)";function ul(l,t,e){const u=St(sl);let d=qe,a=We,f,r,o,c,E;const m=()=>{e(4,o=void 0),e(5,c=void 0),e(6,E=void 0),e(0,d=qe),e(1,a=We),e(2,f=void 0)};let s=[];function g(C){s=C,e(7,s)}function D(C){r=C,e(3,r)}function L(C){o=C,e(4,o)}function P(C){c=C,e(5,c)}function j(C){E=C,e(6,E)}function T(){f=this.value,e(2,f)}function A(){d=ut(this.value),e(0,d)}function K(){a=ut(this.value),e(1,a)}return[d,a,f,r,o,c,E,s,u,m,g,D,L,P,j,T,A,K]}class pl extends $e{constructor(t){super(),et(this,t,ul,nl,xe,{})}}export{pl as component};
