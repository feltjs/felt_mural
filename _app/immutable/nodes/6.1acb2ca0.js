import{n as $e,e as g,s as O,t as oe,c as b,a as S,d as k,f as B,b as _e,m as Ee,o as n,y as be,i as ae,g as r,I as Q,h as Qe,j as Ye,r as et,a8 as wt,J as xe,aa as Ze,A as je,ad as Mt,G as ye,E as Ke,ae as ke,ab as nt,K as Et,L as Lt,af as Ge,ag as ut}from"../chunks/scheduler.a4956b2f.js";import{S as tt,i as lt,g as Tt,e as It,a as Le,t as Te,c as Ae,b as De,m as Pe,d as Se,h as we}from"../chunks/index.23824295.js";import{G as Ut,a as rt,S as At,T as Dt,r as ge,C as Pt}from"../chunks/Scaled.6fe18d09.js";import{a as St}from"../chunks/tome.cd90b044.js";import{g as Ot}from"../chunks/globals.7f7f1b26.js";import{e as Je,u as at,o as Nt,d as Bt}from"../chunks/each.cd1e893b.js";import{w as ot}from"../chunks/index.c6fd790a.js";import{D as He,a as Vt,t as st,b as zt,S as Ft,u as Rt,p as _t,c as Gt,d as Ht,M as Yt,e as ft}from"../chunks/Mural_Item.d983e857.js";function jt(l){let e;return{c(){e=oe("üëÅ")},l(t){e=_e(t,"üëÅ")},m(t,s){ae(t,e,s)},d(t){t&&k(e)}}}function Jt(l){let e;return{c(){e=oe("‚Ä¢")},l(t){e=_e(t,"‚Ä¢")},m(t,s){ae(t,e,s)},d(t){t&&k(e)}}}function dt(l){let e,t=st(l[7]).length+"",s,d,u,f="points";return{c(){e=g("div"),s=oe(t),d=O(),u=g("small"),u.textContent=f},l(_){e=b(_,"DIV",{});var o=S(e);s=_e(o,t),d=B(o),u=b(o,"SMALL",{"data-svelte-h":!0}),Ee(u)!=="svelte-les35l"&&(u.textContent=f),o.forEach(k)},m(_,o){ae(_,e,o),r(e,s),r(e,d),r(e,u)},p(_,o){o[0]&128&&t!==(t=st(_[7]).length+"")&&Qe(s,t)},d(_){_&&k(e)}}}function ct(l){let e;return{c(){e=oe(`no
				`)},l(t){e=_e(t,`no
				`)},m(t,s){ae(t,e,s)},d(t){t&&k(e)}}}function mt(l){let e,t,s="x",d,u,f,_,o,m,T,c,a,h,F="y",w,P,H,A,C,Y,D,E,V,X,J="radius",x,j,q,p,y,U,z,R,K,$;return{c(){e=g("label"),t=g("small"),t.textContent=s,d=O(),u=g("input"),_=O(),o=g("input"),c=O(),a=g("label"),h=g("small"),h.textContent=F,w=O(),P=g("input"),A=O(),C=g("input"),E=O(),V=g("label"),X=g("small"),X.textContent=J,x=O(),j=g("input"),y=O(),U=g("input"),this.h()},l(I){e=b(I,"LABEL",{title:!0,class:!0});var N=S(e);t=b(N,"SMALL",{class:!0,"data-svelte-h":!0}),Ee(t)!=="svelte-9crtu1"&&(t.textContent=s),d=B(N),u=b(N,"INPUT",{class:!0,type:!0,min:!0,max:!0}),_=B(N),o=b(N,"INPUT",{class:!0,type:!0}),N.forEach(k),c=B(I),a=b(I,"LABEL",{title:!0,class:!0});var W=S(a);h=b(W,"SMALL",{class:!0,"data-svelte-h":!0}),Ee(h)!=="svelte-1aa9kl6"&&(h.textContent=F),w=B(W),P=b(W,"INPUT",{class:!0,type:!0,min:!0,max:!0}),A=B(W),C=b(W,"INPUT",{class:!0,type:!0}),W.forEach(k),E=B(I),V=b(I,"LABEL",{title:!0,class:!0});var v=S(V);X=b(v,"SMALL",{class:!0,"data-svelte-h":!0}),Ee(X)!=="svelte-182540t"&&(X.textContent=J),x=B(v),j=b(v,"INPUT",{class:!0,type:!0,min:!0,max:!0}),y=B(v),U=b(v,"INPUT",{class:!0,type:!0}),v.forEach(k),this.h()},h(){n(t,"class","title"),n(u,"class","item_input svelte-xtk9do"),n(u,"type","range"),u.value=f=l[7].cx,n(u,"min",0),n(u,"max",l[2]),n(o,"class","item_input svelte-xtk9do"),n(o,"type","number"),o.value=m=l[7].cx,n(e,"title",T="modify the "+l[7].type+"'s x position"),n(e,"class","svelte-xtk9do"),n(h,"class","title"),n(P,"class","item_input svelte-xtk9do"),n(P,"type","range"),P.value=H=l[7].cy,n(P,"min",0),n(P,"max",l[3]),n(C,"class","item_input svelte-xtk9do"),n(C,"type","number"),C.value=Y=l[7].cy,n(a,"title",D="modify the "+l[7].type+"'s y position"),n(a,"class","svelte-xtk9do"),n(X,"class","title"),n(j,"class","item_input svelte-xtk9do"),n(j,"type","range"),j.value=q=l[7].radius,n(j,"min",1),n(j,"max",p=l[4]*rt),n(U,"class","item_input svelte-xtk9do"),n(U,"type","number"),U.value=z=l[7].radius,n(V,"title",R="modify the "+l[7].type+"'s radius"),n(V,"class","svelte-xtk9do")},m(I,N){ae(I,e,N),r(e,t),r(e,d),r(e,u),r(e,_),r(e,o),ae(I,c,N),ae(I,a,N),r(a,h),r(a,w),r(a,P),r(a,A),r(a,C),ae(I,E,N),ae(I,V,N),r(V,X),r(V,x),r(V,j),r(V,y),r(V,U),K||($=[Q(u,"input",l[24]),Q(o,"input",l[25]),Q(P,"input",l[26]),Q(C,"input",l[27]),Q(j,"input",l[28]),Q(U,"input",l[29])],K=!0)},p(I,N){N[0]&128&&f!==(f=I[7].cx)&&(u.value=f),N[0]&4&&n(u,"max",I[2]),N[0]&128&&m!==(m=I[7].cx)&&o.value!==m&&(o.value=m),N[0]&128&&T!==(T="modify the "+I[7].type+"'s x position")&&n(e,"title",T),N[0]&128&&H!==(H=I[7].cy)&&(P.value=H),N[0]&8&&n(P,"max",I[3]),N[0]&128&&Y!==(Y=I[7].cy)&&C.value!==Y&&(C.value=Y),N[0]&128&&D!==(D="modify the "+I[7].type+"'s y position")&&n(a,"title",D),N[0]&128&&q!==(q=I[7].radius)&&(j.value=q),N[0]&16&&p!==(p=I[4]*rt)&&n(j,"max",p),N[0]&128&&z!==(z=I[7].radius)&&U.value!==z&&(U.value=z),N[0]&128&&R!==(R="modify the "+I[7].type+"'s radius")&&n(V,"title",R)},d(I){I&&(k(e),k(c),k(a),k(E),k(V)),K=!1,et($)}}}function Kt(l){let e,t,s,d,u,f,_=l[7].type+"",o,m,T,c,a,h="opacity",F,w,P,H,A,C,Y,D,E,V,X,J,x,j,q,p,y,U,z,R,K,$="stroke color",I,N,W,v,le,re,ne,Ce="stroke width",pe,ee,ve,Me,fe,Ie,Oe,Be,ce,he="üóô",i,L;function te(M,G){return M[12]?Jt:jt}let me=te(l),de=me(l),se=l[7].type==="polyline"&&dt(l),Z=(!l[6]||l[11]==="none")&&ct(),ie=l[7].type==="circle"&&mt(l);return{c(){e=g("li"),t=g("button"),de.c(),s=O(),d=g("div"),u=g("div"),f=g("div"),o=oe(_),m=O(),se&&se.c(),T=O(),c=g("label"),a=g("small"),a.textContent=h,F=O(),w=g("input"),H=O(),A=g("input"),Y=O(),D=g("label"),E=g("small"),Z&&Z.c(),V=oe("fill"),X=O(),J=g("input"),j=O(),q=g("input"),z=O(),R=g("label"),K=g("small"),K.textContent=$,I=O(),N=g("input"),le=O(),re=g("label"),ne=g("small"),ne.textContent=Ce,pe=O(),ee=g("input"),Me=O(),fe=g("input"),Oe=O(),ie&&ie.c(),Be=O(),ce=g("button"),ce.textContent=he,this.h()},l(M){e=b(M,"LI",{class:!0,"aria-hidden":!0});var G=S(e);t=b(G,"BUTTON",{class:!0});var Ve=S(t);de.l(Ve),Ve.forEach(k),s=B(G),d=b(G,"DIV",{class:!0});var ue=S(d);u=b(ue,"DIV",{class:!0});var Ue=S(u);f=b(Ue,"DIV",{class:!0});var ze=S(f);o=_e(ze,_),ze.forEach(k),m=B(Ue),se&&se.l(Ue),Ue.forEach(k),T=B(ue),c=b(ue,"LABEL",{class:!0});var Ne=S(c);a=b(Ne,"SMALL",{class:!0,"data-svelte-h":!0}),Ee(a)!=="svelte-12nhgd4"&&(a.textContent=h),F=B(Ne),w=b(Ne,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),H=B(Ne),A=b(Ne,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),Ne.forEach(k),Y=B(ue),D=b(ue,"LABEL",{title:!0,class:!0});var Fe=S(D);E=b(Fe,"SMALL",{class:!0});var it=S(E);Z&&Z.l(it),V=_e(it,"fill"),it.forEach(k),X=B(Fe),J=b(Fe,"INPUT",{type:!0,title:!0,class:!0}),j=B(Fe),q=b(Fe,"INPUT",{class:!0,type:!0}),Fe.forEach(k),z=B(ue),R=b(ue,"LABEL",{title:!0,class:!0});var Xe=S(R);K=b(Xe,"SMALL",{class:!0,"data-svelte-h":!0}),Ee(K)!=="svelte-4jtig2"&&(K.textContent=$),I=B(Xe),N=b(Xe,"INPUT",{class:!0,type:!0}),Xe.forEach(k),le=B(ue),re=b(ue,"LABEL",{class:!0});var Re=S(re);ne=b(Re,"SMALL",{class:!0,"data-svelte-h":!0}),Ee(ne)!=="svelte-txngkb"&&(ne.textContent=Ce),pe=B(Re),ee=b(Re,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),Me=B(Re),fe=b(Re,"INPUT",{class:!0,type:!0,step:!0}),Re.forEach(k),Oe=B(ue),ie&&ie.l(ue),ue.forEach(k),Be=B(G),ce=b(G,"BUTTON",{class:!0,"data-svelte-h":!0}),Ee(ce)!=="svelte-1b5liiu"&&(ce.textContent=he),G.forEach(k),this.h()},h(){n(t,"class","icon_button plain deselectable"),be(t,"selected",l[12]),n(f,"class","spaced"),n(u,"class","type svelte-xtk9do"),n(a,"class","title"),n(w,"class","item_input svelte-xtk9do"),n(w,"type","range"),n(w,"min",0),n(w,"max",1),n(w,"step",.01),w.value=l[10],n(w,"title",P="modify the "+l[7].type+"'s opacity"),n(A,"class","item_input svelte-xtk9do"),n(A,"type","number"),n(A,"min",0),n(A,"max",1),n(A,"step",.01),A.value=l[10],n(A,"title",C="modify the "+l[7].type+"'s opacity"),n(c,"class","svelte-xtk9do"),n(E,"class","title"),n(J,"type","checkbox"),J.checked=l[6],n(J,"title",x="the "+l[7].type+"'s fill is "+(l[7].enable_fill?"enabled":"disabled")),n(J,"class","svelte-xtk9do"),n(q,"class","item_input svelte-xtk9do"),n(q,"type","color"),q.disabled=p=!l[6],q.value=y=l[11]==="none"?"#000000":l[11],n(D,"title",U="modify the "+l[7].type+"'s fill color"),n(D,"class","svelte-xtk9do"),n(K,"class","title"),n(N,"class","item_input svelte-xtk9do"),n(N,"type","color"),N.value=W=l[7].stroke??"#000000",n(R,"title",v="modify the "+l[7].type+"'s stroke color"),n(R,"class","svelte-xtk9do"),n(ne,"class","title"),n(ee,"class","item_input svelte-xtk9do"),n(ee,"type","range"),ee.value=ve=l[7].stroke_width??He,n(ee,"min",0),n(ee,"max",l[9]),n(ee,"step",1),n(fe,"class","item_input svelte-xtk9do"),n(fe,"type","number"),fe.value=Ie=l[7].stroke_width??He,n(fe,"step",1),n(re,"class","svelte-xtk9do"),n(d,"class","controls svelte-xtk9do"),n(ce,"class","icon_button plain"),n(e,"class","mural_item_list_item selectable svelte-xtk9do"),n(e,"aria-hidden",""),be(e,"hidden",l[12]),be(e,"selected",l[13])},m(M,G){ae(M,e,G),r(e,t),de.m(t,null),r(e,s),r(e,d),r(d,u),r(u,f),r(f,o),r(u,m),se&&se.m(u,null),r(d,T),r(d,c),r(c,a),r(c,F),r(c,w),r(c,H),r(c,A),r(d,Y),r(d,D),r(D,E),Z&&Z.m(E,null),r(E,V),r(D,X),r(D,J),r(D,j),r(D,q),r(d,z),r(d,R),r(R,K),r(R,I),r(R,N),r(d,le),r(d,re),r(re,ne),r(re,pe),r(re,ee),r(re,Me),r(re,fe),r(d,Oe),ie&&ie.m(d,null),r(e,Be),r(e,ce),i||(L=[Q(t,"click",l[16]),Q(w,"input",l[17]),Q(A,"input",l[18]),Q(J,"input",l[19]),Q(q,"input",l[20]),Q(N,"input",l[21]),Q(ee,"input",l[22]),Q(fe,"input",l[23]),Q(ce,"click",l[30]),Q(e,"click",l[31])],i=!0)},p(M,G){me!==(me=te(M))&&(de.d(1),de=me(M),de&&(de.c(),de.m(t,null))),G[0]&4096&&be(t,"selected",M[12]),G[0]&128&&_!==(_=M[7].type+"")&&Qe(o,_),M[7].type==="polyline"?se?se.p(M,G):(se=dt(M),se.c(),se.m(u,null)):se&&(se.d(1),se=null),G[0]&1024&&(w.value=M[10]),G[0]&128&&P!==(P="modify the "+M[7].type+"'s opacity")&&n(w,"title",P),G[0]&1024&&A.value!==M[10]&&(A.value=M[10]),G[0]&128&&C!==(C="modify the "+M[7].type+"'s opacity")&&n(A,"title",C),!M[6]||M[11]==="none"?Z||(Z=ct(),Z.c(),Z.m(E,V)):Z&&(Z.d(1),Z=null),G[0]&64&&(J.checked=M[6]),G[0]&128&&x!==(x="the "+M[7].type+"'s fill is "+(M[7].enable_fill?"enabled":"disabled"))&&n(J,"title",x),G[0]&64&&p!==(p=!M[6])&&(q.disabled=p),G[0]&2048&&y!==(y=M[11]==="none"?"#000000":M[11])&&(q.value=y),G[0]&128&&U!==(U="modify the "+M[7].type+"'s fill color")&&n(D,"title",U),G[0]&128&&W!==(W=M[7].stroke??"#000000")&&(N.value=W),G[0]&128&&v!==(v="modify the "+M[7].type+"'s stroke color")&&n(R,"title",v),G[0]&128&&ve!==(ve=M[7].stroke_width??He)&&(ee.value=ve),G[0]&512&&n(ee,"max",M[9]),G[0]&128&&Ie!==(Ie=M[7].stroke_width??He)&&fe.value!==Ie&&(fe.value=Ie),M[7].type==="circle"?ie?ie.p(M,G):(ie=mt(M),ie.c(),ie.m(d,null)):ie&&(ie.d(1),ie=null),G[0]&4096&&be(e,"hidden",M[12]),G[0]&8192&&be(e,"selected",M[13])},i:Ye,o:Ye,d(M){M&&k(e),de.d(),se&&se.d(),Z&&Z.d(),ie&&ie.d(),i=!1,et(L)}}}function qt(l,e,t){let s,d,u,f,_,o,m,T,c,a,h=Ye,F=()=>(h(),h=xe(A,v=>t(7,a=v)),A),w,P=Ye,H=()=>(P(),P=xe(C,v=>t(8,w=v)),C);l.$$.on_destroy.push(()=>h()),l.$$.on_destroy.push(()=>P());let{item:A}=e;F();let{item_selection:C}=e;H();let{width:Y}=e,{height:D}=e;const E=wt(),V=()=>E("action",{type:"update_item",id:a.id,data:{hidden:!a.hidden}}),X=v=>E("action",{type:"update_item",id:a.id,data:{opacity:Number(v.currentTarget.value)}}),J=v=>E("action",{type:"update_item",id:a.id,data:{opacity:Number(v.currentTarget.value)}}),x=v=>E("action",{type:"update_item",id:a.id,data:{enable_fill:v.currentTarget.checked,fill:u??(v.currentTarget.checked?zt:void 0)}}),j=v=>E("action",{type:"update_item",id:a.id,data:{fill:v.currentTarget.value}}),q=v=>E("action",{type:"update_item",id:a.id,data:{stroke:v.currentTarget.value}}),p=v=>E("action",{type:"update_item",id:a.id,data:{stroke_width:Number(v.currentTarget.value)}}),y=v=>E("action",{type:"update_item",id:a.id,data:{stroke_width:Number(v.currentTarget.value)}}),U=v=>E("action",{type:"update_item",id:a.id,data:{cx:Number(v.currentTarget.value)}}),z=v=>E("action",{type:"update_item",id:a.id,data:{cx:Number(v.currentTarget.value)}}),R=v=>E("action",{type:"update_item",id:a.id,data:{cy:Number(v.currentTarget.value)}}),K=v=>E("action",{type:"update_item",id:a.id,data:{cy:Number(v.currentTarget.value)}}),$=v=>E("action",{type:"update_item",id:a.id,data:{radius:Number(v.currentTarget.value)}}),I=v=>E("action",{type:"update_item",id:a.id,data:{radius:Number(v.currentTarget.value)}}),N=()=>E("action",{type:"remove_item",id:a.id}),W=()=>Ze(C,w=A,w);return l.$$set=v=>{"item"in v&&F(t(0,A=v.item)),"item_selection"in v&&H(t(1,C=v.item_selection)),"width"in v&&t(2,Y=v.width),"height"in v&&t(3,D=v.height)},l.$$.update=()=>{l.$$.dirty[0]&257&&t(13,s=w===A),l.$$.dirty[0]&128&&t(6,{enable_fill:d,fill:u,hidden:f,opacity:_}=a,d,(t(5,u),t(7,a)),(t(12,f),t(7,a)),(t(15,_),t(7,a))),l.$$.dirty[0]&96&&t(11,o=d?u??Vt:"none"),l.$$.dirty[0]&32768&&t(10,m=_??1),l.$$.dirty[0]&12&&t(4,T=Math.min(Y,D)),l.$$.dirty[0]&16&&t(9,c=T*Ut)},[A,C,Y,D,T,u,d,a,w,c,m,o,f,s,E,_,V,X,J,x,j,q,p,y,U,z,R,K,$,I,N,W]}class Wt extends tt{constructor(e){super(),lt(this,e,qt,Kt,$e,{item:0,item_selection:1,width:2,height:3},null,[-1,-1])}}function ht(l,e,t){const s=l.slice();return s[6]=e[t],s}function pt(l,e){let t,s,d;return s=new Wt({props:{item:e[6],item_selection:e[0],width:e[1],height:e[2]}}),s.$on("action",e[5]),{key:l,first:null,c(){t=je(),Ae(s.$$.fragment),this.h()},l(u){t=je(),De(s.$$.fragment,u),this.h()},h(){this.first=t},m(u,f){ae(u,t,f),Pe(s,u,f),d=!0},p(u,f){e=u;const _={};f&8&&(_.item=e[6]),f&1&&(_.item_selection=e[0]),f&2&&(_.width=e[1]),f&4&&(_.height=e[2]),s.$set(_)},i(u){d||(Le(s.$$.fragment,u),d=!0)},o(u){Te(s.$$.fragment,u),d=!1},d(u){u&&k(t),Se(s,u)}}}function Qt(l){let e,t=[],s=new Map,d,u=Je(l[3]);const f=_=>_[6];for(let _=0;_<u.length;_+=1){let o=ht(l,u,_),m=f(o);s.set(m,t[_]=pt(m,o))}return{c(){e=g("ul");for(let _=0;_<t.length;_+=1)t[_].c();this.h()},l(_){e=b(_,"UL",{class:!0});var o=S(e);for(let m=0;m<t.length;m+=1)t[m].l(o);o.forEach(k),this.h()},h(){n(e,"class","width_md svelte-1gkqiw5")},m(_,o){ae(_,e,o);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);d=!0},p(_,[o]){o&15&&(u=Je(_[3]),Tt(),t=at(t,o,f,1,_,u,s,e,Nt,pt,null,ht),It())},i(_){if(!d){for(let o=0;o<u.length;o+=1)Le(t[o]);d=!0}},o(_){for(let o=0;o<t.length;o+=1)Te(t[o]);d=!1},d(_){_&&k(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Xt(l,e,t){let s,{items:d}=e,{item_selection:u}=e,{width:f}=e,{height:_}=e;function o(m){Mt.call(this,l,m)}return l.$$set=m=>{"items"in m&&t(4,d=m.items),"item_selection"in m&&t(0,u=m.item_selection),"width"in m&&t(1,f=m.width),"height"in m&&t(2,_=m.height)},l.$$.update=()=>{l.$$.dirty&16&&t(3,s=d.slice().reverse())},[u,f,_,s,d,o]}class Zt extends tt{constructor(e){super(),lt(this,e,Xt,Qt,$e,{items:4,item_selection:0,width:1,height:2})}}const{Map:Ct}=Ot;function vt(l,e,t){const s=l.slice();return s[47]=e[t],s}function gt(l,e,t){const s=l.slice();return s[50]=e[t],s}function bt(l,e){let t,s,d;return s=new Yt({props:{item:e[50]}}),{key:l,first:null,c(){t=je(),Ae(s.$$.fragment),this.h()},l(u){t=je(),De(s.$$.fragment,u),this.h()},h(){this.first=t},m(u,f){ae(u,t,f),Pe(s,u,f),d=!0},p(u,f){e=u;const _={};f[0]&8&&(_.item=e[50]),s.$set(_)},i(u){d||(Le(s.$$.fragment,u),d=!0)},o(u){Te(s.$$.fragment,u),d=!1},d(u){u&&k(t),Se(s,u)}}}function yt(l){let e,t,s,d,u;return{c(){e=Et("line"),this.h()},l(f){e=Lt(f,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),S(e).forEach(k),this.h()},h(){n(e,"x1",t=l[13].at(-2)),n(e,"y1",s=l[13].at(-1)),n(e,"x2",l[1]),n(e,"y2",l[2]),n(e,"stroke",d=l[11].stroke??ft),n(e,"stroke-width",u=l[11].stroke_width??He)},m(f,_){ae(f,e,_)},p(f,_){_[0]&8192&&t!==(t=f[13].at(-2))&&n(e,"x1",t),_[0]&8192&&s!==(s=f[13].at(-1))&&n(e,"y1",s),_[0]&2&&n(e,"x2",f[1]),_[0]&4&&n(e,"y2",f[2]),_[0]&2048&&d!==(d=f[11].stroke??ft)&&n(e,"stroke",d),_[0]&2048&&u!==(u=f[11].stroke_width??He)&&n(e,"stroke-width",u)},d(f){f&&k(e)}}}function xt(l){var m,T;let e,t=[],s=new Ct,d,u,f=Je(l[3]);const _=c=>c[50];for(let c=0;c<f.length;c+=1){let a=gt(l,f,c),h=_(a);s.set(h,t[c]=bt(h,a))}let o=l[4]&&!l[0]&&l[6]==="polyline"&&((m=l[11])==null?void 0:m.type)==="polyline"&&((T=l[13])==null?void 0:T.length)&&yt(l);return{c(){e=Et("svg");for(let c=0;c<t.length;c+=1)t[c].c();d=je(),o&&o.c(),this.h()},l(c){e=Lt(c,"svg",{class:!0});var a=S(e);for(let h=0;h<t.length;h+=1)t[h].l(a);d=je(),o&&o.l(a),a.forEach(k),this.h()},h(){n(e,"class","svelte-tev7zh")},m(c,a){ae(c,e,a);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);r(e,d),o&&o.m(e,null),u=!0},p(c,a){var h,F;a[0]&8&&(f=Je(c[3]),Tt(),t=at(t,a,_,1,c,f,s,e,Nt,bt,d,gt),It()),c[4]&&!c[0]&&c[6]==="polyline"&&((h=c[11])==null?void 0:h.type)==="polyline"&&((F=c[13])!=null&&F.length)?o?o.p(c,a):(o=yt(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(c){if(!u){for(let a=0;a<f.length;a+=1)Le(t[a]);u=!0}},o(c){for(let a=0;a<t.length;a+=1)Te(t[a]);u=!1},d(c){c&&k(e);for(let a=0;a<t.length;a+=1)t[a].d();o&&o.d()}}}function $t(l){let e,t,s,d,u,f;function _(a){l[31](a)}function o(a){l[32](a)}function m(a){l[33](a)}function T(a){l[34](a)}let c={scale:l[5],cancel_on_leave:!1,$$slots:{default:[xt]},$$scope:{ctx:l}};return l[4]!==void 0&&(c.pointing=l[4]),l[0]!==void 0&&(c.pointer_down=l[0]),l[1]!==void 0&&(c.pointer_x=l[1]),l[2]!==void 0&&(c.pointer_y=l[2]),e=new Ft({props:c}),ye.push(()=>we(e,"pointing",_)),ye.push(()=>we(e,"pointer_down",o)),ye.push(()=>we(e,"pointer_x",m)),ye.push(()=>we(e,"pointer_y",T)),{c(){Ae(e.$$.fragment)},l(a){De(e.$$.fragment,a)},m(a,h){Pe(e,a,h),f=!0},p(a,h){const F={};h[0]&32&&(F.scale=a[5]),h[0]&10335|h[1]&4194304&&(F.$$scope={dirty:h,ctx:a}),!t&&h[0]&16&&(t=!0,F.pointing=a[4],ke(()=>t=!1)),!s&&h[0]&1&&(s=!0,F.pointer_down=a[0],ke(()=>s=!1)),!d&&h[0]&2&&(d=!0,F.pointer_x=a[1],ke(()=>d=!1)),!u&&h[0]&4&&(u=!0,F.pointer_y=a[2],ke(()=>u=!1)),e.$set(F)},i(a){f||(Le(e.$$.fragment,a),f=!0)},o(a){Te(e.$$.fragment,a),f=!1},d(a){Se(e,a)}}}function kt(l,e){let t,s=e[47]+"",d,u,f,_;function o(){return e[36](e[47])}return{key:l,first:null,c(){t=g("button"),d=oe(s),u=O(),this.h()},l(m){t=b(m,"BUTTON",{});var T=S(t);d=_e(T,s),u=B(T),T.forEach(k),this.h()},h(){be(t,"selected",e[15]&&e[6]===e[47]),this.first=t},m(m,T){ae(m,t,T),r(t,d),r(t,u),f||(_=Q(t,"click",o),f=!0)},p(m,T){e=m,T[0]&512&&s!==(s=e[47]+"")&&Qe(d,s),T[0]&33344&&be(t,"selected",e[15]&&e[6]===e[47])},d(m){m&&k(t),f=!1,_()}}}function el(l){let e,t,s,d,u,f,_,o=[],m=new Ct,T,c,a,h="import data",F,w,P,H,A,C,Y=`${l[7]}px`,D=`${l[8]}px`,E,V,X;function J(p){l[35](p)}let x={width:l[7],height:l[8],$$slots:{default:[$t]},$$scope:{ctx:l}};l[5]!==void 0&&(x.scale=l[5]),s=new At({props:x}),ye.push(()=>we(s,"scale",J));let j=Je(l[9]);const q=p=>p[47];for(let p=0;p<j.length;p+=1){let y=vt(l,j,p),U=q(y);m.set(U,o[p]=kt(U,y))}return C=new Zt({props:{items:l[3],item_selection:l[10],width:l[7],height:l[8]}}),C.$on("action",l[38]),{c(){e=g("div"),t=g("div"),Ae(s.$$.fragment),u=O(),f=g("div"),_=g("div");for(let p=0;p<o.length;p+=1)o[p].c();T=O(),c=g("div"),a=g("button"),a.textContent=h,F=O(),w=g("button"),P=oe("clear all"),A=O(),Ae(C.$$.fragment),this.h()},l(p){e=b(p,"DIV",{class:!0});var y=S(e);t=b(y,"DIV",{class:!0});var U=S(t);De(s.$$.fragment,U),U.forEach(k),u=B(y),f=b(y,"DIV",{class:!0});var z=S(f);_=b(z,"DIV",{class:!0});var R=S(_);for(let I=0;I<o.length;I+=1)o[I].l(R);R.forEach(k),T=B(z),c=b(z,"DIV",{class:!0});var K=S(c);a=b(K,"BUTTON",{"data-svelte-h":!0}),Ee(a)!=="svelte-c3zmzf"&&(a.textContent=h),F=B(K),w=b(K,"BUTTON",{});var $=S(w);P=_e($,"clear all"),$.forEach(k),K.forEach(k),z.forEach(k),A=B(y),De(C.$$.fragment,y),y.forEach(k),this.h()},h(){n(t,"class","content svelte-tev7zh"),n(_,"class","row"),w.disabled=H=!l[3].length,n(c,"class","row"),n(f,"class","controls svelte-tev7zh"),n(e,"class","mural svelte-tev7zh"),be(e,"active",l[0]),Ke(e,"--width",Y),Ke(e,"--height",D)},m(p,y){ae(p,e,y),r(e,t),Pe(s,t,null),r(e,u),r(e,f),r(f,_);for(let U=0;U<o.length;U+=1)o[U]&&o[U].m(_,null);r(f,T),r(f,c),r(c,a),r(c,F),r(c,w),r(w,P),r(e,A),Pe(C,e,null),E=!0,V||(X=[Q(a,"click",l[17]),Q(w,"click",l[37])],V=!0)},p(p,y){const U={};y[0]&128&&(U.width=p[7]),y[0]&256&&(U.height=p[8]),y[0]&10367|y[1]&4194304&&(U.$$scope={dirty:y,ctx:p}),!d&&y[0]&32&&(d=!0,U.scale=p[5],ke(()=>d=!1)),s.$set(U),y[0]&37440&&(j=Je(p[9]),o=at(o,y,q,1,p,j,m,_,Bt,kt,null,vt)),(!E||y[0]&8&&H!==(H=!p[3].length))&&(w.disabled=H);const z={};y[0]&8&&(z.items=p[3]),y[0]&1024&&(z.item_selection=p[10]),y[0]&128&&(z.width=p[7]),y[0]&256&&(z.height=p[8]),C.$set(z),(!E||y[0]&1)&&be(e,"active",p[0]),y[0]&128&&Y!==(Y=`${p[7]}px`)&&Ke(e,"--width",Y),y[0]&256&&D!==(D=`${p[8]}px`)&&Ke(e,"--height",D)},i(p){E||(Le(s.$$.fragment,p),Le(C.$$.fragment,p),E=!0)},o(p){Te(s.$$.fragment,p),Te(C.$$.fragment,p),E=!1},d(p){p&&k(e),Se(s);for(let y=0;y<o.length;y+=1)o[y].d();Se(C),V=!1,et(X)}}}function tl(l,e,t){let s,d,u,f,_=Ye,o=()=>(_(),_=xe(d,i=>t(11,f=i)),d),m,T=Ye,c=()=>(T(),T=xe(v,i=>t(12,m=i)),v);l.$$.on_destroy.push(()=>_()),l.$$.on_destroy.push(()=>T());const a=wt();let{items:h=[]}=e,{width:F}=e,{height:w}=e,{pointing:P=void 0}=e,{pointer_down:H=void 0}=e,{pointer_x:A=void 0}=e,{pointer_y:C=void 0}=e,{scale:Y=void 0}=e;const D=()=>{const i=W==="pen"||W==="polyline"?Gt(U,z,R,K,y):W==="circle"?Ht(A,C,$,U,z,R,K,y):null;return i?(I(i),i):null};let{add_item:E=(i,L)=>i.concat(L)}=e,{update_item:V=(i,L)=>Rt(i,L)}=e,{select_item_to_draw:X=i=>m||i.at(-1)}=e,{remove_item:J=(i,L)=>i.filter(te=>te!==L)}=e,{remove_all_items:x=i=>[]}=e;const j=new Map,q=i=>{switch(i.type){case"add_item":{const L=ot(i.item);j.set(i.item.id,L),t(3,h=E(h,L,i.item.id));break}case"update_item":{const L=j.get(i.id);if(!L)return;V(L,i.data);break}case"remove_item":{const L=j.get(i.id);if(!L)return;j.delete(i.id),t(3,h=J(h,L,i.id));break}case"remove_all_items":{j.clear(),t(3,h=x(h));break}}},p=i=>{a("action",i),q(i)};let{selected_opacity:y=void 0}=e,{selected_fill:U=void 0}=e,{selected_enable_fill:z=void 0}=e,{selected_stroke:R=void 0}=e,{selected_stroke_width:K=void 0}=e,{selected_radius:$=void 0}=e;const I=i=>{t(18,y=i.opacity),t(19,U=i.fill),t(20,z=i.enable_fill),t(21,R=i.stroke),t(22,K=i.stroke_width),i.type==="circle"&&t(23,$=i.radius)};let{brushes:N=["pen","polyline","circle"]}=e,{selected_brush:W=N[0]}=e,{item_selection:v=ot(null)}=e;c();let le=!1;const re=()=>{if(le||(t(30,le=!0),m))return;const i=D();i&&(p({type:"add_item",item:i}),W==="polyline"&&Ze(v,m=h.find(L=>nt(L).id===i.id)||null,m))},ne=()=>{le&&t(30,le=!1)},Ce=(i,L)=>{const te=X(h);if(!te)return;const{id:me,type:de}=nt(te);de==="polyline"&&p({type:"update_item",id:me,data:{append_points:[_t.x(i),_t.y(L)]}})},pe=()=>JSON.stringify(h.map(i=>nt(i))),ee=()=>{const i=prompt("copy and paste this data to save and share your murals:",pe());if(!i)return;let L;try{L=JSON.parse(i)}catch{alert("failed to parse the data, it may be too large for this hacky implementation");return}p({type:"remove_all_items"});for(const te of L)p({type:"add_item",item:te})};function ve(i){P=i,t(4,P)}function Me(i){H=i,t(0,H)}function fe(i){A=i,t(1,A)}function Ie(i){C=i,t(2,C)}function Oe(i){Y=i,t(5,Y)}const Be=i=>{Ze(v,m=null,m),t(6,W=i)},ce=()=>{Ze(v,m=null,m),p({type:"remove_all_items"})},he=i=>p(i.detail);return l.$$set=i=>{"items"in i&&t(3,h=i.items),"width"in i&&t(7,F=i.width),"height"in i&&t(8,w=i.height),"pointing"in i&&t(4,P=i.pointing),"pointer_down"in i&&t(0,H=i.pointer_down),"pointer_x"in i&&t(1,A=i.pointer_x),"pointer_y"in i&&t(2,C=i.pointer_y),"scale"in i&&t(5,Y=i.scale),"add_item"in i&&t(24,E=i.add_item),"update_item"in i&&t(25,V=i.update_item),"select_item_to_draw"in i&&t(26,X=i.select_item_to_draw),"remove_item"in i&&t(27,J=i.remove_item),"remove_all_items"in i&&t(28,x=i.remove_all_items),"selected_opacity"in i&&t(18,y=i.selected_opacity),"selected_fill"in i&&t(19,U=i.selected_fill),"selected_enable_fill"in i&&t(20,z=i.selected_enable_fill),"selected_stroke"in i&&t(21,R=i.selected_stroke),"selected_stroke_width"in i&&t(22,K=i.selected_stroke_width),"selected_radius"in i&&t(23,$=i.selected_radius),"brushes"in i&&t(9,N=i.brushes),"selected_brush"in i&&t(6,W=i.selected_brush),"item_selection"in i&&c(t(10,v=i.item_selection))},l.$$.update=()=>{l.$$.dirty[0]&1&&(H?re():H===!1&&ne()),l.$$.dirty[0]&1073741830&&le&&A!==void 0&&C!==void 0&&Ce(A,C),l.$$.dirty[0]&4096&&t(15,s=m===null),l.$$.dirty[0]&4096&&o(t(14,d=m)),l.$$.dirty[0]&2048&&t(13,u=(f==null?void 0:f.type)==="polyline"?st(f):void 0),l.$$.dirty[0]&2048&&f&&I(f)},[H,A,C,h,P,Y,W,F,w,N,v,f,m,u,d,s,p,ee,y,U,z,R,K,$,E,V,X,J,x,q,le,ve,Me,fe,Ie,Oe,Be,ce,he]}class ll extends tt{constructor(e){super(),lt(this,e,tl,el,$e,{items:3,width:7,height:8,pointing:4,pointer_down:0,pointer_x:1,pointer_y:2,scale:5,add_item:24,update_item:25,select_item_to_draw:26,remove_item:27,remove_all_items:28,handle_action:29,selected_opacity:18,selected_fill:19,selected_enable_fill:20,selected_stroke:21,selected_stroke_width:22,selected_radius:23,brushes:9,selected_brush:6,item_selection:10},null,[-1,-1])}get handle_action(){return this.$$.ctx[29]}}function il(l){let e,t,s,d,u,f,_,o,m,T,c,a,h,F,w,P,H,A="<code>--mural_bg</code>",C,Y,D,E,V,X,J,x=ge(l[0],1)+"",j,q,p,y,U,z,R,K,$,I=ge(l[1],1)+"",N,W,v,le,re,ne,Ce,pe,ee,ve,Me;function fe(i){l[10](i)}function Ie(i){l[11](i)}function Oe(i){l[12](i)}function Be(i){l[13](i)}function ce(i){l[14](i)}let he={width:l[0],height:l[1]};return l[7]!==void 0&&(he.items=l[7]),l[3]!==void 0&&(he.scale=l[3]),l[4]!==void 0&&(he.pointer_down=l[4]),l[5]!==void 0&&(he.pointer_x=l[5]),l[6]!==void 0&&(he.pointer_y=l[6]),s=new ll({props:he}),ye.push(()=>we(s,"items",fe)),ye.push(()=>we(s,"scale",Ie)),ye.push(()=>we(s,"pointer_down",Oe)),ye.push(()=>we(s,"pointer_x",Be)),ye.push(()=>we(s,"pointer_y",ce)),c=new Pt({props:{content:`<Mural
	width="${l[0]}px"
	height="${l[1]}px"
	scale={${l[3]&&ge(l[3],3)}}
	pointer_x={${l[5]&&ge(l[5],1)}}
	pointer_y={${l[6]&&ge(l[6],1)}}
	pointer_down={${l[4]}}
>
	<Mural_Item_List
		items={[ ... ]}
	/>
</Mural>`}}),{c(){e=g("div"),t=g("div"),Ae(s.$$.fragment),m=O(),T=g("section"),Ae(c.$$.fragment),a=O(),h=g("section"),F=g("form"),w=g("fieldset"),P=g("label"),H=g("div"),H.innerHTML=A,C=O(),Y=g("input"),D=O(),E=g("label"),V=g("div"),X=oe("width "),J=g("code"),j=oe(x),q=oe("px"),p=O(),y=g("input"),U=O(),z=g("label"),R=g("div"),K=oe("height "),$=g("code"),N=oe(I),W=oe("px"),v=O(),le=g("input"),re=O(),ne=g("button"),Ce=oe("reset settings"),this.h()},l(i){e=b(i,"DIV",{class:!0});var L=S(e);t=b(L,"DIV",{class:!0});var te=S(t);De(s.$$.fragment,te),te.forEach(k),m=B(L),T=b(L,"SECTION",{class:!0});var me=S(T);De(c.$$.fragment,me),me.forEach(k),a=B(L),h=b(L,"SECTION",{class:!0});var de=S(h);F=b(de,"FORM",{});var se=S(F);w=b(se,"FIELDSET",{});var Z=S(w);P=b(Z,"LABEL",{});var ie=S(P);H=b(ie,"DIV",{class:!0,"data-svelte-h":!0}),Ee(H)!=="svelte-iv5je9"&&(H.innerHTML=A),C=B(ie),Y=b(ie,"INPUT",{type:!0}),ie.forEach(k),D=B(Z),E=b(Z,"LABEL",{});var M=S(E);V=b(M,"DIV",{class:!0});var G=S(V);X=_e(G,"width "),J=b(G,"CODE",{});var Ve=S(J);j=_e(Ve,x),q=_e(Ve,"px"),Ve.forEach(k),G.forEach(k),p=B(M),y=b(M,"INPUT",{type:!0,min:!0,max:!0}),M.forEach(k),U=B(Z),z=b(Z,"LABEL",{});var ue=S(z);R=b(ue,"DIV",{class:!0});var Ue=S(R);K=_e(Ue,"height "),$=b(Ue,"CODE",{});var ze=S($);N=_e(ze,I),W=_e(ze,"px"),ze.forEach(k),Ue.forEach(k),v=B(ue),le=b(ue,"INPUT",{type:!0,min:!0,max:!0}),ue.forEach(k),re=B(Z),ne=b(Z,"BUTTON",{type:!0,class:!0});var Ne=S(ne);Ce=_e(Ne,"reset settings"),Ne.forEach(k),Z.forEach(k),se.forEach(k),de.forEach(k),L.forEach(k),this.h()},h(){n(t,"class","spaced"),n(T,"class","svelte-17r4wzu"),n(H,"class","title"),n(Y,"type","color"),n(V,"class","title"),n(y,"type","range"),n(y,"min",0),n(y,"max",qe*2),n(R,"class","title"),n(le,"type","range"),n(le,"min",0),n(le,"max",We),n(ne,"type","button"),ne.disabled=pe=l[4]===void 0&&l[5]===void 0&&l[6]===void 0&&l[0]===qe&&l[1]===We&&l[2]===void 0,n(ne,"class","svelte-17r4wzu"),n(h,"class","markup svelte-17r4wzu"),n(e,"class","box width_full"),Ke(e,"--mural_bg",al)},m(i,L){ae(i,e,L),r(e,t),Pe(s,t,null),r(e,m),r(e,T),Pe(c,T,null),r(e,a),r(e,h),r(h,F),r(F,w),r(w,P),r(P,H),r(P,C),r(P,Y),Ge(Y,l[2]),r(w,D),r(w,E),r(E,V),r(V,X),r(V,J),r(J,j),r(J,q),r(E,p),r(E,y),Ge(y,l[0]),r(w,U),r(w,z),r(z,R),r(R,K),r(R,$),r($,N),r($,W),r(z,v),r(z,le),Ge(le,l[1]),r(w,re),r(w,ne),r(ne,Ce),ee=!0,ve||(Me=[Q(Y,"input",l[15]),Q(y,"change",l[16]),Q(y,"input",l[16]),Q(le,"change",l[17]),Q(le,"input",l[17]),Q(ne,"click",l[9])],ve=!0)},p(i,L){const te={};L&1&&(te.width=i[0]),L&2&&(te.height=i[1]),!d&&L&128&&(d=!0,te.items=i[7],ke(()=>d=!1)),!u&&L&8&&(u=!0,te.scale=i[3],ke(()=>u=!1)),!f&&L&16&&(f=!0,te.pointer_down=i[4],ke(()=>f=!1)),!_&&L&32&&(_=!0,te.pointer_x=i[5],ke(()=>_=!1)),!o&&L&64&&(o=!0,te.pointer_y=i[6],ke(()=>o=!1)),s.$set(te);const me={};L&123&&(me.content=`<Mural
	width="${i[0]}px"
	height="${i[1]}px"
	scale={${i[3]&&ge(i[3],3)}}
	pointer_x={${i[5]&&ge(i[5],1)}}
	pointer_y={${i[6]&&ge(i[6],1)}}
	pointer_down={${i[4]}}
>
	<Mural_Item_List
		items={[ ... ]}
	/>
</Mural>`),c.$set(me),L&4&&Ge(Y,i[2]),(!ee||L&1)&&x!==(x=ge(i[0],1)+"")&&Qe(j,x),L&1&&Ge(y,i[0]),(!ee||L&2)&&I!==(I=ge(i[1],1)+"")&&Qe(N,I),L&2&&Ge(le,i[1]),(!ee||L&119&&pe!==(pe=i[4]===void 0&&i[5]===void 0&&i[6]===void 0&&i[0]===qe&&i[1]===We&&i[2]===void 0))&&(ne.disabled=pe)},i(i){ee||(Le(s.$$.fragment,i),Le(c.$$.fragment,i),ee=!0)},o(i){Te(s.$$.fragment,i),Te(c.$$.fragment,i),ee=!1},d(i){i&&k(e),Se(s),Se(c),ve=!1,et(Me)}}}function nl(l){let e,t;return e=new Dt({props:{tome:l[8],$$slots:{default:[il]},$$scope:{ctx:l}}}),{c(){Ae(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,d){Pe(e,s,d),t=!0},p(s,[d]){const u={};d&262399&&(u.$$scope={dirty:d,ctx:s}),e.$set(u)},i(s){t||(Le(e.$$.fragment,s),t=!0)},o(s){Te(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}const sl="Mural",qe=750,We=512,al="var(--bg)";function ul(l,e,t){const s=St(sl);let d=qe,u=We,f,_,o,m,T;const c=()=>{t(4,o=void 0),t(5,m=void 0),t(6,T=void 0),t(0,d=qe),t(1,u=We),t(2,f=void 0)};let a=[];function h(D){a=D,t(7,a)}function F(D){_=D,t(3,_)}function w(D){o=D,t(4,o)}function P(D){m=D,t(5,m)}function H(D){T=D,t(6,T)}function A(){f=this.value,t(2,f)}function C(){d=ut(this.value),t(0,d)}function Y(){u=ut(this.value),t(1,u)}return[d,u,f,_,o,m,T,a,s,c,h,F,w,P,H,A,C,Y]}class pl extends tt{constructor(e){super(),lt(this,e,ul,nl,$e,{})}}export{pl as component};
