import{n as Fe,e as k,s as V,t as ee,c as w,a as B,d as v,f as z,b as te,m as we,o as f,y as oe,i as K,g as o,I as $,h as Te,j as Se,r as Ve,a8 as _t,J as Xe,aa as Ue,E as De,A as Ae,ad as yt,G as ue,ae as fe,ab as $e,K as dt,L as mt,af as Le,ag as xe}from"../chunks/scheduler.27454928.js";import{S as ze,i as Re,g as ht,e as pt,a as _e,t as de,c as be,b as ge,m as Ie,d as ye,h as ce}from"../chunks/index.d1757bfb.js";import{r as ae,S as kt,T as wt,C as Et}from"../chunks/Scaled.548fb4ef.js";import{a as Lt}from"../chunks/tome.f774b283.js";import{g as Dt}from"../chunks/globals.7f7f1b26.js";import{e as Me,u as Je,o as vt,d as Tt}from"../chunks/each.2d894c8c.js";import{w as et}from"../chunks/index.a6a5cb79.js";import{D as St,a as At,t as qe,b as Oe,S as Mt,u as Nt,p as tt,c as jt,d as Ct,M as Bt,e as lt}from"../chunks/MuralItem.5101892c.js";function Yt(l){let t;return{c(){t=ee("👁")},l(e){t=te(e,"👁")},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function Pt(l){let t;return{c(){t=ee("•")},l(e){t=te(e,"•")},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function Ut(l){let t,e,i,d,n,_="stroke-width",a,s,u=qe(l[4]).length+"",m,h,c,p,T,P="points",Y,A,y,j,H,U,F,X,O,b,E,g,D,I,J,L,N=(!l[3]||l[7]==="none")&&it();return{c(){t=k("label"),e=k("input"),d=V(),n=k("small"),n.textContent=_,a=V(),s=k("span"),m=ee(u),h=V(),c=k("br"),p=V(),T=k("small"),T.textContent=P,Y=V(),A=k("div"),y=k("div"),j=k("input"),U=V(),F=k("label"),X=k("input"),E=V(),g=k("small"),N&&N.c(),D=ee("fill"),this.h()},l(S){t=w(S,"LABEL",{class:!0});var R=B(t);e=w(R,"INPUT",{class:!0,type:!0}),d=z(R),n=w(R,"SMALL",{"data-svelte-h":!0}),we(n)!=="svelte-1jo13fj"&&(n.textContent=_),R.forEach(v),a=z(S),s=w(S,"SPAN",{class:!0});var x=B(s);m=te(x,u),h=z(x),c=w(x,"BR",{}),p=z(x),T=w(x,"SMALL",{"data-svelte-h":!0}),we(T)!=="svelte-les35l"&&(T.textContent=P),x.forEach(v),Y=z(S),A=w(S,"DIV",{class:!0});var ie=B(A);y=w(ie,"DIV",{class:!0});var le=B(y);j=w(le,"INPUT",{type:!0,title:!0,class:!0}),le.forEach(v),U=z(ie),F=w(ie,"LABEL",{title:!0,class:!0});var ne=B(F);X=w(ne,"INPUT",{class:!0,type:!0}),E=z(ne),g=w(ne,"SMALL",{});var Z=B(g);N&&N.l(Z),D=te(Z,"fill"),Z.forEach(v),ne.forEach(v),ie.forEach(v),this.h()},h(){f(e,"class","item-input svelte-lx0erj"),f(e,"type","number"),e.value=i=l[4].strokeWidth??Oe,f(t,"class","svelte-lx0erj"),f(s,"class","content svelte-lx0erj"),f(j,"type","checkbox"),j.checked=l[3],f(j,"title",H="the "+l[4].type+"'s fill is "+(l[4].enableFill?"enabled":"disabled")),f(j,"class","svelte-lx0erj"),f(y,"class","togglable-checkbox-wrapper svelte-lx0erj"),f(X,"class","item-input svelte-lx0erj"),f(X,"type","color"),X.disabled=O=!l[3],X.value=b=l[7]==="none"?"#000000":l[7],f(F,"title",I="modify the "+l[4].type+"'s fill color"),f(F,"class","svelte-lx0erj"),f(A,"class","togglable svelte-lx0erj")},m(S,R){K(S,t,R),o(t,e),o(t,d),o(t,n),K(S,a,R),K(S,s,R),o(s,m),o(s,h),o(s,c),o(s,p),o(s,T),K(S,Y,R),K(S,A,R),o(A,y),o(y,j),o(A,U),o(A,F),o(F,X),o(F,E),o(F,g),N&&N.m(g,null),o(g,D),J||(L=[$(e,"input",l[19]),$(j,"input",l[20]),$(X,"input",l[21])],J=!0)},p(S,R){R&16&&i!==(i=S[4].strokeWidth??Oe)&&e.value!==i&&(e.value=i),R&16&&u!==(u=qe(S[4]).length+"")&&Te(m,u),R&8&&(j.checked=S[3]),R&16&&H!==(H="the "+S[4].type+"'s fill is "+(S[4].enableFill?"enabled":"disabled"))&&f(j,"title",H),R&8&&O!==(O=!S[3])&&(X.disabled=O),R&128&&b!==(b=S[7]==="none"?"#000000":S[7])&&(X.value=b),!S[3]||S[7]==="none"?N||(N=it(),N.c(),N.m(g,D)):N&&(N.d(1),N=null),R&16&&I!==(I="modify the "+S[4].type+"'s fill color")&&f(F,"title",I)},d(S){S&&(v(t),v(a),v(s),v(Y),v(A)),N&&N.d(),J=!1,Ve(L)}}}function Xt(l){let t,e,i,d,n,_="x",a,s,u,m,h,c,p,T="y",P,Y,A,y,j,H,U,F="radius",X,O,b,E,g,D,I,J,L,N,S,R,x,ie,le,ne,Z,he,G=(!l[3]||l[7]==="none")&&nt();return{c(){t=k("label"),e=k("input"),d=V(),n=k("small"),n.textContent=_,s=V(),u=k("label"),m=k("input"),c=V(),p=k("small"),p.textContent=T,Y=V(),A=k("label"),y=k("input"),H=V(),U=k("small"),U.textContent=F,O=V(),b=k("div"),E=V(),g=k("div"),D=k("div"),I=k("input"),L=V(),N=k("label"),S=k("input"),ie=V(),le=k("small"),G&&G.c(),ne=ee("fill"),this.h()},l(C){t=w(C,"LABEL",{title:!0,class:!0});var W=B(t);e=w(W,"INPUT",{class:!0,type:!0}),d=z(W),n=w(W,"SMALL",{"data-svelte-h":!0}),we(n)!=="svelte-il6oia"&&(n.textContent=_),W.forEach(v),s=z(C),u=w(C,"LABEL",{title:!0,class:!0});var se=B(u);m=w(se,"INPUT",{class:!0,type:!0}),c=z(se),p=w(se,"SMALL",{"data-svelte-h":!0}),we(p)!=="svelte-urgvm9"&&(p.textContent=T),se.forEach(v),Y=z(C),A=w(C,"LABEL",{title:!0,class:!0});var r=B(A);y=w(r,"INPUT",{class:!0,type:!0}),H=z(r),U=w(r,"SMALL",{"data-svelte-h":!0}),we(U)!=="svelte-1uimsee"&&(U.textContent=F),r.forEach(v),O=z(C),b=w(C,"DIV",{}),B(b).forEach(v),E=z(C),g=w(C,"DIV",{class:!0});var q=B(g);D=w(q,"DIV",{class:!0});var me=B(D);I=w(me,"INPUT",{type:!0,title:!0,class:!0}),me.forEach(v),L=z(q),N=w(q,"LABEL",{class:!0});var pe=B(N);S=w(pe,"INPUT",{class:!0,type:!0}),ie=z(pe),le=w(pe,"SMALL",{});var ke=B(le);G&&G.l(ke),ne=te(ke,"fill"),ke.forEach(v),pe.forEach(v),q.forEach(v),this.h()},h(){f(e,"class","item-input svelte-lx0erj"),f(e,"type","number"),e.value=i=l[4].cx,f(t,"title",a="modify the "+l[4].type+"'s x position"),f(t,"class","svelte-lx0erj"),f(m,"class","item-input svelte-lx0erj"),f(m,"type","number"),m.value=h=l[4].cy,f(u,"title",P="modify the "+l[4].type+"'s y position"),f(u,"class","svelte-lx0erj"),f(y,"class","item-input svelte-lx0erj"),f(y,"type","number"),y.value=j=l[4].r,f(A,"title",X="modify the "+l[4].type+"'s radius"),f(A,"class","svelte-lx0erj"),De(b,"flex","1"),f(I,"type","checkbox"),I.checked=l[3],f(I,"title",J="the "+l[4].type+"'s fill is "+(l[4].enableFill?"enabled":"disabled")),f(I,"class","svelte-lx0erj"),f(D,"class","togglable-checkbox-wrapper svelte-lx0erj"),f(S,"class","item-input svelte-lx0erj"),f(S,"type","color"),S.disabled=R=!l[3],S.value=x=l[7]==="none"?"#000000":l[7],f(N,"class","svelte-lx0erj"),f(g,"class","togglable svelte-lx0erj")},m(C,W){K(C,t,W),o(t,e),o(t,d),o(t,n),K(C,s,W),K(C,u,W),o(u,m),o(u,c),o(u,p),K(C,Y,W),K(C,A,W),o(A,y),o(A,H),o(A,U),K(C,O,W),K(C,b,W),K(C,E,W),K(C,g,W),o(g,D),o(D,I),o(g,L),o(g,N),o(N,S),o(N,ie),o(N,le),G&&G.m(le,null),o(le,ne),Z||(he=[$(e,"input",l[14]),$(m,"input",l[15]),$(y,"input",l[16]),$(I,"input",l[17]),$(S,"input",l[18])],Z=!0)},p(C,W){W&16&&i!==(i=C[4].cx)&&e.value!==i&&(e.value=i),W&16&&a!==(a="modify the "+C[4].type+"'s x position")&&f(t,"title",a),W&16&&h!==(h=C[4].cy)&&m.value!==h&&(m.value=h),W&16&&P!==(P="modify the "+C[4].type+"'s y position")&&f(u,"title",P),W&16&&j!==(j=C[4].r)&&y.value!==j&&(y.value=j),W&16&&X!==(X="modify the "+C[4].type+"'s radius")&&f(A,"title",X),W&8&&(I.checked=C[3]),W&16&&J!==(J="the "+C[4].type+"'s fill is "+(C[4].enableFill?"enabled":"disabled"))&&f(I,"title",J),W&8&&R!==(R=!C[3])&&(S.disabled=R),W&128&&x!==(x=C[7]==="none"?"#000000":C[7])&&(S.value=x),!C[3]||C[7]==="none"?G||(G=nt(),G.c(),G.m(le,ne)):G&&(G.d(1),G=null)},d(C){C&&(v(t),v(s),v(u),v(Y),v(A),v(O),v(b),v(E),v(g)),G&&G.d(),Z=!1,Ve(he)}}}function it(l){let t;return{c(){t=ee(`no
					`)},l(e){t=te(e,`no
					`)},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function nt(l){let t;return{c(){t=ee(`no
					`)},l(e){t=te(e,`no
					`)},m(e,i){K(e,t,i)},d(e){e&&v(t)}}}function Ot(l){let t,e,i,d,n=l[4].type+"",_,a,s,u,m,h,c,p,T=ae(l[6],2)+"",P,Y,A,y,j="🗙",H,U;function F(D,I){return D[8]?Pt:Yt}let X=F(l),O=X(l);function b(D,I){if(D[4].type==="circle")return Xt;if(D[4].type==="polyline")return Ut}let E=b(l),g=E&&E(l);return{c(){t=k("li"),e=k("button"),O.c(),i=V(),d=k("div"),_=ee(n),a=V(),s=k("label"),u=k("input"),h=V(),c=k("small"),p=ee("opacity: "),P=ee(T),Y=V(),g&&g.c(),A=V(),y=k("button"),y.textContent=j,this.h()},l(D){t=w(D,"LI",{class:!0,"aria-hidden":!0});var I=B(t);e=w(I,"BUTTON",{class:!0});var J=B(e);O.l(J),J.forEach(v),i=z(I),d=w(I,"DIV",{class:!0});var L=B(d);_=te(L,n),L.forEach(v),a=z(I),s=w(I,"LABEL",{class:!0});var N=B(s);u=w(N,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,title:!0}),h=z(N),c=w(N,"SMALL",{});var S=B(c);p=te(S,"opacity: "),P=te(S,T),S.forEach(v),N.forEach(v),Y=z(I),g&&g.l(I),A=z(I),y=w(I,"BUTTON",{class:!0,"data-svelte-h":!0}),we(y)!=="svelte-g330tp"&&(y.textContent=j),I.forEach(v),this.h()},h(){f(e,"class","icon_button plain"),oe(e,"selected",l[8]),f(d,"class","type svelte-lx0erj"),f(u,"class","item-input svelte-lx0erj"),f(u,"type","range"),f(u,"min",0),f(u,"max",1),f(u,"step",.01),u.value=l[6],f(u,"title",m="modify the "+l[4].type+"'s opacity"),f(s,"class","svelte-lx0erj"),f(y,"class","icon_button plain"),f(t,"class","mural-item-list-item selectable svelte-lx0erj"),f(t,"aria-hidden",""),oe(t,"hidden",l[8]),oe(t,"selected",l[9])},m(D,I){K(D,t,I),o(t,e),O.m(e,null),o(t,i),o(t,d),o(d,_),o(t,a),o(t,s),o(s,u),o(s,h),o(s,c),o(c,p),o(c,P),o(t,Y),g&&g.m(t,null),o(t,A),o(t,y),H||(U=[$(e,"click",l[12]),$(u,"input",l[13]),$(y,"click",l[22]),$(t,"click",l[23])],H=!0)},p(D,[I]){X!==(X=F(D))&&(O.d(1),O=X(D),O&&(O.c(),O.m(e,null))),I&256&&oe(e,"selected",D[8]),I&16&&n!==(n=D[4].type+"")&&Te(_,n),I&64&&(u.value=D[6]),I&16&&m!==(m="modify the "+D[4].type+"'s opacity")&&f(u,"title",m),I&64&&T!==(T=ae(D[6],2)+"")&&Te(P,T),E===(E=b(D))&&g?g.p(D,I):(g&&g.d(1),g=E&&E(D),g&&(g.c(),g.m(t,A))),I&256&&oe(t,"hidden",D[8]),I&512&&oe(t,"selected",D[9])},i:Se,o:Se,d(D){D&&v(t),O.d(),g&&g.d(),H=!1,Ve(U)}}}function Ft(l,t,e){let i,d,n,_,a,s,u,m,h=Se,c=()=>(h(),h=Xe(Y,L=>e(4,m=L)),Y),p,T=Se,P=()=>(T(),T=Xe(A,L=>e(5,p=L)),A);l.$$.on_destroy.push(()=>h()),l.$$.on_destroy.push(()=>T());let{item:Y}=t;c();let{itemSelection:A}=t;P();const y=_t(),j=()=>y("action",{type:"updateItem",id:m.id,data:{hidden:!m.hidden}}),H=L=>y("action",{type:"updateItem",id:m.id,data:{opacity:Number(L.currentTarget.value)}}),U=L=>y("action",{type:"updateItem",id:m.id,data:{cx:Number(L.currentTarget.value)}}),F=L=>y("action",{type:"updateItem",id:m.id,data:{cy:Number(L.currentTarget.value)}}),X=L=>y("action",{type:"updateItem",id:m.id,data:{r:Number(L.currentTarget.value)}}),O=L=>y("action",{type:"updateItem",id:m.id,data:{enableFill:L.currentTarget.checked}}),b=L=>y("action",{type:"updateItem",id:m.id,data:{fill:L.currentTarget.value}}),E=L=>y("action",{type:"updateItem",id:m.id,data:{strokeWidth:Number(L.currentTarget.value)}}),g=L=>y("action",{type:"updateItem",id:m.id,data:{enableFill:L.currentTarget.checked,fill:n??(L.currentTarget.checked?At:void 0)}}),D=L=>y("action",{type:"updateItem",id:m.id,data:{fill:L.currentTarget.value}}),I=()=>y("action",{type:"removeItem",id:m.id}),J=()=>Ue(A,p=Y,p);return l.$$set=L=>{"item"in L&&c(e(0,Y=L.item)),"itemSelection"in L&&P(e(1,A=L.itemSelection))},l.$$.update=()=>{l.$$.dirty&33&&e(9,i=p===Y),l.$$.dirty&16&&e(3,{enableFill:d,fill:n,hidden:_,opacity:a}=m,d,(e(2,n),e(4,m)),(e(8,_),e(4,m)),(e(11,a),e(4,m))),l.$$.dirty&12&&e(7,s=d?n??St:void 0),l.$$.dirty&2048&&e(6,u=a??1)},[Y,A,n,d,m,p,u,s,_,i,y,a,j,H,U,F,X,O,b,E,g,D,I,J]}class Vt extends ze{constructor(t){super(),Re(this,t,Ft,Ot,Fe,{item:0,itemSelection:1})}}function st(l,t,e){const i=l.slice();return i[4]=t[e],i}function at(l,t){let e,i,d;return i=new Vt({props:{item:t[4],itemSelection:t[0]}}),i.$on("action",t[3]),{key:l,first:null,c(){e=Ae(),be(i.$$.fragment),this.h()},l(n){e=Ae(),ge(i.$$.fragment,n),this.h()},h(){this.first=e},m(n,_){K(n,e,_),Ie(i,n,_),d=!0},p(n,_){t=n;const a={};_&2&&(a.item=t[4]),_&1&&(a.itemSelection=t[0]),i.$set(a)},i(n){d||(_e(i.$$.fragment,n),d=!0)},o(n){de(i.$$.fragment,n),d=!1},d(n){n&&v(e),ye(i,n)}}}function zt(l){let t,e=[],i=new Map,d,n=Me(l[1]);const _=a=>a[4];for(let a=0;a<n.length;a+=1){let s=st(l,n,a),u=_(s);i.set(u,e[a]=at(u,s))}return{c(){t=k("ul");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=w(a,"UL",{class:!0});var s=B(t);for(let u=0;u<e.length;u+=1)e[u].l(s);s.forEach(v),this.h()},h(){f(t,"class","width_md svelte-1gkqiw5")},m(a,s){K(a,t,s);for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(t,null);d=!0},p(a,[s]){s&3&&(n=Me(a[1]),ht(),e=Je(e,s,_,1,a,n,i,t,vt,at,null,st),pt())},i(a){if(!d){for(let s=0;s<n.length;s+=1)_e(e[s]);d=!0}},o(a){for(let s=0;s<e.length;s+=1)de(e[s]);d=!1},d(a){a&&v(t);for(let s=0;s<e.length;s+=1)e[s].d()}}}function Rt(l,t,e){let i,{items:d}=t,{itemSelection:n}=t;function _(a){yt.call(this,l,a)}return l.$$set=a=>{"items"in a&&e(2,d=a.items),"itemSelection"in a&&e(0,n=a.itemSelection)},l.$$.update=()=>{l.$$.dirty&4&&e(1,i=d.slice().reverse())},[n,i,d,_]}class Wt extends ze{constructor(t){super(),Re(this,t,Rt,zt,Fe,{items:2,itemSelection:0})}}const{Map:bt}=Dt;function rt(l,t,e){const i=l.slice();return i[38]=t[e],i}function ot(l,t,e){const i=l.slice();return i[41]=t[e],i}function ut(l,t){let e,i,d;return i=new Bt({props:{item:t[41]}}),{key:l,first:null,c(){e=Ae(),be(i.$$.fragment),this.h()},l(n){e=Ae(),ge(i.$$.fragment,n),this.h()},h(){this.first=e},m(n,_){K(n,e,_),Ie(i,n,_),d=!0},p(n,_){t=n;const a={};_[0]&8&&(a.item=t[41]),i.$set(a)},i(n){d||(_e(i.$$.fragment,n),d=!0)},o(n){de(i.$$.fragment,n),d=!1},d(n){n&&v(e),ye(i,n)}}}function ft(l){let t,e,i,d,n;return{c(){t=dt("line"),this.h()},l(_){t=mt(_,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(t).forEach(v),this.h()},h(){f(t,"x1",e=l[13].at(-2)),f(t,"y1",i=l[13].at(-1)),f(t,"x2",l[1]),f(t,"y2",l[2]),f(t,"stroke",d=l[11].stroke??lt),f(t,"stroke-width",n=l[11].strokeWidth??Oe)},m(_,a){K(_,t,a)},p(_,a){a[0]&8192&&e!==(e=_[13].at(-2))&&f(t,"x1",e),a[0]&8192&&i!==(i=_[13].at(-1))&&f(t,"y1",i),a[0]&2&&f(t,"x2",_[1]),a[0]&4&&f(t,"y2",_[2]),a[0]&2048&&d!==(d=_[11].stroke??lt)&&f(t,"stroke",d),a[0]&2048&&n!==(n=_[11].strokeWidth??Oe)&&f(t,"stroke-width",n)},d(_){_&&v(t)}}}function Ht(l){var u,m;let t,e=[],i=new bt,d,n,_=Me(l[3]);const a=h=>h[41];for(let h=0;h<_.length;h+=1){let c=ot(l,_,h),p=a(c);i.set(p,e[h]=ut(p,c))}let s=l[4]&&!l[0]&&l[6]==="polyline"&&((u=l[11])==null?void 0:u.type)==="polyline"&&((m=l[13])==null?void 0:m.length)&&ft(l);return{c(){t=dt("svg");for(let h=0;h<e.length;h+=1)e[h].c();d=Ae(),s&&s.c(),this.h()},l(h){t=mt(h,"svg",{class:!0});var c=B(t);for(let p=0;p<e.length;p+=1)e[p].l(c);d=Ae(),s&&s.l(c),c.forEach(v),this.h()},h(){f(t,"class","svelte-tev7zh")},m(h,c){K(h,t,c);for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(t,null);o(t,d),s&&s.m(t,null),n=!0},p(h,c){var p,T;c[0]&8&&(_=Me(h[3]),ht(),e=Je(e,c,a,1,h,_,i,t,vt,ut,d,ot),pt()),h[4]&&!h[0]&&h[6]==="polyline"&&((p=h[11])==null?void 0:p.type)==="polyline"&&((T=h[13])!=null&&T.length)?s?s.p(h,c):(s=ft(h),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},i(h){if(!n){for(let c=0;c<_.length;c+=1)_e(e[c]);n=!0}},o(h){for(let c=0;c<e.length;c+=1)de(e[c]);n=!1},d(h){h&&v(t);for(let c=0;c<e.length;c+=1)e[c].d();s&&s.d()}}}function Gt(l){let t,e,i,d,n,_;function a(c){l[24](c)}function s(c){l[25](c)}function u(c){l[26](c)}function m(c){l[27](c)}let h={scale:l[5],cancelOnLeave:!1,$$slots:{default:[Ht]},$$scope:{ctx:l}};return l[4]!==void 0&&(h.pointing=l[4]),l[0]!==void 0&&(h.pointerDown=l[0]),l[1]!==void 0&&(h.pointerX=l[1]),l[2]!==void 0&&(h.pointerY=l[2]),t=new Mt({props:h}),ue.push(()=>ce(t,"pointing",a)),ue.push(()=>ce(t,"pointerDown",s)),ue.push(()=>ce(t,"pointerX",u)),ue.push(()=>ce(t,"pointerY",m)),{c(){be(t.$$.fragment)},l(c){ge(t.$$.fragment,c)},m(c,p){Ie(t,c,p),_=!0},p(c,p){const T={};p[0]&32&&(T.scale=c[5]),p[0]&10335|p[1]&8192&&(T.$$scope={dirty:p,ctx:c}),!e&&p[0]&16&&(e=!0,T.pointing=c[4],fe(()=>e=!1)),!i&&p[0]&1&&(i=!0,T.pointerDown=c[0],fe(()=>i=!1)),!d&&p[0]&2&&(d=!0,T.pointerX=c[1],fe(()=>d=!1)),!n&&p[0]&4&&(n=!0,T.pointerY=c[2],fe(()=>n=!1)),t.$set(T)},i(c){_||(_e(t.$$.fragment,c),_=!0)},o(c){de(t.$$.fragment,c),_=!1},d(c){ye(t,c)}}}function ct(l,t){let e,i=t[38]+"",d,n,_,a;function s(){return t[29](t[38])}return{key:l,first:null,c(){e=k("button"),d=ee(i),n=V(),this.h()},l(u){e=w(u,"BUTTON",{});var m=B(e);d=te(m,i),n=z(m),m.forEach(v),this.h()},h(){oe(e,"selected",t[15]&&t[6]===t[38]),this.first=e},m(u,m){K(u,e,m),o(e,d),o(e,n),_||(a=$(e,"click",s),_=!0)},p(u,m){t=u,m[0]&512&&i!==(i=t[38]+"")&&Te(d,i),m[0]&33344&&oe(e,"selected",t[15]&&t[6]===t[38])},d(u){u&&v(e),_=!1,a()}}}function Kt(l){let t,e,i,d,n,_,a,s=[],u=new bt,m,h,c,p,T,P,Y=`${l[7]}px`,A=`${l[8]}px`,y,j,H;function U(b){l[28](b)}let F={width:l[7],height:l[8],$$slots:{default:[Gt]},$$scope:{ctx:l}};l[5]!==void 0&&(F.scale=l[5]),i=new kt({props:F}),ue.push(()=>ce(i,"scale",U));let X=Me(l[9]);const O=b=>b[38];for(let b=0;b<X.length;b+=1){let E=rt(l,X,b),g=O(E);u.set(g,s[b]=ct(g,E))}return P=new Wt({props:{items:l[3],itemSelection:l[10]}}),P.$on("action",l[31]),{c(){t=k("div"),e=k("div"),be(i.$$.fragment),n=V(),_=k("div"),a=k("div");for(let b=0;b<s.length;b+=1)s[b].c();m=V(),h=k("button"),c=ee("clear all"),T=V(),be(P.$$.fragment),this.h()},l(b){t=w(b,"DIV",{class:!0});var E=B(t);e=w(E,"DIV",{class:!0});var g=B(e);ge(i.$$.fragment,g),g.forEach(v),n=z(E),_=w(E,"DIV",{class:!0});var D=B(_);a=w(D,"DIV",{class:!0});var I=B(a);for(let L=0;L<s.length;L+=1)s[L].l(I);I.forEach(v),m=z(D),h=w(D,"BUTTON",{});var J=B(h);c=te(J,"clear all"),J.forEach(v),D.forEach(v),T=z(E),ge(P.$$.fragment,E),E.forEach(v),this.h()},h(){f(e,"class","content svelte-tev7zh"),f(a,"class","row"),h.disabled=p=!l[3].length,f(_,"class","controls svelte-tev7zh"),f(t,"class","mural svelte-tev7zh"),oe(t,"active",l[0]),De(t,"--width",Y),De(t,"--height",A)},m(b,E){K(b,t,E),o(t,e),Ie(i,e,null),o(t,n),o(t,_),o(_,a);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(a,null);o(_,m),o(_,h),o(h,c),o(t,T),Ie(P,t,null),y=!0,j||(H=$(h,"click",l[30]),j=!0)},p(b,E){const g={};E[0]&128&&(g.width=b[7]),E[0]&256&&(g.height=b[8]),E[0]&10367|E[1]&8192&&(g.$$scope={dirty:E,ctx:b}),!d&&E[0]&32&&(d=!0,g.scale=b[5],fe(()=>d=!1)),i.$set(g),E[0]&37440&&(X=Me(b[9]),s=Je(s,E,O,1,b,X,u,a,Tt,ct,null,rt)),(!y||E[0]&8&&p!==(p=!b[3].length))&&(h.disabled=p);const D={};E[0]&8&&(D.items=b[3]),E[0]&1024&&(D.itemSelection=b[10]),P.$set(D),(!y||E[0]&1)&&oe(t,"active",b[0]),E[0]&128&&Y!==(Y=`${b[7]}px`)&&De(t,"--width",Y),E[0]&256&&A!==(A=`${b[8]}px`)&&De(t,"--height",A)},i(b){y||(_e(i.$$.fragment,b),_e(P.$$.fragment,b),y=!0)},o(b){de(i.$$.fragment,b),de(P.$$.fragment,b),y=!1},d(b){b&&v(t),ye(i);for(let E=0;E<s.length;E+=1)s[E].d();ye(P),j=!1,H()}}}function qt(l,t,e){let i,d,n,_,a=Se,s=()=>(a(),a=Xe(d,r=>e(11,_=r)),d),u,m=Se,h=()=>(m(),m=Xe(N,r=>e(12,u=r)),N);l.$$.on_destroy.push(()=>a()),l.$$.on_destroy.push(()=>m());const c=_t();let{items:p=[]}=t,{width:T}=t,{height:P}=t,{pointing:Y=void 0}=t,{pointerDown:A=void 0}=t,{pointerX:y=void 0}=t,{pointerY:j=void 0}=t,{scale:H=void 0}=t;const U=()=>{const r=L==="pen"||L==="polyline"?jt():L==="circle"?Ct(y,j):null;return r||null};let{addItem:F=(r,q)=>r.concat(q)}=t,{updateItem:X=(r,q)=>Nt(r,q)}=t,{selectItemToDraw:O=r=>u||r.at(-1)}=t,{removeItem:b=(r,q)=>r.filter(me=>me!==q)}=t,{removeAllItems:E=r=>[]}=t;const g=new Map,D=r=>{switch(r.type){case"addItem":{const q=et(r.item);g.set(r.item.id,q),e(3,p=F(p,q,r.item.id));break}case"updateItem":{const q=g.get(r.id);if(!q)return;X(q,r.data);break}case"removeItem":{const q=g.get(r.id);if(!q)return;g.delete(r.id),e(3,p=b(p,q,r.id));break}case"removeAllItems":{g.clear(),e(3,p=E(p));break}}},I=r=>{c("action",r),D(r)};let{brushes:J=["pen","polyline","circle"]}=t,{selectedBrush:L=J[0]}=t,{itemSelection:N=et(null)}=t;h();let S=!1;const R=()=>{if(S||(e(23,S=!0),u))return;const r=U();r&&(I({type:"addItem",item:r}),L==="polyline"&&Ue(N,u=p.find(q=>$e(q).id===r.id)||null,u))},x=()=>{S&&e(23,S=!1)},ie=(r,q)=>{const me=O(p);if(!me)return;const{id:pe,type:ke}=$e(me);ke==="polyline"&&I({type:"updateItem",id:pe,data:{appendPoints:[tt.x(r),tt.y(q)]}})};function le(r){Y=r,e(4,Y)}function ne(r){A=r,e(0,A)}function Z(r){y=r,e(1,y)}function he(r){j=r,e(2,j)}function G(r){H=r,e(5,H)}const C=r=>{Ue(N,u=null,u),e(6,L=r)},W=()=>{Ue(N,u=null,u),I({type:"removeAllItems"})},se=r=>I(r.detail);return l.$$set=r=>{"items"in r&&e(3,p=r.items),"width"in r&&e(7,T=r.width),"height"in r&&e(8,P=r.height),"pointing"in r&&e(4,Y=r.pointing),"pointerDown"in r&&e(0,A=r.pointerDown),"pointerX"in r&&e(1,y=r.pointerX),"pointerY"in r&&e(2,j=r.pointerY),"scale"in r&&e(5,H=r.scale),"addItem"in r&&e(17,F=r.addItem),"updateItem"in r&&e(18,X=r.updateItem),"selectItemToDraw"in r&&e(19,O=r.selectItemToDraw),"removeItem"in r&&e(20,b=r.removeItem),"removeAllItems"in r&&e(21,E=r.removeAllItems),"brushes"in r&&e(9,J=r.brushes),"selectedBrush"in r&&e(6,L=r.selectedBrush),"itemSelection"in r&&h(e(10,N=r.itemSelection))},l.$$.update=()=>{l.$$.dirty[0]&1&&(A?R():A===!1&&x()),l.$$.dirty[0]&8388614&&S&&y!==void 0&&j!==void 0&&ie(y,j),l.$$.dirty[0]&4096&&e(15,i=u===null),l.$$.dirty[0]&4096&&s(e(14,d=u)),l.$$.dirty[0]&2048&&e(13,n=(_==null?void 0:_.type)==="polyline"?qe(_):void 0)},[A,y,j,p,Y,H,L,T,P,J,N,_,u,n,d,i,I,F,X,O,b,E,D,S,le,ne,Z,he,G,C,W,se]}class Jt extends ze{constructor(t){super(),Re(this,t,qt,Kt,Fe,{items:3,width:7,height:8,pointing:4,pointerDown:0,pointerX:1,pointerY:2,scale:5,addItem:17,updateItem:18,selectItemToDraw:19,removeItem:20,removeAllItems:21,handleAction:22,brushes:9,selectedBrush:6,itemSelection:10},null,[-1,-1])}get handleAction(){return this.$$.ctx[22]}}function Qt(l){let t,e,i,d,n,_,a,s,u,m,h,c,p,T,P,Y,A="<code>--mural_bg</code>",y,j,H,U,F,X,O,b=ae(l[0],1)+"",E,g,D,I,J,L,N,S,R,x=ae(l[1],1)+"",ie,le,ne,Z,he,G,C,W,se,r,q;function me(M){l[10](M)}function pe(M){l[11](M)}function ke(M){l[12](M)}function gt(M){l[13](M)}function It(M){l[14](M)}let Ee={width:l[0],height:l[1]};return l[7]!==void 0&&(Ee.items=l[7]),l[3]!==void 0&&(Ee.scale=l[3]),l[4]!==void 0&&(Ee.pointerDown=l[4]),l[5]!==void 0&&(Ee.pointerX=l[5]),l[6]!==void 0&&(Ee.pointerY=l[6]),e=new Jt({props:Ee}),ue.push(()=>ce(e,"items",me)),ue.push(()=>ce(e,"scale",pe)),ue.push(()=>ce(e,"pointerDown",ke)),ue.push(()=>ce(e,"pointerX",gt)),ue.push(()=>ce(e,"pointerY",It)),m=new Et({props:{content:`<Mural
	width="${l[0]}px"
	height="${l[1]}px"
	scale={${l[3]&&ae(l[3],3)}}
	pointerX={${l[5]&&ae(l[5],1)}}
	pointerY={${l[6]&&ae(l[6],1)}}
	pointerDown={${l[4]}}
>
	<MuralItemList
		items={[ ... ]}
	/>
</Mural>`}}),{c(){t=k("div"),be(e.$$.fragment),s=V(),u=k("section"),be(m.$$.fragment),h=V(),c=k("section"),p=k("form"),T=k("fieldset"),P=k("label"),Y=k("div"),Y.innerHTML=A,y=V(),j=k("input"),H=V(),U=k("label"),F=k("div"),X=ee("width "),O=k("code"),E=ee(b),g=ee("px"),D=V(),I=k("input"),J=V(),L=k("label"),N=k("div"),S=ee("height "),R=k("code"),ie=ee(x),le=ee("px"),ne=V(),Z=k("input"),he=V(),G=k("button"),C=ee("reset settings"),this.h()},l(M){t=w(M,"DIV",{class:!0});var Q=B(t);ge(e.$$.fragment,Q),s=z(Q),u=w(Q,"SECTION",{class:!0});var re=B(u);ge(m.$$.fragment,re),re.forEach(v),h=z(Q),c=w(Q,"SECTION",{class:!0});var Ne=B(c);p=w(Ne,"FORM",{});var Qe=B(p);T=w(Qe,"FIELDSET",{});var ve=B(T);P=w(ve,"LABEL",{});var Be=B(P);Y=w(Be,"DIV",{class:!0,"data-svelte-h":!0}),we(Y)!=="svelte-iv5je9"&&(Y.innerHTML=A),y=z(Be),j=w(Be,"INPUT",{type:!0}),Be.forEach(v),H=z(ve),U=w(ve,"LABEL",{});var Ye=B(U);F=w(Ye,"DIV",{class:!0});var We=B(F);X=te(We,"width "),O=w(We,"CODE",{});var He=B(O);E=te(He,b),g=te(He,"px"),He.forEach(v),We.forEach(v),D=z(Ye),I=w(Ye,"INPUT",{type:!0,min:!0,max:!0}),Ye.forEach(v),J=z(ve),L=w(ve,"LABEL",{});var Pe=B(L);N=w(Pe,"DIV",{class:!0});var Ge=B(N);S=te(Ge,"height "),R=w(Ge,"CODE",{});var Ke=B(R);ie=te(Ke,x),le=te(Ke,"px"),Ke.forEach(v),Ge.forEach(v),ne=z(Pe),Z=w(Pe,"INPUT",{type:!0,min:!0,max:!0}),Pe.forEach(v),he=z(ve),G=w(ve,"BUTTON",{type:!0,class:!0});var Ze=B(G);C=te(Ze,"reset settings"),Ze.forEach(v),ve.forEach(v),Qe.forEach(v),Ne.forEach(v),Q.forEach(v),this.h()},h(){f(u,"class","svelte-17r4wzu"),f(Y,"class","title"),f(j,"type","color"),f(F,"class","title"),f(I,"type","range"),f(I,"min",0),f(I,"max",je*2),f(N,"class","title"),f(Z,"type","range"),f(Z,"min",0),f(Z,"max",Ce),f(G,"type","button"),G.disabled=W=l[4]===void 0&&l[5]===void 0&&l[6]===void 0&&l[0]===je&&l[1]===Ce&&l[2]===void 0,f(G,"class","svelte-17r4wzu"),f(c,"class","markup svelte-17r4wzu"),f(t,"class","box width_full"),De(t,"--mural_bg",xt)},m(M,Q){K(M,t,Q),Ie(e,t,null),o(t,s),o(t,u),Ie(m,u,null),o(t,h),o(t,c),o(c,p),o(p,T),o(T,P),o(P,Y),o(P,y),o(P,j),Le(j,l[2]),o(T,H),o(T,U),o(U,F),o(F,X),o(F,O),o(O,E),o(O,g),o(U,D),o(U,I),Le(I,l[0]),o(T,J),o(T,L),o(L,N),o(N,S),o(N,R),o(R,ie),o(R,le),o(L,ne),o(L,Z),Le(Z,l[1]),o(T,he),o(T,G),o(G,C),se=!0,r||(q=[$(j,"input",l[15]),$(I,"change",l[16]),$(I,"input",l[16]),$(Z,"change",l[17]),$(Z,"input",l[17]),$(G,"click",l[9])],r=!0)},p(M,Q){const re={};Q&1&&(re.width=M[0]),Q&2&&(re.height=M[1]),!i&&Q&128&&(i=!0,re.items=M[7],fe(()=>i=!1)),!d&&Q&8&&(d=!0,re.scale=M[3],fe(()=>d=!1)),!n&&Q&16&&(n=!0,re.pointerDown=M[4],fe(()=>n=!1)),!_&&Q&32&&(_=!0,re.pointerX=M[5],fe(()=>_=!1)),!a&&Q&64&&(a=!0,re.pointerY=M[6],fe(()=>a=!1)),e.$set(re);const Ne={};Q&123&&(Ne.content=`<Mural
	width="${M[0]}px"
	height="${M[1]}px"
	scale={${M[3]&&ae(M[3],3)}}
	pointerX={${M[5]&&ae(M[5],1)}}
	pointerY={${M[6]&&ae(M[6],1)}}
	pointerDown={${M[4]}}
>
	<MuralItemList
		items={[ ... ]}
	/>
</Mural>`),m.$set(Ne),Q&4&&Le(j,M[2]),(!se||Q&1)&&b!==(b=ae(M[0],1)+"")&&Te(E,b),Q&1&&Le(I,M[0]),(!se||Q&2)&&x!==(x=ae(M[1],1)+"")&&Te(ie,x),Q&2&&Le(Z,M[1]),(!se||Q&119&&W!==(W=M[4]===void 0&&M[5]===void 0&&M[6]===void 0&&M[0]===je&&M[1]===Ce&&M[2]===void 0))&&(G.disabled=W)},i(M){se||(_e(e.$$.fragment,M),_e(m.$$.fragment,M),se=!0)},o(M){de(e.$$.fragment,M),de(m.$$.fragment,M),se=!1},d(M){M&&v(t),ye(e),ye(m),r=!1,Ve(q)}}}function Zt(l){let t,e;return t=new wt({props:{tome:l[8],$$slots:{default:[Qt]},$$scope:{ctx:l}}}),{c(){be(t.$$.fragment)},l(i){ge(t.$$.fragment,i)},m(i,d){Ie(t,i,d),e=!0},p(i,[d]){const n={};d&262399&&(n.$$scope={dirty:d,ctx:i}),t.$set(n)},i(i){e||(_e(t.$$.fragment,i),e=!0)},o(i){de(t.$$.fragment,i),e=!1},d(i){ye(t,i)}}}const $t="Mural",je=750,Ce=512,xt="var(--bg)";function el(l,t,e){const i=Lt($t);let d=je,n=Ce,_,a,s,u,m;const h=()=>{e(4,s=void 0),e(5,u=void 0),e(6,m=void 0),e(0,d=je),e(1,n=Ce),e(2,_=void 0)};let c=[];function p(U){c=U,e(7,c)}function T(U){a=U,e(3,a)}function P(U){s=U,e(4,s)}function Y(U){u=U,e(5,u)}function A(U){m=U,e(6,m)}function y(){_=this.value,e(2,_)}function j(){d=xe(this.value),e(0,d)}function H(){n=xe(this.value),e(1,n)}return[d,n,_,a,s,u,m,c,i,h,p,T,P,Y,A,y,j,H]}class ul extends ze{constructor(t){super(),Re(this,t,el,Zt,Fe,{})}}export{ul as component};
