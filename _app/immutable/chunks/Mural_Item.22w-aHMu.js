import{n as A,p as G,e as H,c as J,a as D,d,o as u,i as g,I as k,u as V,q as W,v as z,r as Q,G as Z,A as E,j as m,J as x,K as O,L as S}from"./scheduler.ESLvGD48.js";import{S as X,i as C,a as $,t as ee}from"./index.lx0Epbk5.js";import{s as L}from"./dom.z-RU6ZBL.js";import{r as U}from"./Scaled.Fyco20jt.js";function te(n){let e,t,c,s;const l=n[14].default,i=G(l,n,n[13],null);return{c(){e=H("div"),i&&i.c(),this.h()},l(o){e=J(o,"DIV",{class:!0,tabindex:!0,role:!0});var f=D(e);i&&i.l(f),f.forEach(d),this.h()},h(){u(e,"class","surface svelte-1ktoghv"),u(e,"tabindex","0"),u(e,"role","button")},m(o,f){g(o,e,f),i&&i.m(e,null),n[15](e),t=!0,c||(s=[k(e,"pointerdown",n[1]),k(e,"pointerup",n[2]),k(e,"pointermove",n[3]),k(e,"pointerenter",n[4]),k(e,"pointerleave",n[5]),k(e,"pointercancel",n[6])],c=!0)},p(o,[f]){i&&i.p&&(!t||f&8192)&&V(i,l,o,o[13],t?z(l,o[13],f,null):W(o[13]),null)},i(o){t||($(i,o),t=!0)},o(o){ee(i,o),t=!1},d(o){o&&d(e),i&&i.d(o),n[15](null),c=!1,Q(s)}}}function ne(n,e,t){let{$$slots:c={},$$scope:s}=e,{scale:l=1}=e,{pointing:i=void 0}=e,{pointer_down:o=void 0}=e,{pointer_x:f=void 0}=e,{pointer_y:_=void 0}=e,{cancel_on_leave:a=!0}=e;const p=(r,B)=>{const K=h.getBoundingClientRect();t(9,f=(r-K.left)/l),t(10,_=(B-K.top)/l)},w=r=>{r.shiftKey||r.button>=3||(L(r),p(r.clientX,r.clientY),t(8,o=!0),M())},y=r=>{r.shiftKey||r.button>=3||(L(r),p(r.clientX,r.clientY),t(8,o=!1))},b=r=>{r.shiftKey||(L(r),p(r.clientX,r.clientY))},P=r=>{r.shiftKey||(L(r),p(r.clientX,r.clientY),t(7,i=!0))},R=r=>{r.shiftKey||(L(r),p(r.clientX,r.clientY),t(7,i=!1),a&&o&&(t(8,o=!1),N()))},q=r=>{r.shiftKey||(L(r),o&&(t(8,o=!1),N()))};let h;const M=()=>{document.activeElement!==h&&h.focus()},N=()=>{document.activeElement===h&&h.blur()};function j(r){Z[r?"unshift":"push"](()=>{h=r,t(0,h)})}return n.$$set=r=>{"scale"in r&&t(11,l=r.scale),"pointing"in r&&t(7,i=r.pointing),"pointer_down"in r&&t(8,o=r.pointer_down),"pointer_x"in r&&t(9,f=r.pointer_x),"pointer_y"in r&&t(10,_=r.pointer_y),"cancel_on_leave"in r&&t(12,a=r.cancel_on_leave),"$$scope"in r&&t(13,s=r.$$scope)},[h,w,y,b,P,R,q,i,o,f,_,l,a,s,c,j]}class me extends X{constructor(e){super(),C(this,e,ne,te,A,{scale:11,pointing:7,pointer_down:8,pointer_x:9,pointer_y:10,cancel_on_leave:12})}}const oe=n=>{const e=[];let t,c=!0,s="",l="";const i=n.length;for(let o=0;o<i;o++)t=n[o],t===" "?s&&l?(e.push(Number(s),Number(l)),s="",l="",c=!0):(s="",l=""):t===","?c=!1:c?s+=t:l+=t;return s&&l&&e.push(Number(s),Number(l)),e},de=n=>n.points_data||(n.points_data=oe(n.points)),v="#666666",I=3,Y="none",ye="#c7beef",ie="#75a6d7",be=(n=void 0,e=void 0,t=void 0,c,s,l=0,i=0)=>({id:crypto.randomUUID(),type:"polyline",points:"",x:l,y:i,opacity:s,fill:n,enable_fill:e,stroke:t,stroke_width:c}),ke=(n=0,e=0,t=62,c=ie,s=void 0,l=void 0,i,o)=>({id:crypto.randomUUID(),type:"circle",radius:t,x:n,y:e,opacity:o,fill:c,enable_fill:s,stroke:l,stroke_width:i}),le={x:n=>U(n,1),y:n=>U(n,1)},Le=(n,e)=>{n.update(t=>{const c={...t};for(const s in e){const l=e[s];if(l===void 0)continue;const i=le[s],o=i?i(l):l;if(o!==void 0)if(s==="append_points"){const f=c;for(let _=0;_<l.length;_+=2)f.points+=" "+l[_]+","+l[_+1],f.points_data?.push(l[_],l[_+1])}else c[s]=o}return c})};function se(n){const e=n.slice(),t=e[1];return e[9]=t.points,e}function F(n){let e;function t(i,o){return i[1].type==="circle"?ce:i[1].type==="polyline"?T:re}function c(i,o){return o===T?se(i):i}let s=t(n),l=s(c(n,s));return{c(){l.c(),e=E()},l(i){l.l(i),e=E()},m(i,o){l.m(i,o),g(i,e,o)},p(i,o){s===(s=t(i))&&l?l.p(c(i,s),o):(l.d(1),l=s(c(i,s)),l&&(l.c(),l.m(e.parentNode,e)))},d(i){i&&d(e),l.d(i)}}}function re(n){return{c:m,l:m,m,p:m,d:m}}function T(n){let e,t,c,s,l,i;return{c(){e=O("polyline"),this.h()},l(o){e=S(o,"polyline",{points:!0,transform:!0,pathLength:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),D(e).forEach(d),this.h()},h(){u(e,"points",t=n[9]),u(e,"transform",c=n[1].x||n[1].y?`translate(${n[1].x} ${n[1].y})`:void 0),u(e,"pathLength",n[7]),u(e,"fill",s=n[6]?n[5]??Y:"none"),u(e,"opacity",n[4]),u(e,"stroke",l=n[3]??v),u(e,"stroke-width",i=n[2]??I)},m(o,f){g(o,e,f)},p(o,f){f&2&&t!==(t=o[9])&&u(e,"points",t),f&2&&c!==(c=o[1].x||o[1].y?`translate(${o[1].x} ${o[1].y})`:void 0)&&u(e,"transform",c),f&128&&u(e,"pathLength",o[7]),f&96&&s!==(s=o[6]?o[5]??Y:"none")&&u(e,"fill",s),f&16&&u(e,"opacity",o[4]),f&8&&l!==(l=o[3]??v)&&u(e,"stroke",l),f&4&&i!==(i=o[2]??I)&&u(e,"stroke-width",i)},d(o){o&&d(e)}}}function ce(n){let e,t,c,s,l,i,o;return{c(){e=O("circle"),this.h()},l(f){e=S(f,"circle",{cx:!0,cy:!0,r:!0,pathLength:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),D(e).forEach(d),this.h()},h(){u(e,"cx",t=n[1].x),u(e,"cy",c=n[1].y),u(e,"r",s=n[1].radius),u(e,"pathLength",n[7]),u(e,"fill",l=n[6]?n[5]||"red":"none"),u(e,"opacity",n[4]),u(e,"stroke",i=n[3]??v),u(e,"stroke-width",o=n[2]??I)},m(f,_){g(f,e,_)},p(f,_){_&2&&t!==(t=f[1].x)&&u(e,"cx",t),_&2&&c!==(c=f[1].y)&&u(e,"cy",c),_&2&&s!==(s=f[1].radius)&&u(e,"r",s),_&128&&u(e,"pathLength",f[7]),_&96&&l!==(l=f[6]?f[5]||"red":"none")&&u(e,"fill",l),_&16&&u(e,"opacity",f[4]),_&8&&i!==(i=f[3]??v)&&u(e,"stroke",i),_&4&&o!==(o=f[2]??I)&&u(e,"stroke-width",o)},d(f){f&&d(e)}}}function fe(n){let e,t=!n[8]&&F(n);return{c(){t&&t.c(),e=E()},l(c){t&&t.l(c),e=E()},m(c,s){t&&t.m(c,s),g(c,e,s)},p(c,[s]){c[8]?t&&(t.d(1),t=null):t?t.p(c,s):(t=F(c),t.c(),t.m(e.parentNode,e))},i:m,o:m,d(c){c&&d(e),t&&t.d(c)}}}function ue(n,e,t){let c,s,l,i,o,f,_,a,p=m,w=()=>(p(),p=x(y,b=>t(1,a=b)),y);n.$$.on_destroy.push(()=>p());let{item:y}=e;return w(),n.$$set=b=>{"item"in b&&w(t(0,y=b.item))},n.$$.update=()=>{n.$$.dirty&2&&t(8,{hidden:c,path_length:s,enable_fill:l,fill:i,opacity:o,stroke:f,stroke_width:_}=a,c,(t(7,s),t(1,a)),(t(6,l),t(1,a)),(t(5,i),t(1,a)),(t(4,o),t(1,a)),(t(3,f),t(1,a)),(t(2,_),t(1,a)))},[y,a,_,f,o,i,l,s,c]}class ge extends X{constructor(e){super(),C(this,e,ue,fe,A,{item:0})}}export{I as D,ge as M,me as S,Y as a,ye as b,be as c,ke as d,v as e,le as p,de as t,Le as u};
