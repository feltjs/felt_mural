import{n as T,p as G,e as H,c as J,a as E,d,o as _,i as g,I as b,u as V,q as z,v as Q,r as Z,G as x,A as k,j as m,J as $,K as S,L as A}from"./scheduler.27454928.js";import{S as O,i as X,a as ee,t as te}from"./index.d1757bfb.js";import{s as L}from"./dom.affe8f60.js";import{r as v}from"./Scaled.a53c3dd8.js";function ne(i){let e,t,r,c;const s=i[14].default,n=G(s,i,i[13],null);return{c(){e=H("div"),n&&n.c(),this.h()},l(o){e=J(o,"DIV",{class:!0,tabindex:!0,role:!0});var f=E(e);n&&n.l(f),f.forEach(d),this.h()},h(){_(e,"class","surface svelte-1ktoghv"),_(e,"tabindex","0"),_(e,"role","button")},m(o,f){g(o,e,f),n&&n.m(e,null),i[15](e),t=!0,r||(c=[b(e,"pointerdown",i[1]),b(e,"pointerup",i[2]),b(e,"pointermove",i[3]),b(e,"pointerenter",i[4]),b(e,"pointerleave",i[5]),b(e,"pointercancel",i[6])],r=!0)},p(o,[f]){n&&n.p&&(!t||f&8192)&&V(n,s,o,o[13],t?Q(s,o[13],f,null):z(o[13]),null)},i(o){t||(ee(n,o),t=!0)},o(o){te(n,o),t=!1},d(o){o&&d(e),n&&n.d(o),i[15](null),r=!1,Z(c)}}}function ie(i,e,t){let{$$slots:r={},$$scope:c}=e,{scale:s=1}=e,{pointing:n=void 0}=e,{pointer_down:o=void 0}=e,{pointer_x:f=void 0}=e,{pointer_y:a=void 0}=e,{cancel_on_leave:u=!0}=e;const p=(l,B)=>{const D=h.getBoundingClientRect();t(9,f=(l-D.left)/s),t(10,a=(B-D.top)/s)},y=l=>{l.shiftKey||l.button>=3||(L(l),p(l.clientX,l.clientY),t(8,o=!0),W())},P=l=>{l.shiftKey||l.button>=3||(L(l),p(l.clientX,l.clientY),t(8,o=!1))},C=l=>{l.shiftKey||(L(l),p(l.clientX,l.clientY))},R=l=>{l.shiftKey||(L(l),p(l.clientX,l.clientY),t(7,n=!0))},q=l=>{l.shiftKey||(L(l),p(l.clientX,l.clientY),t(7,n=!1),u&&o&&(t(8,o=!1),I()))},M=l=>{l.shiftKey||(L(l),o&&(t(8,o=!1),I()))};let h;const W=()=>{document.activeElement!==h&&h.focus()},I=()=>{document.activeElement===h&&h.blur()};function j(l){x[l?"unshift":"push"](()=>{h=l,t(0,h)})}return i.$$set=l=>{"scale"in l&&t(11,s=l.scale),"pointing"in l&&t(7,n=l.pointing),"pointer_down"in l&&t(8,o=l.pointer_down),"pointer_x"in l&&t(9,f=l.pointer_x),"pointer_y"in l&&t(10,a=l.pointer_y),"cancel_on_leave"in l&&t(12,u=l.cancel_on_leave),"$$scope"in l&&t(13,c=l.$$scope)},[h,y,P,C,R,q,M,n,o,f,a,s,u,c,r,j]}class de extends O{constructor(e){super(),X(this,e,ie,ne,T,{scale:11,pointing:7,pointer_down:8,pointer_x:9,pointer_y:10,cancel_on_leave:12})}}const oe=i=>{const e=[];let t,r=!0,c="",s="";const n=i.length;for(let o=0;o<n;o++)t=i[o],t===" "?c&&s?(e.push(Number(c),Number(s)),c="",s="",r=!0):(c="",s=""):t===","?r=!1:r?c+=t:s+=t;return c&&s&&e.push(Number(c),Number(s)),e},ye=i=>i.pointsData||(i.pointsData=oe(i.points)),w="#666666",F=3,N="none",be="#c7beef",le="#75a6d7",Le=()=>({id:crypto.randomUUID(),type:"polyline",points:""}),ge=(i=0,e=0,t=25,r=le)=>({id:crypto.randomUUID(),type:"circle",cx:i,cy:e,r:t,enableFill:!0,fill:r}),se={x:i=>v(i,1),y:i=>v(i,1)},ke=(i,e)=>i.update(t=>{var c;const r={...t};for(const s in e){const n=e[s];if(n===void 0)continue;const o=se[s],f=o?o(n):n;if(f!==void 0)if(s==="appendPoints"){const a=r;for(let u=0;u<n.length;u+=2)a.points+=" "+n[u]+","+n[u+1],(c=a.pointsData)==null||c.push(n[u],n[u+1])}else r[s]=f}return r});function re(i){const e=i.slice(),t=e[1];return e[10]=t.points,e[11]=t.stroke,e[12]=t.strokeWidth,e}function ce(i){const e=i.slice(),t=e[1];return e[7]=t.cx,e[8]=t.cy,e[9]=t.r,e}function K(i){let e;function t(n,o){return n[1].type==="circle"?Y:n[1].type==="polyline"?U:_e}function r(n,o){return o===Y?ce(n):o===U?re(n):n}let c=t(i),s=c(r(i,c));return{c(){s.c(),e=k()},l(n){s.l(n),e=k()},m(n,o){s.m(n,o),g(n,e,o)},p(n,o){c===(c=t(n))&&s?s.p(r(n,c),o):(s.d(1),s=c(r(n,c)),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&d(e),s.d(n)}}}function _e(i){return{c:m,l:m,m,p:m,d:m}}function U(i){let e,t,r,c,s;return{c(){e=S("polyline"),this.h()},l(n){e=A(n,"polyline",{points:!0,pathLength:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),E(e).forEach(d),this.h()},h(){_(e,"points",t=i[10]),_(e,"pathLength",i[5]),_(e,"fill",r=i[4]?i[3]??N:"none"),_(e,"opacity",i[2]),_(e,"stroke",c=i[11]??w),_(e,"stroke-width",s=i[12]??F)},m(n,o){g(n,e,o)},p(n,o){o&2&&t!==(t=n[10])&&_(e,"points",t),o&32&&_(e,"pathLength",n[5]),o&24&&r!==(r=n[4]?n[3]??N:"none")&&_(e,"fill",r),o&4&&_(e,"opacity",n[2]),o&2&&c!==(c=n[11]??w)&&_(e,"stroke",c),o&2&&s!==(s=n[12]??F)&&_(e,"stroke-width",s)},d(n){n&&d(e)}}}function Y(i){let e,t,r,c,s;return{c(){e=S("circle"),this.h()},l(n){e=A(n,"circle",{cx:!0,cy:!0,r:!0,pathLength:!0,fill:!0,opacity:!0}),E(e).forEach(d),this.h()},h(){_(e,"cx",t=i[7]),_(e,"cy",r=i[8]),_(e,"r",c=i[9]),_(e,"pathLength",i[5]),_(e,"fill",s=i[4]?i[3]||"red":"none"),_(e,"opacity",i[2])},m(n,o){g(n,e,o)},p(n,o){o&2&&t!==(t=n[7])&&_(e,"cx",t),o&2&&r!==(r=n[8])&&_(e,"cy",r),o&2&&c!==(c=n[9])&&_(e,"r",c),o&32&&_(e,"pathLength",n[5]),o&24&&s!==(s=n[4]?n[3]||"red":"none")&&_(e,"fill",s),o&4&&_(e,"opacity",n[2])},d(n){n&&d(e)}}}function fe(i){let e,t=!i[6]&&K(i);return{c(){t&&t.c(),e=k()},l(r){t&&t.l(r),e=k()},m(r,c){t&&t.m(r,c),g(r,e,c)},p(r,[c]){r[6]?t&&(t.d(1),t=null):t?t.p(r,c):(t=K(r),t.c(),t.m(e.parentNode,e))},i:m,o:m,d(r){r&&d(e),t&&t.d(r)}}}function ue(i,e,t){let r,c,s,n,o,f,a=m,u=()=>(a(),a=$(p,y=>t(1,f=y)),p);i.$$.on_destroy.push(()=>a());let{item:p}=e;return u(),i.$$set=y=>{"item"in y&&u(t(0,p=y.item))},i.$$.update=()=>{i.$$.dirty&2&&t(6,{hidden:r,pathLength:c,enableFill:s,fill:n,opacity:o}=f,r,(t(5,c),t(1,f)),(t(4,s),t(1,f)),(t(3,n),t(1,f)),(t(2,o),t(1,f)))},[p,f,o,n,s,c,r]}class Ee extends O{constructor(e){super(),X(this,e,ue,fe,T,{item:0})}}export{N as D,Ee as M,de as S,be as a,F as b,Le as c,ge as d,w as e,se as p,ye as t,ke as u};
