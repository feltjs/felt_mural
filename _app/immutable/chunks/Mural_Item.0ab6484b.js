import{n as A,p as H,e as J,c as V,a as D,d as m,o as u,i as g,I as k,u as W,q as z,v as Q,r as Z,G as x,A as E,j as d,J as $,K as O,L as X}from"./scheduler.a4956b2f.js";import{S as C,i as P,a as ee,t as te}from"./index.23824295.js";import{s as L}from"./dom.affe8f60.js";import{r as U}from"./Scaled.1adaf927.js";function ne(o){let e,t,r,c;const l=o[14].default,n=H(l,o,o[13],null);return{c(){e=J("div"),n&&n.c(),this.h()},l(i){e=V(i,"DIV",{class:!0,tabindex:!0,role:!0});var _=D(e);n&&n.l(_),_.forEach(m),this.h()},h(){u(e,"class","surface svelte-1ktoghv"),u(e,"tabindex","0"),u(e,"role","button")},m(i,_){g(i,e,_),n&&n.m(e,null),o[15](e),t=!0,r||(c=[k(e,"pointerdown",o[1]),k(e,"pointerup",o[2]),k(e,"pointermove",o[3]),k(e,"pointerenter",o[4]),k(e,"pointerleave",o[5]),k(e,"pointercancel",o[6])],r=!0)},p(i,[_]){n&&n.p&&(!t||_&8192)&&W(n,l,i,i[13],t?Q(l,i[13],_,null):z(i[13]),null)},i(i){t||(ee(n,i),t=!0)},o(i){te(n,i),t=!1},d(i){i&&m(e),n&&n.d(i),o[15](null),r=!1,Z(c)}}}function oe(o,e,t){let{$$slots:r={},$$scope:c}=e,{scale:l=1}=e,{pointing:n=void 0}=e,{pointer_down:i=void 0}=e,{pointer_x:_=void 0}=e,{pointer_y:f=void 0}=e,{cancel_on_leave:a=!0}=e;const p=(s,G)=>{const K=h.getBoundingClientRect();t(9,_=(s-K.left)/l),t(10,f=(G-K.top)/l)},w=s=>{s.shiftKey||s.button>=3||(L(s),p(s.clientX,s.clientY),t(8,i=!0),j())},y=s=>{s.shiftKey||s.button>=3||(L(s),p(s.clientX,s.clientY),t(8,i=!1))},b=s=>{s.shiftKey||(L(s),p(s.clientX,s.clientY))},R=s=>{s.shiftKey||(L(s),p(s.clientX,s.clientY),t(7,n=!0))},q=s=>{s.shiftKey||(L(s),p(s.clientX,s.clientY),t(7,n=!1),a&&i&&(t(8,i=!1),N()))},M=s=>{s.shiftKey||(L(s),i&&(t(8,i=!1),N()))};let h;const j=()=>{document.activeElement!==h&&h.focus()},N=()=>{document.activeElement===h&&h.blur()};function B(s){x[s?"unshift":"push"](()=>{h=s,t(0,h)})}return o.$$set=s=>{"scale"in s&&t(11,l=s.scale),"pointing"in s&&t(7,n=s.pointing),"pointer_down"in s&&t(8,i=s.pointer_down),"pointer_x"in s&&t(9,_=s.pointer_x),"pointer_y"in s&&t(10,f=s.pointer_y),"cancel_on_leave"in s&&t(12,a=s.cancel_on_leave),"$$scope"in s&&t(13,c=s.$$scope)},[h,w,y,b,R,q,M,n,i,_,f,l,a,c,r,B]}class me extends C{constructor(e){super(),P(this,e,oe,ne,A,{scale:11,pointing:7,pointer_down:8,pointer_x:9,pointer_y:10,cancel_on_leave:12})}}const ie=o=>{const e=[];let t,r=!0,c="",l="";const n=o.length;for(let i=0;i<n;i++)t=o[i],t===" "?c&&l?(e.push(Number(c),Number(l)),c="",l="",r=!0):(c="",l=""):t===","?r=!1:r?c+=t:l+=t;return c&&l&&e.push(Number(c),Number(l)),e},ye=o=>o.points_data||(o.points_data=ie(o.points)),v="#666666",I=3,Y="none",be="#c7beef",le="#75a6d7",ke=(o=void 0,e=void 0,t=void 0,r,c)=>({id:crypto.randomUUID(),type:"polyline",points:"",opacity:c,fill:o,enable_fill:e,stroke:t,stroke_width:r}),Le=(o=0,e=0,t=62,r=le,c=void 0,l=void 0,n,i)=>({id:crypto.randomUUID(),type:"circle",cx:o,cy:e,radius:t,opacity:i,fill:r,enable_fill:c,stroke:l,stroke_width:n}),se={x:o=>U(o,1),y:o=>U(o,1)},ge=(o,e)=>o.update(t=>{var c;const r={...t};for(const l in e){const n=e[l];if(n===void 0)continue;const i=se[l],_=i?i(n):n;if(_!==void 0)if(l==="append_points"){const f=r;for(let a=0;a<n.length;a+=2)f.points+=" "+n[a]+","+n[a+1],(c=f.points_data)==null||c.push(n[a],n[a+1])}else r[l]=_}return r});function re(o){const e=o.slice(),t=e[1];return e[12]=t.points,e}function ce(o){const e=o.slice(),t=e[1];return e[9]=t.cx,e[10]=t.cy,e[11]=t.radius,e}function F(o){let e;function t(n,i){return n[1].type==="circle"?S:n[1].type==="polyline"?T:_e}function r(n,i){return i===S?ce(n):i===T?re(n):n}let c=t(o),l=c(r(o,c));return{c(){l.c(),e=E()},l(n){l.l(n),e=E()},m(n,i){l.m(n,i),g(n,e,i)},p(n,i){c===(c=t(n))&&l?l.p(r(n,c),i):(l.d(1),l=c(r(n,c)),l&&(l.c(),l.m(e.parentNode,e)))},d(n){n&&m(e),l.d(n)}}}function _e(o){return{c:d,l:d,m:d,p:d,d}}function T(o){let e,t,r,c,l;return{c(){e=O("polyline"),this.h()},l(n){e=X(n,"polyline",{points:!0,pathLength:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),D(e).forEach(m),this.h()},h(){u(e,"points",t=o[12]),u(e,"pathLength",o[7]),u(e,"fill",r=o[6]?o[5]??Y:"none"),u(e,"opacity",o[4]),u(e,"stroke",c=o[3]??v),u(e,"stroke-width",l=o[2]??I)},m(n,i){g(n,e,i)},p(n,i){i&2&&t!==(t=n[12])&&u(e,"points",t),i&128&&u(e,"pathLength",n[7]),i&96&&r!==(r=n[6]?n[5]??Y:"none")&&u(e,"fill",r),i&16&&u(e,"opacity",n[4]),i&8&&c!==(c=n[3]??v)&&u(e,"stroke",c),i&4&&l!==(l=n[2]??I)&&u(e,"stroke-width",l)},d(n){n&&m(e)}}}function S(o){let e,t,r,c,l,n,i;return{c(){e=O("circle"),this.h()},l(_){e=X(_,"circle",{cx:!0,cy:!0,r:!0,pathLength:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),D(e).forEach(m),this.h()},h(){u(e,"cx",t=o[9]),u(e,"cy",r=o[10]),u(e,"r",c=o[11]),u(e,"pathLength",o[7]),u(e,"fill",l=o[6]?o[5]||"red":"none"),u(e,"opacity",o[4]),u(e,"stroke",n=o[3]??v),u(e,"stroke-width",i=o[2]??I)},m(_,f){g(_,e,f)},p(_,f){f&2&&t!==(t=_[9])&&u(e,"cx",t),f&2&&r!==(r=_[10])&&u(e,"cy",r),f&2&&c!==(c=_[11])&&u(e,"r",c),f&128&&u(e,"pathLength",_[7]),f&96&&l!==(l=_[6]?_[5]||"red":"none")&&u(e,"fill",l),f&16&&u(e,"opacity",_[4]),f&8&&n!==(n=_[3]??v)&&u(e,"stroke",n),f&4&&i!==(i=_[2]??I)&&u(e,"stroke-width",i)},d(_){_&&m(e)}}}function ue(o){let e,t=!o[8]&&F(o);return{c(){t&&t.c(),e=E()},l(r){t&&t.l(r),e=E()},m(r,c){t&&t.m(r,c),g(r,e,c)},p(r,[c]){r[8]?t&&(t.d(1),t=null):t?t.p(r,c):(t=F(r),t.c(),t.m(e.parentNode,e))},i:d,o:d,d(r){r&&m(e),t&&t.d(r)}}}function fe(o,e,t){let r,c,l,n,i,_,f,a,p=d,w=()=>(p(),p=$(y,b=>t(1,a=b)),y);o.$$.on_destroy.push(()=>p());let{item:y}=e;return w(),o.$$set=b=>{"item"in b&&w(t(0,y=b.item))},o.$$.update=()=>{o.$$.dirty&2&&t(8,{hidden:r,path_length:c,enable_fill:l,fill:n,opacity:i,stroke:_,stroke_width:f}=a,r,(t(7,c),t(1,a)),(t(6,l),t(1,a)),(t(5,n),t(1,a)),(t(4,i),t(1,a)),(t(3,_),t(1,a)),(t(2,f),t(1,a)))},[y,a,f,_,i,n,l,c,r]}class we extends C{constructor(e){super(),P(this,e,fe,ue,A,{item:0})}}export{I as D,we as M,me as S,Y as a,be as b,ke as c,Le as d,v as e,se as p,ye as t,ge as u};
