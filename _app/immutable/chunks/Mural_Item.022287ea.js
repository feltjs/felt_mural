import{n as S,p as G,e as H,c as J,a as D,d,o as f,i as g,I as k,u as V,q as W,v as z,r as Q,G as Z,A as E,j as m,J as x,K as A,L as O}from"./scheduler.0eed1ebe.js";import{S as X,i as C,a as $,t as ee}from"./index.9d1a20b8.js";import{s as L}from"./dom.affe8f60.js";import{r as U}from"./Scaled.0242c2b0.js";function te(n){let e,t,r,_;const l=n[14].default,i=G(l,n,n[13],null);return{c(){e=H("div"),i&&i.c(),this.h()},l(o){e=J(o,"DIV",{class:!0,tabindex:!0,role:!0});var c=D(e);i&&i.l(c),c.forEach(d),this.h()},h(){f(e,"class","surface svelte-1ktoghv"),f(e,"tabindex","0"),f(e,"role","button")},m(o,c){g(o,e,c),i&&i.m(e,null),n[15](e),t=!0,r||(_=[k(e,"pointerdown",n[1]),k(e,"pointerup",n[2]),k(e,"pointermove",n[3]),k(e,"pointerenter",n[4]),k(e,"pointerleave",n[5]),k(e,"pointercancel",n[6])],r=!0)},p(o,[c]){i&&i.p&&(!t||c&8192)&&V(i,l,o,o[13],t?z(l,o[13],c,null):W(o[13]),null)},i(o){t||($(i,o),t=!0)},o(o){ee(i,o),t=!1},d(o){o&&d(e),i&&i.d(o),n[15](null),r=!1,Q(_)}}}function ne(n,e,t){let{$$slots:r={},$$scope:_}=e,{scale:l=1}=e,{pointing:i=void 0}=e,{pointer_down:o=void 0}=e,{pointer_x:c=void 0}=e,{pointer_y:u=void 0}=e,{cancel_on_leave:a=!0}=e;const p=(s,B)=>{const K=h.getBoundingClientRect();t(9,c=(s-K.left)/l),t(10,u=(B-K.top)/l)},w=s=>{s.shiftKey||s.button>=3||(L(s),p(s.clientX,s.clientY),t(8,o=!0),M())},y=s=>{s.shiftKey||s.button>=3||(L(s),p(s.clientX,s.clientY),t(8,o=!1))},b=s=>{s.shiftKey||(L(s),p(s.clientX,s.clientY))},P=s=>{s.shiftKey||(L(s),p(s.clientX,s.clientY),t(7,i=!0))},R=s=>{s.shiftKey||(L(s),p(s.clientX,s.clientY),t(7,i=!1),a&&o&&(t(8,o=!1),N()))},q=s=>{s.shiftKey||(L(s),o&&(t(8,o=!1),N()))};let h;const M=()=>{document.activeElement!==h&&h.focus()},N=()=>{document.activeElement===h&&h.blur()};function j(s){Z[s?"unshift":"push"](()=>{h=s,t(0,h)})}return n.$$set=s=>{"scale"in s&&t(11,l=s.scale),"pointing"in s&&t(7,i=s.pointing),"pointer_down"in s&&t(8,o=s.pointer_down),"pointer_x"in s&&t(9,c=s.pointer_x),"pointer_y"in s&&t(10,u=s.pointer_y),"cancel_on_leave"in s&&t(12,a=s.cancel_on_leave),"$$scope"in s&&t(13,_=s.$$scope)},[h,w,y,b,P,R,q,i,o,c,u,l,a,_,r,j]}class me extends X{constructor(e){super(),C(this,e,ne,te,S,{scale:11,pointing:7,pointer_down:8,pointer_x:9,pointer_y:10,cancel_on_leave:12})}}const oe=n=>{const e=[];let t,r=!0,_="",l="";const i=n.length;for(let o=0;o<i;o++)t=n[o],t===" "?_&&l?(e.push(Number(_),Number(l)),_="",l="",r=!0):(_="",l=""):t===","?r=!1:r?_+=t:l+=t;return _&&l&&e.push(Number(_),Number(l)),e},de=n=>n.points_data||(n.points_data=oe(n.points)),v="#666666",I=3,Y="none",ye="#c7beef",ie="#75a6d7",be=(n=void 0,e=void 0,t=void 0,r,_,l=0,i=0)=>({id:crypto.randomUUID(),type:"polyline",points:"",x:l,y:i,opacity:_,fill:n,enable_fill:e,stroke:t,stroke_width:r}),ke=(n=0,e=0,t=62,r=ie,_=void 0,l=void 0,i,o)=>({id:crypto.randomUUID(),type:"circle",radius:t,x:n,y:e,opacity:o,fill:r,enable_fill:_,stroke:l,stroke_width:i}),le={x:n=>U(n,1),y:n=>U(n,1)},Le=(n,e)=>{n.update(t=>{var _;const r={...t};for(const l in e){const i=e[l];if(i===void 0)continue;const o=le[l],c=o?o(i):i;if(c!==void 0)if(l==="append_points"){const u=r;for(let a=0;a<i.length;a+=2)u.points+=" "+i[a]+","+i[a+1],(_=u.points_data)==null||_.push(i[a],i[a+1])}else r[l]=c}return r})};function se(n){const e=n.slice(),t=e[1];return e[9]=t.points,e}function F(n){let e;function t(i,o){return i[1].type==="circle"?_e:i[1].type==="polyline"?T:re}function r(i,o){return o===T?se(i):i}let _=t(n),l=_(r(n,_));return{c(){l.c(),e=E()},l(i){l.l(i),e=E()},m(i,o){l.m(i,o),g(i,e,o)},p(i,o){_===(_=t(i))&&l?l.p(r(i,_),o):(l.d(1),l=_(r(i,_)),l&&(l.c(),l.m(e.parentNode,e)))},d(i){i&&d(e),l.d(i)}}}function re(n){return{c:m,l:m,m,p:m,d:m}}function T(n){let e,t,r,_,l,i;return{c(){e=A("polyline"),this.h()},l(o){e=O(o,"polyline",{points:!0,transform:!0,pathLength:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),D(e).forEach(d),this.h()},h(){f(e,"points",t=n[9]),f(e,"transform",r=n[1].x||n[1].y?`translate(${n[1].x} ${n[1].y})`:void 0),f(e,"pathLength",n[7]),f(e,"fill",_=n[6]?n[5]??Y:"none"),f(e,"opacity",n[4]),f(e,"stroke",l=n[3]??v),f(e,"stroke-width",i=n[2]??I)},m(o,c){g(o,e,c)},p(o,c){c&2&&t!==(t=o[9])&&f(e,"points",t),c&2&&r!==(r=o[1].x||o[1].y?`translate(${o[1].x} ${o[1].y})`:void 0)&&f(e,"transform",r),c&128&&f(e,"pathLength",o[7]),c&96&&_!==(_=o[6]?o[5]??Y:"none")&&f(e,"fill",_),c&16&&f(e,"opacity",o[4]),c&8&&l!==(l=o[3]??v)&&f(e,"stroke",l),c&4&&i!==(i=o[2]??I)&&f(e,"stroke-width",i)},d(o){o&&d(e)}}}function _e(n){let e,t,r,_,l,i,o;return{c(){e=A("circle"),this.h()},l(c){e=O(c,"circle",{cx:!0,cy:!0,r:!0,pathLength:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),D(e).forEach(d),this.h()},h(){f(e,"cx",t=n[1].x),f(e,"cy",r=n[1].y),f(e,"r",_=n[1].radius),f(e,"pathLength",n[7]),f(e,"fill",l=n[6]?n[5]||"red":"none"),f(e,"opacity",n[4]),f(e,"stroke",i=n[3]??v),f(e,"stroke-width",o=n[2]??I)},m(c,u){g(c,e,u)},p(c,u){u&2&&t!==(t=c[1].x)&&f(e,"cx",t),u&2&&r!==(r=c[1].y)&&f(e,"cy",r),u&2&&_!==(_=c[1].radius)&&f(e,"r",_),u&128&&f(e,"pathLength",c[7]),u&96&&l!==(l=c[6]?c[5]||"red":"none")&&f(e,"fill",l),u&16&&f(e,"opacity",c[4]),u&8&&i!==(i=c[3]??v)&&f(e,"stroke",i),u&4&&o!==(o=c[2]??I)&&f(e,"stroke-width",o)},d(c){c&&d(e)}}}function ce(n){let e,t=!n[8]&&F(n);return{c(){t&&t.c(),e=E()},l(r){t&&t.l(r),e=E()},m(r,_){t&&t.m(r,_),g(r,e,_)},p(r,[_]){r[8]?t&&(t.d(1),t=null):t?t.p(r,_):(t=F(r),t.c(),t.m(e.parentNode,e))},i:m,o:m,d(r){r&&d(e),t&&t.d(r)}}}function fe(n,e,t){let r,_,l,i,o,c,u,a,p=m,w=()=>(p(),p=x(y,b=>t(1,a=b)),y);n.$$.on_destroy.push(()=>p());let{item:y}=e;return w(),n.$$set=b=>{"item"in b&&w(t(0,y=b.item))},n.$$.update=()=>{n.$$.dirty&2&&t(8,{hidden:r,path_length:_,enable_fill:l,fill:i,opacity:o,stroke:c,stroke_width:u}=a,r,(t(7,_),t(1,a)),(t(6,l),t(1,a)),(t(5,i),t(1,a)),(t(4,o),t(1,a)),(t(3,c),t(1,a)),(t(2,u),t(1,a)))},[y,a,u,c,o,i,l,_,r]}class ge extends X{constructor(e){super(),C(this,e,fe,ce,S,{item:0})}}export{I as D,ge as M,me as S,Y as a,ye as b,be as c,ke as d,v as e,le as p,de as t,Le as u};
